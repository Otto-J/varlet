import{F as x,u as _}from"./provide-8be1530f.js";import{p as ee,V as oe}from"./FieldDecorator-3a644028.js";import{d as u,p as ne,k as ae,a as d,o as re,c as le,w as se}from"./logger-9a144f5d.js";import{d as de,a as h,z as ie,b as g,aI as D,n as te,Z as ue,_ as me,p as E,f as C,h as f,q as N,aJ as P,S as v,O as V,N as b,R as F,j as pe,aK as he,aL as ge,ag as Ce}from"./vue-router-547718df.js";const fe={modelValue:String,modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text"},textarea:Boolean,rows:{type:[String,Number],default:8},maxlength:[String,Number],readonly:Boolean,resize:Boolean,autofocus:Boolean,validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:Array,enterkeyhint:String,onFocus:u(),onBlur:u(),onInput:u(),onChange:u(),onClear:u(),"onUpdate:modelValue":u(),...ne(ee,["size","variant","placeholder","line","hint","textColor","focusColor","blurColor","disabled","clearable","onClick"])},{n:ve,classes:be}=le("input"),ye=de({name:"VarInput",components:{VarFormDetails:x,VarFieldDecorator:oe},props:fe,setup(e){const n=h(`var-input-${ie().uid}`),m=h(null),p=h(!1),i=h(!1),T=g(()=>e.type==="number"?"text":e.type),y=g(()=>{const{maxlength:o,modelValue:l}=e;return o?D(l)?`0 / ${o}`:`${String(l).length}/${o}`:""}),k=g(()=>e.disabled||e.readonly?"":"text"),a=g(()=>{const{hint:o,blurColor:l,focusColor:s}=e;if(!o)return B.value?"var(--field-decorator-error-color)":p.value?s||"var(--field-decorator-focus-color)":l||"var(--field-decorator-blur-color)"}),{bindForm:R,form:r}=_(),{errorMessage:B,validateWithTrigger:O,validate:U,resetValidation:M}=ae(),t=o=>{te(()=>{const{validateTrigger:l,rules:s,modelValue:I}=e;O(l,o,s,I)})},c=o=>{p.value=!0,d(e.onFocus,o),t("onFocus")},j=o=>{p.value=!1,d(e.onBlur,o),t("onBlur")},S=o=>{const l=o.target;let{value:s}=l;return e.type==="number"&&(s=Z(s)),H(G(s))},A=()=>{i.value=!0},L=o=>{i.value&&(i.value=!1,o.target.dispatchEvent(new Event("input")))},W=o=>{if(i.value)return;const l=S(o);d(e["onUpdate:modelValue"],l),d(e.onInput,l,o),t("onInput")},q=o=>{const l=S(o);d(e.onChange,l,o),t("onChange")},J=()=>{const{disabled:o,readonly:l,clearable:s,onClear:I}=e;r!=null&&r.disabled.value||r!=null&&r.readonly.value||o||l||!s||(d(e["onUpdate:modelValue"],""),d(I,""),t("onClear"))},K=o=>{const{disabled:l,onClick:s}=e;r!=null&&r.disabled.value||l||(d(s,o),t("onClick"))},Z=o=>{const l=o.indexOf("-"),s=o.indexOf(".");return l>-1&&(o=l===0?"-"+o.replace(/-/g,""):o.replace(/-/g,"")),s>-1&&(o=o.slice(0,s+1)+o.slice(s).replace(/\./g,"")),o.replace(/[^-0-9.]/g,"")},G=o=>e.modelModifiers.trim?o.trim():o,H=o=>e.maxlength?o.slice(0,ue(e.maxlength)):o,Q=o=>{const{disabled:l,readonly:s}=e;r!=null&&r.disabled.value||r!=null&&r.readonly.value||l||s||o.stopPropagation()};function X(o){const{disabled:l}=e;r!=null&&r.disabled.value||l||o.target===m.value||(w(),o.preventDefault())}const $=()=>{d(e["onUpdate:modelValue"],""),M()},z=()=>U(e.rules,e.modelValue),w=()=>{var o;(o=m.value)==null||o.focus()},Y=()=>{m.value.blur()};return d(R,{reset:$,validate:z,resetValidation:M}),re(()=>{e.autofocus&&w()}),{el:m,id:n,isFocus:p,isComposing:i,errorMessage:B,placeholderColor:a,normalizedType:T,cursor:k,maxlengthText:y,formDisabled:r==null?void 0:r.disabled,formReadonly:r==null?void 0:r.readonly,n:ve,classes:be,isEmpty:D,handleFocus:c,handleBlur:j,handleInput:W,handleChange:q,handleClear:J,handleClick:K,handleTouchstart:Q,handleCompositionStart:A,handleCompositionEnd:L,handleMousedown:X,validate:z,resetValidation:M,reset:$,focus:w,blur:Y}}});const ke=["placeholder","enterkeyhint"],Me=["id","disabled","type","value","placeholder","maxlength","rows","enterkeyhint","inputmode"],we=["id","disabled","type","value","placeholder","maxlength","enterkeyhint","inputmode"];function Ie(e,n,m,p,i,T){const y=E("var-field-decorator"),k=E("var-form-details");return C(),f("div",{class:b(e.classes(e.n(),e.n("$--box"))),onMousedown:n[15]||(n[15]=(...a)=>e.handleMousedown&&e.handleMousedown(...a))},[N(y,he(ge({value:e.modelValue,id:e.id,size:e.size,variant:e.variant,placeholder:e.placeholder,line:e.line,hint:e.hint,textColor:e.textColor,focusColor:e.focusColor,blurColor:e.blurColor,isFocus:e.isFocus,errorMessage:e.errorMessage,formDisabled:e.formDisabled,disabled:e.disabled,clearable:e.clearable,cursor:e.cursor,composing:e.isComposing,onClick:e.handleClick,onClear:e.handleClear})),P({"append-icon":v(()=>[V(e.$slots,"append-icon")]),default:v(()=>[e.normalizedType==="password"?(C(),f("input",{key:0,tabindex:"-1",class:b(e.n("autocomplete")),placeholder:e.hint?void 0:e.placeholder,style:F({"--input-placeholder-color":e.placeholderColor}),enterkeyhint:e.enterkeyhint},null,14,ke)):pe("",!0),e.textarea?(C(),f("textarea",{key:1,class:b(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.normalizedType,value:e.modelValue,placeholder:e.hint?void 0:e.placeholder,maxlength:e.maxlength,rows:e.rows,enterkeyhint:e.enterkeyhint,inputmode:e.type==="number"?"numeric":void 0,style:F({color:e.errorMessage?void 0:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none","--input-placeholder-color":e.placeholderColor}),onFocus:n[0]||(n[0]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onBlur:n[1]||(n[1]=(...a)=>e.handleBlur&&e.handleBlur(...a)),onInput:n[2]||(n[2]=(...a)=>e.handleInput&&e.handleInput(...a)),onChange:n[3]||(n[3]=(...a)=>e.handleChange&&e.handleChange(...a)),onTouchstart:n[4]||(n[4]=(...a)=>e.handleTouchstart&&e.handleTouchstart(...a)),onCompositionstart:n[5]||(n[5]=(...a)=>e.handleCompositionStart&&e.handleCompositionStart(...a)),onCompositionend:n[6]||(n[6]=(...a)=>e.handleCompositionEnd&&e.handleCompositionEnd(...a))},`
      `,46,Me)):(C(),f("input",{key:2,class:b(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.normalizedType,value:e.modelValue,placeholder:e.hint?void 0:e.placeholder,maxlength:e.maxlength,enterkeyhint:e.enterkeyhint,inputmode:e.type==="number"?"numeric":void 0,style:F({color:e.errorMessage?void 0:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,"--input-placeholder-color":e.placeholderColor}),onFocus:n[7]||(n[7]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onBlur:n[8]||(n[8]=(...a)=>e.handleBlur&&e.handleBlur(...a)),onInput:n[9]||(n[9]=(...a)=>e.handleInput&&e.handleInput(...a)),onChange:n[10]||(n[10]=(...a)=>e.handleChange&&e.handleChange(...a)),onTouchstart:n[11]||(n[11]=(...a)=>e.handleTouchstart&&e.handleTouchstart(...a)),onCompositionstart:n[12]||(n[12]=(...a)=>e.handleCompositionStart&&e.handleCompositionStart(...a)),onCompositionend:n[13]||(n[13]=(...a)=>e.handleCompositionEnd&&e.handleCompositionEnd(...a))},null,46,we))]),_:2},[e.$slots["prepend-icon"]?{name:"prepend-icon",fn:v(()=>[V(e.$slots,"prepend-icon")]),key:"0"}:void 0]),1040),N(k,{"error-message":e.errorMessage,"extra-message":e.maxlengthText,onMousedown:n[14]||(n[14]=Ce(()=>{},["stop"]))},P({_:2},[e.$slots["extra-message"]?{name:"extra-message",fn:v(()=>[V(e.$slots,"extra-message")]),key:"0"}:void 0]),1032,["error-message","extra-message"])],34)}const Ve=me(ye,[["render",Ie]]);se(Ve);export{Ve as I};
