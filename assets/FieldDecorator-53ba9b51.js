import{I as O}from"./index-16bfcccc.js";import{d as B,e as Q,i as Y,c as A,a as E}from"./components-e6984121.js";import{d as G,a as o,b as H,w as J,aI as p,_ as K,p as U,f as s,h as u,M as a,N as l,O as w,R as r,Q as z,j as S,i as X,F as Z}from"./vue-router-8b9a9ee5.js";function _(e){return["small","normal"].includes(e)}function x(e){return["outlined","standard"].includes(e)}const ee={value:{type:null,required:!0},id:{type:String,default:""},isFocus:{type:Boolean},size:{type:String,default:"normal",validator:_},variant:{type:String,default:"standard",validator:x},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},errorMessage:{type:String},formDisabled:{type:Boolean},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},cursor:{type:String},composing:{type:Boolean,default:!1},alwaysCustomPlaceholder:{type:Boolean,default:!0},onClick:B(),onClear:B()},{n:k,classes:le}=A("field-decorator"),ne=G({name:"VarFieldDecorator",components:{VarIcon:O},props:ee,setup(e){const i=o(null),m=o(null),v=o(null),g=o(null),c=o(""),d=o(""),t=o(""),y=o(""),D=H(()=>e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor),W=()=>{const{hint:n,value:h,isFocus:f,composing:C}=e;if(!n&&(!p(h)||C))return k("--placeholder-hidden");if(n&&(!p(h)||f))return k("--placeholder-hint")},V=()=>{d.value="",c.value="",y.value="",t.value=""},$=()=>e.hint&&(!p(e.value)||e.isFocus),b=()=>{var F,M;const{size:n,placeholder:h,variant:f}=e;if(!$()||!h){V();return}const C=`var(--field-decorator-outlined-${n}-placeholder-space)`,T=(F=window.getComputedStyle(v.value))==null?void 0:F.width,N=(M=window.getComputedStyle(g.value))==null?void 0:M.width,L=f==="outlined"?"-50%":"0";if(y.value=`translate(-${N}, ${L}) scale(0.75)`,t.value=window.getComputedStyle(m.value).width,f==="outlined"){const{width:R,paddingLeft:j,paddingRight:q}=window.getComputedStyle(i.value);d.value=`calc(${T} * 0.75 + 2 * ${C})`,c.value=`calc(${R} - ${j} - ${q})`}},I=n=>{E(e.onClear,n)},P=n=>{E(e.onClick,n)};return J(()=>[e.size,e.placeholder,e.hint,e.value,e.isFocus,e.variant],b),Q(b),Y(()=>window,"resize",b),{fieldsetEl:i,controllerEl:m,placeholderTextEl:v,prependIconEl:g,placeholderTransform:y,color:D,legendWidth:d,legendMaxWidth:c,controllerWidth:t,isFloating:$,computePlaceholderState:W,n:k,classes:le,isEmpty:p,handleClear:I,handleClick:P}}});const oe=["for"];function ae(e,i,m,v,g,c){const d=U("var-icon");return s(),u("div",{class:l(e.classes(e.n(),e.n("$--box"),e.n(`--${e.variant}`),[e.size==="small",e.n("--small")],[e.disabled,e.n("--disabled")])),style:r({"--field-decorator-legend-max-width":e.legendMaxWidth,"--filed-decorator-controller-width":e.controllerWidth}),onClick:i[0]||(i[0]=(...t)=>e.handleClick&&e.handleClick(...t))},[a("div",{class:l(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),ref:"controllerEl",style:r({color:e.color,cursor:e.cursor})},[a("div",{class:l(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")])),ref:"prependIconEl"},[w(e.$slots,"prepend-icon")],2),a("div",{class:l(e.classes(e.n("middle"),[!e.hint,e.n("--middle-non-hint")]))},[w(e.$slots,"default"),e.hint||e.alwaysCustomPlaceholder?(s(),u("label",{key:0,class:l(e.classes(e.n("placeholder"),e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[!e.hint,e.n("--placeholder-non-hint")],e.computePlaceholderState())),style:r({transform:e.placeholderTransform,color:e.color}),for:e.id},[a("span",null,z(e.placeholder),1),a("span",{class:l(e.n("placeholder-text")),ref:"placeholderTextEl"},z(e.placeholder),3)],14,oe)):S("",!0)],2),a("div",{class:l(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[e.clearable&&!e.isEmpty(e.value)?(s(),X(d,{key:0,class:l(e.n("clear-icon")),"var-field-decorator-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):S("",!0),w(e.$slots,"append-icon")],2)],6),e.line?(s(),u(Z,{key:0},[e.variant==="outlined"?(s(),u("fieldset",{key:0,class:l(e.classes(e.n("line"),[e.isFocus,e.n("--line-focus")],[e.errorMessage,e.n("--line-error")],[e.formDisabled||e.disabled,e.n("--line-disabled")])),ref:"fieldsetEl"},[a("legend",{class:l(e.classes(e.n("line-legend"),[e.isFloating(),e.n("line-legend--hint")])),style:r({width:e.legendWidth,maxWidth:e.legendMaxWidth})},null,6)],2)):(s(),u("div",{key:1,class:l(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:r({background:e.errorMessage?void 0:e.blurColor})},[a("div",{class:l(e.classes(e.n("dot"),[e.isFocus,e.n("--line-focus")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:r({background:e.errorMessage?void 0:e.focusColor})},null,6)],6))],64)):S("",!0)],6)}const de=K(ne,[["render",ae]]);export{de as V,ee as p};
