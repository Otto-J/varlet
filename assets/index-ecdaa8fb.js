import{v as k}from"./index-f83d6549.js";import{d as v,h as C,c as L,b as s}from"./components-1cb7d034.js";import{X as $,W as V,d as B,a as z,aj as W,_ as A,ag as F,f as t,h as i,F as N,D as U,N as u,R as f,O as j}from"./vue-router.esm-bundler-6d3911e1.js";import{a as w}from"./elements-c1df6f47.js";function D(e){return["fill","contain","cover","none","scale-down"].includes(e)}const S=e=>["mini","small","normal","large"].includes(e);function h(e){return S(e)||$(e)||V(e)}const M={round:{type:Boolean,default:!0},size:{type:[String,Number],validator:h,default:"normal"},color:{type:String},src:{type:String},fit:{type:String,validator:D,default:"cover"},bordered:{type:Boolean,default:!1},borderColor:{type:String},loading:{type:String},error:{type:String},lazy:{type:Boolean,default:!1},onClick:v(),onLoad:v(),onError:v()},{n:O,classes:P}=L("avatar"),R=B({name:"VarAvatar",directives:{Lazy:k},props:M,setup(e){const a=z(null),d=z(null),n=z(1),m=()=>{if(!a.value||!d.value){n.value=1;return}const r=a.value.offsetWidth,l=d.value.offsetWidth;r>l?n.value=1:n.value=r/l},g=r=>{const l=r.currentTarget,{lazy:E,onLoad:c,onError:b}=e;E?(l._lazy.state==="success"&&s(c,r),l._lazy.state==="error"&&s(b,r)):s(c,r)},y=r=>{s(e.onError,r)},o=r=>{s(e.onClick,r)};return C(m),W(m),{internalSizeValidator:S,sizeValidator:h,toSizeUnit:w,n:O,classes:P,avatarElement:a,textElement:d,scale:n,handleLoad:g,handleError:y,handleClick:o}}});const T=["src","lazy-loading","lazy-error"],X=["src"];function q(e,a,d,n,m,g){const y=F("lazy");return t(),i("div",{ref:"avatarElement",class:u(e.classes(e.n(),e.n("$--box"),[e.internalSizeValidator(e.size),e.n(`--${e.size}`)],[e.round,e.n("--round")],[e.bordered,e.n("--bordered")])),style:f({width:e.internalSizeValidator(e.size)?void 0:e.toSizeUnit(e.size),height:e.internalSizeValidator(e.size)?void 0:e.toSizeUnit(e.size),borderColor:e.borderColor,backgroundColor:e.color}),onClick:a[3]||(a[3]=(...o)=>e.handleClick&&e.handleClick(...o))},[e.src?(t(),i(N,{key:0},[e.lazy?U((t(),i("img",{key:0,class:u(e.n("image")),src:e.src,style:f({objectFit:e.fit}),"lazy-loading":e.loading,"lazy-error":e.error,onLoad:a[0]||(a[0]=(...o)=>e.handleLoad&&e.handleLoad(...o))},null,46,T)),[[y,e.src]]):(t(),i("img",{key:1,class:u(e.n("image")),src:e.src,style:f({objectFit:e.fit}),onLoad:a[1]||(a[1]=(...o)=>e.handleLoad&&e.handleLoad(...o)),onError:a[2]||(a[2]=(...o)=>e.handleError&&e.handleError(...o))},null,46,X))],64)):(t(),i("div",{key:1,ref:"textElement",class:u(e.n("text")),style:f({transform:`scale(${e.scale})`})},[j(e.$slots,"default")],6))],6)}const p=A(R,[["render",q]]);p.install=function(e){e.component(p.name,p)};export{p as A};
