import{p as S,I as J}from"./index-1fa00c30.js";import{F as K,u as Q}from"./provide-f688bbd4.js";import{v as Y}from"./index-5ff87f5e.js";import{H as Z,u as x}from"./index-5bba6f41.js";import{v as ee}from"./index-f461835b.js";import{p as V,d as F,h as ae,a as p,c as ne,w as re}from"./components-fe15bdb3.js";import{a as P}from"./elements-3c5c0dcb.js";import{d as oe,r as te,a4 as c,n as le,_ as se,b as N,L as U,e as I,m as H,p as ie,N as ce,O as de,P as me,y as $,x as v,q as k}from"./index-e49287a9.js";const ue={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:String,icon:{type:String,default:"star"},emptyIcon:{type:String,default:"star-outline"},halfIcon:{type:String,default:"star-half-full"},namespace:V(S,"namespace"),emptyIconNamespace:V(S,"namespace"),halfIconNamespace:V(S,"namespace"),emptyColor:String,size:[String,Number],gap:[String,Number],half:Boolean,disabled:Boolean,disabledColor:String,readonly:Boolean,ripple:{type:Boolean,default:!0},clearable:Boolean,rules:Array,onChange:F(),"onUpdate:modelValue":F()},{name:pe,n:d}=ne("rate"),ve=oe({name:pe,components:{VarIcon:J,VarFormDetails:K,VarHoverOverlay:Z},directives:{Ripple:Y,Hover:ee},props:ue,setup(e){const f=te(-1),{form:a,bindForm:_}=Q(),{errorMessage:g,validateWithTrigger:B,validate:y,resetValidation:s}=ae(),{hovering:m}=x();let u=Number(e.modelValue);p(_,{reset:D,validate:z,resetValidation:s});function o(n){const{count:r,gap:t}=e;return{color:b(n).color,marginRight:n!==c(r)?P(t):0}}function h(n){const{name:r,color:t}=b(n);return{[d("content")]:!0,[d("--disabled")]:(a==null?void 0:a.disabled.value)||e.disabled,[d("--error")]:g.value,[d("--primary")]:r!==e.emptyIcon&&!t}}function b(n){const{modelValue:r,disabled:t,disabledColor:l,color:i,half:T,emptyColor:W,icon:q,halfIcon:A,emptyIcon:E,namespace:X,halfIconNamespace:j,emptyIconNamespace:G}=e;let C=i;return(t||a!=null&&a.disabled.value)&&(C=l),n<=c(r)?{color:C,name:q,namespace:X}:T&&n<=c(r)+.5?{color:C,name:A,namespace:j}:{color:t||a!=null&&a.disabled.value?l:W,name:E,namespace:G}}function w(n,r){const{half:t,clearable:l}=e,{offsetWidth:i}=r.target;t&&r.offsetX<=Math.floor(i/2)&&(n-=.5),u===n&&l&&(n=0),u=n,p(e["onUpdate:modelValue"],n)}function z(){return y(e.rules,c(e.modelValue))}function O(){return le(()=>B(["onChange"],"onChange",e.rules,e.modelValue))}function L(n,r){const{readonly:t,disabled:l,onChange:i}=e;t||l||a!=null&&a.disabled.value||a!=null&&a.readonly.value||(w(n,r),p(i,n),O())}function M(n){return r=>{f.value=n,m.value=r}}function D(){p(e["onUpdate:modelValue"],0),s()}return{errorMessage:g,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,hovering:m,currentHoveringValue:f,getStyle:o,getClass:h,getCurrentState:b,handleClick:L,createHoverHandler:M,reset:D,validate:z,resetValidation:s,toSizeUnit:P,toNumber:c,n:d}}});const fe=["onClick"];function ge(e,f,a,_,g,B){const y=N("var-icon"),s=N("var-hover-overlay"),m=N("var-form-details"),u=U("ripple"),R=U("hover");return I(),H("div",{class:v(e.n("wrap"))},[ie("div",{class:v(e.n())},[(I(!0),H(ce,null,de(e.toNumber(e.count),o=>me((I(),H("div",{key:o,style:$(e.getStyle(o)),class:v(e.getClass(o)),onClick:h=>e.handleClick(o,h)},[k(y,{class:v(e.n("content-icon")),"var-rate-cover":"",transition:0,namespace:e.getCurrentState(o).namespace,name:e.getCurrentState(o).name,style:$({fontSize:e.toSizeUnit(e.size)})},null,8,["class","namespace","name","style"]),k(s,{hovering:e.hovering&&o===e.currentHoveringValue&&!e.disabled&&!e.formDisabled},null,8,["hovering"])],14,fe)),[[u,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}],[R,e.createHoverHandler(o),"desktop"]])),128))],2),k(m,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const ye=se(ve,[["render",ge]]);re(ye);export{ye as R};
