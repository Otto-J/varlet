import{I as A}from"./index-84639265.js";import{F as E,u as X}from"./provide-2d8aed18.js";import{v as Z}from"./index-4453413c.js";import{H as j,u as G}from"./index-34c73e6b.js";import{v as J}from"./index-d73f18e4.js";import{d as B,i as K,a as m,c as Q}from"./components-440543a7.js";import{a as D}from"./elements-323d4edc.js";import{d as Y,a as x,Z as i,n as ee,_ as ae,p as C,ag as F,f as S,h as V,M as oe,F as te,ai as ne,D as re,R as U,N as v,q as _}from"./vue-router.esm-bundler-6be07501.js";const le={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number]},gap:{type:[String,Number]},namespace:{type:String},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},rules:{type:Array},onChange:B(),"onUpdate:modelValue":B()},{n:d}=Q("rate"),se=Y({name:"VarRate",components:{VarIcon:A,VarFormDetails:E,VarHoverOverlay:j},directives:{Ripple:Z,Hover:J},props:le,setup(e){const{form:a,bindForm:R}=X(),{errorMessage:p,validateWithTrigger:k,validate:H,resetValidation:l}=K(),{hovering:y,handleHovering:g}=G(),c=x(-1),f=o=>{const{count:t,gap:n}=e;return{color:s(o).color,marginRight:o!==i(t)?D(n):0}},r=o=>{const{name:t,color:n}=s(o);return{[d("content")]:!0,[d("--disabled")]:(a==null?void 0:a.disabled.value)||e.disabled,[d("--error")]:p.value,[d("--primary")]:t!==e.emptyIcon&&!n}},s=o=>{const{modelValue:t,disabled:n,disabledColor:u,color:h,half:T,emptyColor:W,icon:w,halfIcon:L,emptyIcon:q}=e;let b=h;return(n||a!=null&&a.disabled.value)&&(b=u),o<=i(t)?{color:b,name:w}:T&&o<=i(t)+.5?{color:b,name:L}:{color:n||a!=null&&a.disabled.value?u:W,name:q}},M=(o,t)=>{if(e.half){const{offsetWidth:n}=t.target;t.offsetX<=Math.floor(n/2)&&(o-=.5)}m(e["onUpdate:modelValue"],o)},I=()=>H(e.rules,i(e.modelValue)),$=()=>ee(()=>k(["onChange"],"onChange",e.rules,e.modelValue)),O=(o,t)=>{const{readonly:n,disabled:u,onChange:h}=e;n||u||a!=null&&a.disabled.value||a!=null&&a.readonly.value||(M(o,t),m(h,o),$())},P=o=>t=>{c.value=o,g(t)},z=()=>{m(e["onUpdate:modelValue"],0),l()};return m(R,{reset:z,validate:I,resetValidation:l}),{errorMessage:p,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,getStyle:f,getClass:r,getCurrentState:s,handleClick:O,hovering:y,hoverValue:c,handleHover:P,reset:z,validate:I,resetValidation:l,toSizeUnit:D,toNumber:i,n:d}}});const ie=["onClick"];function de(e,a,R,p,k,H){const l=C("var-icon"),y=C("var-hover-overlay"),g=C("var-form-details"),c=F("ripple"),f=F("hover");return S(),V("div",{class:v(e.n("wrap"))},[oe("div",{class:v(e.n())},[(S(!0),V(te,null,ne(e.toNumber(e.count),r=>re((S(),V("div",{key:r,style:U(e.getStyle(r)),class:v(e.getClass(r)),onClick:s=>e.handleClick(r,s)},[_(l,{class:v(e.n("content-icon")),"var-rate-cover":"",transition:0,namespace:e.namespace,name:e.getCurrentState(r).name,style:U({fontSize:e.toSizeUnit(e.size)})},null,8,["class","namespace","name","style"]),_(y,{hovering:e.hovering&&r===e.hoverValue},null,8,["hovering"])],14,ie)),[[c,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}],[f,e.handleHover(r),"desktop"]])),128))],2),_(g,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const N=ae(se,[["render",de]]);N.install=function(e){e.component(N.name,N)};export{N as R};
