import{L as q}from"./index-7a2859ab.js";import{v as W}from"./index-08c6a734.js";import{g as Y,t as Z}from"./elements-e2660be6.js";import{d as E,a as N,c as G,w as H}from"./components-aa05b956.js";import{a3 as J,d as X,r as V,F as D,ar as ee,aI as te,ab as ae,n as ie,ah as M,_ as ne,b as se,K as oe,e as u,l as b,s as C,m as S,t as v,Q as l,p as o,q as _,O as le,P as c,W as re,aS as de,E as fe,aj as ue,w as n,U as t,aT as k,M as y,N as w,f as F}from"./index-73b8d177.js";import{d as me}from"./shared-97c4ad8b.js";import{p as ge,u as pe,b as Q,_ as ce,c as Te,a as he}from"./index-3a5bb2e6.js";import{T as ve,a as P}from"./index-2c89c016.js";import{C as R}from"./index-3c4b98e4.js";import{a as z,T as ke}from"./index-89a17736.js";import{T as be}from"./index-25d35db1.js";import{d as Le}from"./index-ea9abee8.js";import"./index-2b103741.js";/* empty css               */import"./logger-525ef361.js";import"./index-bab2e469.js";import"./provide-4d3a725d.js";import"./provide-323f6db0.js";import"./index-7c77fe96.js";import"./index-b90e18a7.js";import"./index-50522d68.js";import"./provide-7093b48a.js";const Ue={loading:Boolean,immediateCheck:{type:Boolean,default:!0},finished:Boolean,error:Boolean,offset:{type:[String,Number],default:0},loadingText:String,finishedText:String,errorText:String,onLoad:E(),"onUpdate:loading":E(),"onUpdate:error":E()};function xe(){const{parentProvider:e,bindParent:a,index:T}=J(ve);return{index:T,tabItem:e,bindTabItem:a}}const{n:Ie,classes:Ne}=G("list"),Ce=X({name:"VarList",directives:{Ripple:W},components:{VarLoading:q},props:Ue,setup(e){const{tabItem:a,bindTabItem:T}=xe(),L=V(null),U=V(null);let r;const m=()=>{N(e["onUpdate:error"],!1),N(e["onUpdate:loading"],!0),N(e.onLoad)},p=()=>{const{bottom:$}=M(r),{bottom:I}=M(U.value);return Math.floor(I)-Z(e.offset)<=$},x=()=>{r.removeEventListener("scroll",g)},g=async()=>{await ie(),!(e.loading||e.finished||e.error||(a==null?void 0:a.current.value)===!1||!p())&&m()};return N(T,{}),a&&D(()=>a.current.value,g),D(()=>[e.loading,e.error,e.finished],g),ee(()=>{r=Y(L.value),r.addEventListener("scroll",g),e.immediateCheck&&g()}),te(x),{pack:ge,listEl:L,detectorEl:U,dt:me,isNumber:ae,load:m,check:g,n:Ie,classes:Ne}}});function Se(e,a,T,L,U,r){const m=se("var-loading"),p=oe("ripple");return u(),b("div",{class:v(e.classes(e.n(),e.n("$--box"))),ref:"listEl"},[C(e.$slots,"default"),e.loading?C(e.$slots,"loading",{key:0},()=>[S("div",{class:v(e.n("loading"))},[S("div",{class:v(e.n("loading-text"))},l(e.dt(e.loadingText,e.pack.listLoadingText)),3),o(m,{size:"mini",radius:10})],2)]):_("",!0),e.finished?C(e.$slots,"finished",{key:1},()=>[S("div",{class:v(e.n("finished"))},l(e.dt(e.finishedText,e.pack.listFinishedText)),3)]):_("",!0),e.error?C(e.$slots,"error",{key:2},()=>[le((u(),b("div",{class:v(e.n("error")),onClick:a[0]||(a[0]=(...x)=>e.load&&e.load(...x))},[c(l(e.dt(e.errorText,e.pack.listErrorText)),1)],2)),[[p]])]):_("",!0),S("div",{class:v(e.n("detector")),ref:"detectorEl"},null,2)],2)}const B=ne(Ce,[["render",Se]]);H(B);const ye={basicUsage:"基本使用",loadFail:"加载失败",tipText:"提示文字",loadingText:"正在努力输出",errorText:"出错了出错了",finishedText:"一滴都没有了",listItem:"列表项"},Be={basicUsage:"Basic Usage",loadFail:"Load Fail",tipText:"Tip Text",loadingText:"loading QAQ",errorText:"error TNT",finishedText:"finished ORZ",listItem:"List Item"},{add:A,use:$e,pack:f,packs:et,merge:tt}=pe(),Ee=e=>{he(e),$e(e)};Q("zh-CN",ce);Q("en-US",Te);A("zh-CN",ye);A("en-US",Be);const at={__name:"index",setup(e){const a=re({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0}),{list:T,list2:L,list3:U,loading:r,loading2:m,loading3:p,finished:x,finished2:g,finished3:$,error:I,current:h}=de(a);function K(){setTimeout(()=>{for(let d=0;d<20;d++)a.list.push(a.list.length+1);a.loading=!1,a.list.length>=60&&(a.finished=!0)},1e3)}function O(){setTimeout(()=>{if(a.list2.length===40){a.error=!0,a.loading2=!1;return}for(let d=0;d<20;d++)a.list2.push(a.list2.length+1);a.loading2=!1},1e3)}function j(){setTimeout(()=>{for(let d=0;d<20;d++)a.list3.push(a.list3.length+1);a.loading3=!1,a.list3.length>=60&&(a.finished3=!0)},1e3)}return fe(Ee),ue(Le),(d,s)=>(u(),b(y,null,[o(t(ke),{active:t(h),"onUpdate:active":s[0]||(s[0]=i=>k(h)?h.value=i:null),sticky:"","offset-top":"14.4vmin",style:{"margin-bottom":"10px"}},{default:n(()=>[o(t(z),null,{default:n(()=>[c(l(t(f).basicUsage),1)]),_:1}),o(t(z),null,{default:n(()=>[c(l(t(f).loadFail),1)]),_:1}),o(t(z),null,{default:n(()=>[c(l(t(f).tipText),1)]),_:1})]),_:1},8,["active"]),o(t(be),{active:t(h),"onUpdate:active":s[5]||(s[5]=i=>k(h)?h.value=i:null)},{default:n(()=>[o(t(P),null,{default:n(()=>[o(t(B),{finished:t(x),loading:t(r),"onUpdate:loading":s[1]||(s[1]=i=>k(r)?r.value=i:null),onLoad:K},{default:n(()=>[(u(!0),b(y,null,w(t(T),i=>(u(),F(t(R),{key:i},{default:n(()=>[c(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","loading"])]),_:1}),o(t(P),null,{default:n(()=>[o(t(B),{finished:t(g),error:t(I),"onUpdate:error":s[2]||(s[2]=i=>k(I)?I.value=i:null),loading:t(m),"onUpdate:loading":s[3]||(s[3]=i=>k(m)?m.value=i:null),onLoad:O},{default:n(()=>[(u(!0),b(y,null,w(t(L),i=>(u(),F(t(R),{key:i},{default:n(()=>[c(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","error","loading"])]),_:1}),o(t(P),null,{default:n(()=>[o(t(B),{"loading-text":t(f).loadingText,"finished-text":t(f).finishedText,"error-text":t(f).errorText,finished:t($),loading:t(p),"onUpdate:loading":s[4]||(s[4]=i=>k(p)?p.value=i:null),onLoad:j},{default:n(()=>[(u(!0),b(y,null,w(t(U),i=>(u(),F(t(R),{key:i},{default:n(()=>[c(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["loading-text","finished-text","error-text","finished","loading"])]),_:1})]),_:1},8,["active"])],64))}};export{at as default};
