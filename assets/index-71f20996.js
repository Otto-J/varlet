import{d as P,a as W,b as z,w as V,_ as j,p as h,D as J,E as X,f as b,h as x,M as m,N as p,O as d,P as q,Q as D,i as w,j as N,R as L,q as k,S as y,m as O,G as ee,T as ne,r as E,V as oe,W as te,Y as ae,Z as U,C as se,as as ie}from"./vue-router-b74667f8.js";import{p as v,L as re}from"./index-cb403536.js";import{I as le}from"./index-47a92459.js";import{u as ce}from"./zIndex-ab69f455.js";import{p as g,d as f,o as de,c as _,a as c,g as ue,m as pe,w as G}from"./logger-d58d98eb.js";import{c as fe}from"./index-aeadb780.js";import{u as me}from"./lock-88318373.js";function ye(e){return["top","center","bottom"].includes(e)}function ve(e){return T.includes(e)}const M={type:{type:String,validator:ve},position:{type:String,default:"top",validator:ye},content:{type:[String,Function,Object]},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:g(v,"type"),loadingSize:g(v,"size"),loadingRadius:g(v,"radius"),loadingColor:{...g(v,"color"),default:"currentColor"},lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:[String,Object,Boolean],default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:f(),onOpened:f(),onClose:f(),onClosed:f(),"onUpdate:show":f(),_update:{type:String}},{n:ge,classes:be}=_("snackbar"),ke={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},Se=P({name:"VarSnackbarCore",components:{VarLoading:re,VarIcon:le},props:M,setup(e){const o=W(null),{zIndex:n}=ce(()=>e.show,1);me(()=>e.show,()=>e.lockScroll);const s=z(()=>e.type==="loading"||e.forbidClick),t=z(()=>e.type?ke[e.type]:""),r=()=>{o.value=setTimeout(()=>{e.type!=="loading"&&c(e["onUpdate:show"],!1)},e.duration)};return V(()=>e.show,l=>{l?(c(e.onOpen),r()):l===!1&&(clearTimeout(o.value),c(e.onClose))}),V(()=>e._update,()=>{clearTimeout(o.value),r()}),de(()=>{e.show&&(c(e.onOpen),r())}),{SNACKBAR_TYPE:T,n:ge,classes:be,zIndex:n,iconName:t,isForbidClick:s}}});function Ce(e,o,n,s,t,r){const l=h("var-icon"),S=h("var-loading");return J((b(),x("div",{class:p(e.n()),style:L({pointerEvents:e.isForbidClick?"auto":"none",zIndex:e.zIndex})},[m("div",{class:p(e.classes(e.n("wrapper"),e.n(`wrapper-${e.position}`),e.n("$-elevation--4"),[e.vertical,e.n("vertical")],[e.type&&e.SNACKBAR_TYPE.includes(e.type),e.n(`wrapper-${e.type}`)])),style:L({zIndex:e.zIndex})},[m("div",{class:p([e.n("content"),e.contentClass])},[d(e.$slots,"default",{},()=>[q(D(e.content),1)])],2),m("div",{class:p([e.n("icon")])},[e.iconName?(b(),w(l,{key:0,name:e.iconName},null,8,["name"])):N("",!0),e.type==="loading"?(b(),w(S,{key:1,type:e.loadingType,size:e.loadingSize,color:e.loadingColor,radius:e.loadingRadius},null,8,["type","size","color","radius"])):N("",!0),d(e.$slots,"icon")],2),m("div",{class:p(e.n("action"))},[d(e.$slots,"action")],2)],6)],6)),[[X,e.show]])}const R=j(Se,[["render",Ce]]),{n:he}=_("snackbar"),we=P({name:"VarSnackbar",components:{VarSnackbarCore:R},props:M,setup(){const{disabled:e}=ue();return{n:he,disabled:e}}});function Oe(e,o,n,s,t,r){const l=h("var-snackbar-core");return b(),w(ne,{to:e.teleport===!1?void 0:e.teleport,disabled:e.disabled||e.teleport===!1},[k(ee,{name:`${e.n()}-fade`,onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:y(()=>[k(l,O(e.$props,{class:e.n("transition")}),{icon:y(()=>[d(e.$slots,"icon")]),action:y(()=>[d(e.$slots,"action")]),default:y(()=>[d(e.$slots,"default",{},()=>[q(D(e.content),1)])]),_:3},16,["class"])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to","disabled"])}const A=j(we,[["render",Oe]]);function $e(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!se(e)}const T=["loading","success","warning","info","error"];let B=0,$=!1,F,u=!1;const Y={type:void 0,content:"",icon:"",action:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}};let a=E([]),I=Y;const Ee={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},C=e=>()=>ie(e)?e():e,Ae={setup(){return()=>{const e=a.map(({id:o,reactiveSnackOptions:n,_update:s})=>{const t=document.querySelector(".var-transition-group");n.forbidClick||n.type==="loading"?t.classList.add("var-pointer-auto"):t.classList.remove("var-pointer-auto"),u&&(n.position="top");const l={position:u?"relative":"absolute",...Le(n.position)},{content:S,icon:K,action:Z}=n,H={default:C(S),icon:C(K),action:C(Z)};return k(R,O(n,{key:o,style:l,"data-id":o,_update:s,show:n.show,"onUpdate:show":Q=>n.show=Q}),H)});return k(ae,O(Ee,{style:{zIndex:fe.zIndex},onAfterEnter:Te,onAfterLeave:Ie}),$e(e)?e:{default:()=>[e]})}}},i=function(e){const o=Ve(e),n=E({...I,...o});n.show=!0,$||($=!0,F=pe(Ae).unmountInstance);const{length:s}=a,t={id:B++,reactiveSnackOptions:n};if(s===0||u)ze(t);else{const r=`update-${B}`;Ne(n,r)}return{clear(){!u&&a.length?a[0].reactiveSnackOptions.show=!1:n.show=!1}}};T.forEach(e=>{i[e]=o=>(oe(o)?o.type=e:o={content:o,type:e},i(o))});i.allowMultiple=function(e=!1){e!==u&&(a.forEach(o=>{o.reactiveSnackOptions.show=!1}),u=e)};i.clear=function(){a.forEach(e=>{e.reactiveSnackOptions.show=!1})};i.setDefaultOptions=function(e){I=e};i.resetDefaultOptions=function(){I=Y};function Te(e){const o=e.getAttribute("data-id"),n=a.find(s=>s.id===U(o));n&&c(n.reactiveSnackOptions.onOpened)}function Ie(e){e.parentElement&&e.parentElement.classList.remove("var-pointer-auto");const o=e.getAttribute("data-id"),n=a.find(t=>t.id===U(o));n&&(n.animationEnd=!0,c(n.reactiveSnackOptions.onClosed)),a.every(t=>t.animationEnd)&&(c(F),a=E([]),$=!1)}function ze(e){a.push(e)}function Ve(e={}){return te(e)?{content:e}:e}function Ne(e,o){const[n]=a;n.reactiveSnackOptions={...n.reactiveSnackOptions,...e},n._update=o}function Le(e="top"){return e==="bottom"?{[e]:"5%"}:{top:e==="top"?"5%":"45%"}}i.Component=A;G(A);G(A,i);const Ge=i;export{Ge as S};
