import{I as H}from"./index-78ce8ed1.js";import{F as X,u as j}from"./provide-7efaa68a.js";import{v as W}from"./index-a161dbae.js";import{d as b,u as Y,i as q,a as c,c as L}from"./components-4cb81426.js";import{u as J}from"./useChildren-a89a72f6.js";import{d as Q,a as D,b as N,w as Z,n as _,_ as x,p as E,ag as ee,f as O,h as w,M as z,D as ae,N as d,R as ne,O as f,q as C}from"./vue-router.esm-bundler-54754668.js";const A=Symbol("CHECKBOX_GROUP_BIND_CHECKBOX_KEY");function ve(){const{bindChildren:e,childProviders:o,length:r}=J(A);return{length:r,checkboxes:o,bindCheckboxes:e}}const oe={modelValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedValue:{type:[String,Number,Boolean,Object,Array],default:!0},uncheckedValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedColor:{type:String},uncheckedColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onClick:b(),onChange:b(),"onUpdate:modelValue":b()};function se(){const{bindParent:e,parentProvider:o,index:r}=Y(A);return{index:r,checkboxGroup:o,bindCheckboxGroup:e}}const{n:le,classes:re}=L("checkbox"),ie=Q({name:"VarCheckbox",directives:{Ripple:W},components:{VarIcon:H,VarFormDetails:X},props:oe,setup(e){const o=D(!1),r=N(()=>o.value===e.checkedValue),g=N(()=>e.checkedValue),t=D(!1),{checkboxGroup:s,bindCheckboxGroup:u}=se(),{form:a,bindForm:m}=j(),{errorMessage:k,validateWithTrigger:M,validate:R,resetValidation:v}=q(),P=n=>{_(()=>{const{validateTrigger:l,rules:i,modelValue:h}=e;M(l,n,i,h)})},y=n=>{o.value=n;const{checkedValue:l,onChange:i}=e;c(e["onUpdate:modelValue"],o.value),c(i,o.value),P("onChange"),n===l?s==null||s.onChecked(l):s==null||s.onUnchecked(l)},$=n=>{const{disabled:l,readonly:i,checkedValue:h,uncheckedValue:I,onClick:T}=e;if(a!=null&&a.disabled.value||l||(c(T,n),a!=null&&a.readonly.value||i))return;t.value=!0;const G=s?s.checkedCount.value>=Number(s.max.value):!1;!r.value&&G||y(r.value?I:h)},K=n=>{const{checkedValue:l,uncheckedValue:i}=e;o.value=n.includes(l)?l:i},U=()=>{t.value=!1},V=()=>{c(e["onUpdate:modelValue"],e.uncheckedValue),v()},F=n=>{const{checkedValue:l,uncheckedValue:i}=e;![l,i].includes(n)&&(n=r.value?i:l),y(n)},B=()=>R(e.rules,e.modelValue);Z(()=>e.modelValue,n=>{o.value=n},{immediate:!0});const S={checkedValue:g,checked:r,sync:K,validate:B,resetValidation:v,reset:V,resetWithAnimation:U};return c(u,S),c(m,S),{withAnimation:t,checked:r,errorMessage:k,checkboxGroupErrorMessage:s==null?void 0:s.errorMessage,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,n:le,classes:re,handleClick:$,toggle:F,reset:V,validate:B,resetValidation:v}}});function ce(e,o,r,g,t,s){const u=E("var-icon"),a=E("var-form-details"),m=ee("ripple");return O(),w("div",{class:d(e.n("wrap")),onClick:o[0]||(o[0]=(...k)=>e.handleClick&&e.handleClick(...k))},[z("div",{class:d(e.n())},[ae((O(),w("div",{class:d(e.classes(e.n("action"),[e.checked,e.n("--checked"),e.n("--unchecked")],[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:ne({color:e.checked?e.checkedColor:e.uncheckedColor})},[e.checked?f(e.$slots,"checked-icon",{key:0},()=>[C(u,{class:d(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-marked",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]):f(e.$slots,"unchecked-icon",{key:1},()=>[C(u,{class:d(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-blank-outline",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])])],6)),[[m,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]),z("div",{class:d(e.classes(e.n("text"),[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")]))},[f(e.$slots,"default")],2)],2),C(a,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const p=x(ie,[["render",ce]]);p.install=function(e){e.component(p.name,p)};export{p as C,ve as u};
