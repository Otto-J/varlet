import{p as I,S as x}from"./index-86852745.js";import{d as K,a as r,b as s,w as S,E as ee,X as te,_ as Z,f as O,i as ae,S as oe,M as V,N as Y,O as j,R as q,m as ie,aH as ne,ag as se,D as le,h as re}from"./vue-router.esm-bundler-1e250ce9.js";import{p as H,d as B,i as ce,c as F,a as k,u as de}from"./components-60b4bddd.js";import{l as M}from"./shared-ed6496a2.js";import{a as ue,d as fe,b as R}from"./elements-082a3d5a.js";import{v as ve}from"./index-461ce4de.js";import{u as me}from"./useChildren-36e9566e.js";function X(e){return["horizontal","vertical"].includes(e)}function be(e){return["auto","always"].includes(e)}function ye(e){return["normal","reverse"].includes(e)}const pe={active:{type:[String,Number],default:0},layoutDirection:{type:String,default:"horizontal",validator:X},itemDirection:{type:String,default:"horizontal",validator:X},fixedBottom:{type:Boolean,default:!1},activeColor:{type:String},inactiveColor:{type:String},disabledColor:{type:String},color:{type:String},indicatorColor:{type:String},indicatorSize:{type:[String,Number]},elevation:{type:Boolean,default:!1},scrollable:{type:String,default:"auto",validator:be},indicatorPosition:{type:String,default:"normal",validator:ye},safeArea:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},stickyCssMode:H(I,"cssMode"),stickyZIndex:H(I,"zIndex"),offsetTop:H(I,"offsetTop"),onClick:B(),onChange:B(),"onUpdate:active":B()},G=Symbol("TABS_BIND_TAB_KEY");function Ce(){const{childProviders:e,bindChildren:o,length:n}=me(G);return{length:n,tabList:e,bindTabList:o}}const{n:he,classes:$e}=F("tabs"),ke=K({name:"VarTabs",components:{VarSticky:x},inheritAttrs:!1,props:pe,setup(e){const o=r("0px"),n=r("0px"),u=r("0px"),f=r("0px"),i=r(!1),v=r(null),C=s(()=>e.active),P=s(()=>e.indicatorPosition==="reverse"?"-reverse":""),c=s(()=>e.activeColor),g=s(()=>e.inactiveColor),T=s(()=>e.disabledColor),w=s(()=>e.itemDirection),h=r(null),{tabList:m,bindTabList:z,length:b}=Ce(),E=a=>{const t=a.name.value??a.index.value,{active:p,onChange:$,onClick:_}=e;k(e["onUpdate:active"],t),k(_,t),t!==p&&k($,t)},N=()=>m.find(({name:a})=>e.active===a.value),l=a=>m.find(({index:t})=>(a??e.active)===t.value),d=()=>{if(b.value===0)return;const{active:a}=e;if(te(a)){const t=a>b.value-1?b.value-1:0;return k(e["onUpdate:active"],t),l(t)}},L=()=>{i.value=e.scrollable==="always"||m.length>=5},A=({element:a})=>{const t=a.value;t&&(e.layoutDirection==="horizontal"?(o.value=`${t.offsetWidth}px`,u.value=`${t.offsetLeft}px`):(n.value=`${t.offsetHeight}px`,f.value=`${t.offsetTop}px`))},J=({element:a})=>{if(!i.value)return;const t=v.value,p=a.value;if(e.layoutDirection==="horizontal"){const $=p.offsetLeft+p.offsetWidth/2-t.offsetWidth/2;R(t,{left:$,animation:M})}else{const $=p.offsetTop+p.offsetHeight/2-t.offsetHeight/2;R(t,{top:$,animation:M})}},y=()=>{const a=N()||l()||d();!a||a.disabled.value||(L(),A(a),J(a))},Q=async()=>{e.sticky&&h.value&&await h.value.resize()};return z({active:C,activeColor:c,inactiveColor:g,disabledColor:T,itemDirection:w,resize:y,onTabClick:E}),S(()=>b.value,async()=>{await fe(),y()}),S(()=>e.active,y),S(()=>e.scrollable,y),ce(window,"resize",y),{stickyComponent:h,indicatorWidth:o,indicatorHeight:n,indicatorX:u,indicatorY:f,indicatorPosition:P,localScrollable:i,scrollerEl:v,Transition:ee,toSizeUnit:ue,n:he,classes:$e,resize:y,resizeSticky:Q}}});function Se(e,o,n,u,f,i){return O(),ae(ne(e.sticky?e.n("$-sticky"):e.Transition),{ref:e.sticky?"stickyComponent":void 0,"css-mode":e.sticky?e.stickyCssMode:void 0,"offset-top":e.sticky?e.offsetTop:void 0,"z-index":e.sticky?e.stickyZIndex:void 0},{default:oe(()=>[V("div",ie({class:e.classes(e.n(),e.n("$--box"),e.n(`--item-${e.itemDirection}`),e.n(`--layout-${e.layoutDirection}-padding`),[e.elevation,e.n("$-elevation--4")],[e.fixedBottom,e.n("--fixed-bottom")],[e.safeArea,e.n("--safe-area")]),style:{background:e.color}},e.$attrs),[V("div",{ref:"scrollerEl",class:Y(e.classes(e.n("tab-wrap"),[e.localScrollable,e.n(`--layout-${e.layoutDirection}-scrollable`)],e.n(`--layout-${e.layoutDirection}`)))},[j(e.$slots,"default"),V("div",{class:Y(e.classes(e.n("indicator"),e.n(`--layout-${e.layoutDirection}${e.indicatorPosition}-indicator`))),style:q({width:e.layoutDirection==="horizontal"?e.indicatorWidth:e.toSizeUnit(e.indicatorSize),height:e.layoutDirection==="horizontal"?e.toSizeUnit(e.indicatorSize):e.indicatorHeight,transform:e.layoutDirection==="horizontal"?`translateX(${e.indicatorX})`:`translateY(${e.indicatorY})`,background:e.indicatorColor||e.activeColor})},null,6)],2)],16)]),_:3},8,["css-mode","offset-top","z-index"])}const U=Z(ke,[["render",Se]]);U.install=function(e){e.component(U.name,U)};const ge={name:{type:[String,Number]},disabled:{type:Boolean,default:!1},onClick:B()};function Te(){const{parentProvider:e,bindParent:o,index:n}=de(G);if(!o)throw Error("<var-tab/> must in <var-tabs/>");return{index:n,tabs:e,bindTabs:o}}const{n:D,classes:ze}=F("tab"),De=K({name:"VarTab",directives:{Ripple:ve},props:ge,setup(e){const o=r(null),n=s(()=>e.name),u=s(()=>e.disabled),f=s(()=>o.value),{index:i,tabs:v,bindTabs:C}=Te(),{onTabClick:P,active:c,activeColor:g,inactiveColor:T,disabledColor:w,itemDirection:h,resize:m}=v,z={name:n,index:i,disabled:u,element:f};C(z);const b=()=>{const{disabled:l,name:d}=e;return l?w.value:c.value===d||c.value===(i==null?void 0:i.value)?g.value:T.value},E=()=>{const{disabled:l,name:d}=e;return l?D("$-tab--disabled"):c.value===d||c.value===(i==null?void 0:i.value)?D("$-tab--active"):D("$-tab--inactive")},N=l=>{const{disabled:d,name:L,onClick:A}=e;d||(k(A,L??i.value,l),P(z))};return S(()=>e.name,m),S(()=>e.disabled,m),{n:D,classes:ze,tabEl:o,active:c,activeColor:g,inactiveColor:T,itemDirection:h,computeColorStyle:b,computeColorClass:E,handleClick:N}}});function Be(e,o,n,u,f,i){const v=se("ripple");return le((O(),re("div",{class:Y(e.classes(e.n(),e.n("$--box"),e.computeColorClass(),e.n(`--${e.itemDirection}`))),ref:"tabEl",style:q({color:e.computeColorStyle()}),onClick:o[0]||(o[0]=(...C)=>e.handleClick&&e.handleClick(...C))},[j(e.$slots,"default")],6)),[[v,{disabled:e.disabled}]])}const W=Z(De,[["render",Be]]);W.install=function(e){e.component(W.name,W)};export{U as T,W as a};
