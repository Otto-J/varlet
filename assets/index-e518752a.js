import{L as q}from"./index-09d890c0.js";import{v as H}from"./index-30b6a81d.js";import{g as W,t as Y}from"./elements-f44c7012.js";import{d as $,a as C,c as Z,w as G}from"./components-b04567c7.js";import{a3 as J,d as X,r as D,F as M,ar as ee,aH as te,ae,n as ie,ah as V,_ as ne,b as oe,K as se,e as u,l as L,s as I,m as S,t as k,Q as l,p as s,q as E,O as le,P as h,W as re,aS as de,E as fe,aj as ue,w as n,U as t,aT as b,M as y,N as w,f as F}from"./index-77bdb56c.js";import{p as me,u as pe,b as Q,_ as ge,c as ce,a as Te}from"./index-0ef0a391.js";import{T as he,a as P}from"./index-2057ce9a.js";import{C as R}from"./index-5ef5407c.js";import{a as z,T as ve}from"./index-b2ffbe59.js";import{T as ke}from"./index-019066bf.js";import{d as be}from"./index-ea9abee8.js";import"./index-33346b78.js";/* empty css               */import"./logger-525ef361.js";import"./index-b742fa6c.js";import"./provide-ce1279ca.js";import"./provide-52e3c87d.js";import"./index-8bda61f7.js";import"./index-3d006244.js";import"./shared-b9aee077.js";import"./index-f6b10f4d.js";import"./index-a3b03678.js";import"./index-c04efae2.js";import"./index-bbbbb27d.js";import"./provide-07a01a8d.js";const Le={loading:Boolean,immediateCheck:{type:Boolean,default:!0},finished:Boolean,error:Boolean,offset:{type:[String,Number],default:0},loadingText:String,finishedText:String,errorText:String,onLoad:$(),"onUpdate:loading":$(),"onUpdate:error":$()};function xe(){const{parentProvider:e,bindParent:a,index:c}=J(he);return{index:c,tabItem:e,bindTabItem:a}}const{name:Ue,n:Ne,classes:Ce}=Z("list"),Ie=X({name:Ue,directives:{Ripple:H},components:{VarLoading:q},props:Le,setup(e){const a=D(null),c=D(null),{tabItem:m,bindTabItem:N}=xe();let r;C(N,{}),m&&M(()=>m.current.value,g),M(()=>[e.loading,e.error,e.finished],g),ee(()=>{r=W(a.value),r.addEventListener("scroll",g),e.immediateCheck&&g()}),te(x);function p(){C(e["onUpdate:error"],!1),C(e["onUpdate:loading"],!0),C(e.onLoad)}function T(){const{bottom:_}=V(r),{bottom:U}=V(c.value);return Math.floor(U)-Y(e.offset)<=_}function x(){r.removeEventListener("scroll",g)}async function g(){await ie(),!(e.loading||e.finished||e.error||(m==null?void 0:m.current.value)===!1||!T())&&p()}return{pack:me,listEl:a,detectorEl:c,isNumber:ae,load:p,check:g,n:Ne,classes:Ce}}});function Se(e,a,c,m,N,r){const p=oe("var-loading"),T=se("ripple");return u(),L("div",{class:k(e.classes(e.n(),e.n("$--box"))),ref:"listEl"},[I(e.$slots,"default"),e.loading?I(e.$slots,"loading",{key:0},()=>[S("div",{class:k(e.n("loading"))},[S("div",{class:k(e.n("loading-text"))},l(e.loadingText??e.pack.listLoadingText),3),s(p,{size:"mini",radius:10})],2)]):E("",!0),e.finished?I(e.$slots,"finished",{key:1},()=>[S("div",{class:k(e.n("finished"))},l(e.finishedText??e.pack.listFinishedText),3)]):E("",!0),e.error?I(e.$slots,"error",{key:2},()=>[le((u(),L("div",{class:k(e.n("error")),onClick:a[0]||(a[0]=(...x)=>e.load&&e.load(...x))},[h(l(e.errorText??e.pack.listErrorText),1)],2)),[[T]])]):E("",!0),S("div",{class:k(e.n("detector")),ref:"detectorEl"},null,2)],2)}const B=ne(Ie,[["render",Se]]);G(B);const ye={basicUsage:"基本使用",loadFail:"加载失败",tipText:"提示文字",loadingText:"正在努力输出",errorText:"出错了出错了",finishedText:"一滴都没有了",listItem:"列表项"},Be={basicUsage:"Basic Usage",loadFail:"Load Fail",tipText:"Tip Text",loadingText:"loading QAQ",errorText:"error TNT",finishedText:"finished ORZ",listItem:"List Item"},{add:A,use:_e,pack:f,packs:it,merge:nt}=pe(),$e=e=>{Te(e),_e(e)};Q("zh-CN",ge);Q("en-US",ce);A("zh-CN",ye);A("en-US",Be);const ot={__name:"index",setup(e){const a=re({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0}),{list:c,list2:m,list3:N,loading:r,loading2:p,loading3:T,finished:x,finished2:g,finished3:_,error:U,current:v}=de(a);function K(){setTimeout(()=>{for(let d=0;d<20;d++)a.list.push(a.list.length+1);a.loading=!1,a.list.length>=60&&(a.finished=!0)},1e3)}function O(){setTimeout(()=>{if(a.list2.length===40){a.error=!0,a.loading2=!1;return}for(let d=0;d<20;d++)a.list2.push(a.list2.length+1);a.loading2=!1},1e3)}function j(){setTimeout(()=>{for(let d=0;d<20;d++)a.list3.push(a.list3.length+1);a.loading3=!1,a.list3.length>=60&&(a.finished3=!0)},1e3)}return fe($e),ue(be),(d,o)=>(u(),L(y,null,[s(t(ve),{active:t(v),"onUpdate:active":o[0]||(o[0]=i=>b(v)?v.value=i:null),sticky:"","offset-top":"14.4vmin",style:{"margin-bottom":"10px"}},{default:n(()=>[s(t(z),null,{default:n(()=>[h(l(t(f).basicUsage),1)]),_:1}),s(t(z),null,{default:n(()=>[h(l(t(f).loadFail),1)]),_:1}),s(t(z),null,{default:n(()=>[h(l(t(f).tipText),1)]),_:1})]),_:1},8,["active"]),s(t(ke),{active:t(v),"onUpdate:active":o[5]||(o[5]=i=>b(v)?v.value=i:null)},{default:n(()=>[s(t(P),null,{default:n(()=>[s(t(B),{finished:t(x),loading:t(r),"onUpdate:loading":o[1]||(o[1]=i=>b(r)?r.value=i:null),onLoad:K},{default:n(()=>[(u(!0),L(y,null,w(t(c),i=>(u(),F(t(R),{key:i},{default:n(()=>[h(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","loading"])]),_:1}),s(t(P),null,{default:n(()=>[s(t(B),{finished:t(g),error:t(U),"onUpdate:error":o[2]||(o[2]=i=>b(U)?U.value=i:null),loading:t(p),"onUpdate:loading":o[3]||(o[3]=i=>b(p)?p.value=i:null),onLoad:O},{default:n(()=>[(u(!0),L(y,null,w(t(m),i=>(u(),F(t(R),{key:i},{default:n(()=>[h(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","error","loading"])]),_:1}),s(t(P),null,{default:n(()=>[s(t(B),{"loading-text":t(f).loadingText,"finished-text":t(f).finishedText,"error-text":t(f).errorText,finished:t(_),loading:t(T),"onUpdate:loading":o[4]||(o[4]=i=>b(T)?T.value=i:null),onLoad:j},{default:n(()=>[(u(!0),L(y,null,w(t(N),i=>(u(),F(t(R),{key:i},{default:n(()=>[h(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["loading-text","finished-text","error-text","finished","loading"])]),_:1})]),_:1},8,["active"])],64))}};export{ot as default};
