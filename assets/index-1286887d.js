import{g as F,o as G,c as J,w as K}from"./logger-d58d98eb.js";import{b as W,t as y}from"./elements-9282cd1e.js";import{d as Q,a as c,r as U,w as Z,aH as x,_,f as tt,i as et,M as ot,O as nt,m as at,T as st}from"./vue-router-b74667f8.js";import{o as lt}from"./onWindowResize-2e1748c9.js";const rt={direction:{type:String,default:"xy"},attraction:{type:String},disabled:{type:Boolean,default:!1},boundary:{type:Object,default:()=>({top:0,bottom:0,left:0,right:0})},zIndex:{type:[Number,String],default:90},teleport:{type:[String,Object,Boolean],default:"body"}},{n:it,classes:ut}=J("drag"),dt=Q({name:"VarDrag",inheritAttrs:!1,props:rt,setup(t,{attrs:r}){const w=c(null),i=c(0),u=c(0),s=U({top:0,bottom:0,left:0,right:0}),n=c(!1),h=c(!1),f=c(!1),{disabled:N}=F();let m=!1,g=0,v=0,T=null;const O=e=>{if(t.disabled)return;T&&window.clearTimeout(T);const{clientX:o,clientY:a}=e.touches[0];R(),g=o,v=a,m=!0,f.value=!1},A=async e=>{if(!m||t.disabled)return;e.preventDefault(),h.value=!1,n.value=!0,f.value=!0;const{clientX:o,clientY:a}=e.touches[0],l=o-g,d=a-v;g=o,v=a,t.direction.includes("x")&&(i.value+=l),t.direction.includes("y")&&(u.value+=d),z()},I=()=>{t.disabled||(m=!1,h.value=!0,P(),T=window.setTimeout(()=>{f.value=!1}))},R=()=>{const{left:e,top:o}=D();i.value=e,u.value=o},D=()=>{const e=W(w.value),o=W(window),a=e.top-o.top,l=o.bottom-e.bottom,d=e.left-o.left,Y=o.right-e.right,{width:p,height:b}=e,{width:$,height:B}=o;return{top:a,bottom:l,left:d,right:Y,width:p,height:b,halfWidth:p/2,halfHeight:b/2,windowWidth:$,windowHeight:B}},S=()=>{const e=D(),o=s.left,a=e.windowWidth-s.right-e.width,l=s.top,d=e.windowHeight-s.bottom-e.height;return{minX:o,minY:l,maxX:o<a?a:o,maxY:l<d?d:l}},P=()=>{if(t.attraction==null)return;const{halfWidth:e,halfHeight:o,top:a,bottom:l,left:d,right:Y}=D(),{minX:p,minY:b,maxX:$,maxY:B}=S(),M=d+e-s.left,V=Y+e-s.right,C=a+o-s.top,L=l+o-s.bottom,q=M<=V,E=C<=L;t.attraction.includes("x")&&(i.value=q?p:$),t.attraction.includes("y")&&(u.value=E?b:B)},z=()=>{const{minX:e,minY:o,maxX:a,maxY:l}=S();i.value=x(i.value,e,a),u.value=x(u.value,o,l)},H=()=>{const{top:e=0,bottom:o=0,left:a=0,right:l=0}=t.boundary;s.top=y(e),s.bottom=y(o),s.left=y(a),s.right=y(l)},j=()=>{const e=r.style??{};return{...r,style:{...e,top:n.value?0:e.top,left:n.value?0:e.left,right:n.value?"auto":e.right,bottom:n.value?"auto":e.bottom,transform:n.value?`translate(${i.value}px, ${u.value}px)`:e.transform}}},X=()=>{n.value&&(R(),z())},k=()=>{h.value=!1,n.value=!1,f.value=!1,i.value=0,u.value=0,m=!1,g=0,v=0};return Z(()=>t.boundary,H),lt(X),G(()=>{H(),X()}),{drag:w,x:i,y:u,enableTransition:h,dragging:f,teleportDisabled:N,n:it,classes:ut,getAttrs:j,handleTouchstart:O,handleTouchmove:A,handleTouchend:I,resize:X,reset:k}}});function ct(t,r,w,i,u,s){return tt(),et(st,{to:t.teleport===!1?void 0:t.teleport,disabled:t.teleportDisabled||t.teleport===!1},[ot("div",at({ref:"drag",class:t.classes(t.n(),t.n("$--box"),[t.enableTransition,t.n("--transition")]),style:{"z-index":t.zIndex},onTouchstart:r[0]||(r[0]=(...n)=>t.handleTouchstart&&t.handleTouchstart(...n)),onTouchmove:r[1]||(r[1]=(...n)=>t.handleTouchmove&&t.handleTouchmove(...n)),onTouchend:r[2]||(r[2]=(...n)=>t.handleTouchend&&t.handleTouchend(...n)),onTouchcancel:r[3]||(r[3]=(...n)=>t.handleTouchend&&t.handleTouchend(...n))},t.getAttrs()),[nt(t.$slots,"default")],16)],8,["to","disabled"])}const ft=_(dt,[["render",ct]]);K(ft);export{ft as D};
