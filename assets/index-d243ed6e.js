import{I as q}from"./index-e1086453.js";import{F as A,u as E}from"./provide-9af89c40.js";import{v as X}from"./index-fc3e2a6c.js";import{H as Z,u as j}from"./index-0737eb47.js";import{v as G}from"./index-97c70489.js";import{d as B,k as J,a as y,c as K,w as Q}from"./logger-5f6a195b.js";import{a as D}from"./elements-53ac7962.js";import{d as Y,a as x,Z as c,n as ee,_ as ae,p as C,ag as z,f as S,h as V,M as te,F as oe,ai as re,D as ne,R as F,N as f,q as H}from"./vue-router-14238f57.js";const le={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number]},gap:{type:[String,Number]},namespace:{type:String},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},clearable:{type:Boolean,default:!1},rules:{type:Array},onChange:B(),"onUpdate:modelValue":B()},{n:u}=K("rate"),se=Y({name:"VarRate",components:{VarIcon:q,VarFormDetails:A,VarHoverOverlay:Z},directives:{Ripple:X,Hover:G},props:le,setup(e){const{form:a,bindForm:N}=E(),{errorMessage:g,validateWithTrigger:k,validate:R,resetValidation:s}=J(),{hovering:m}=j(),v=x(-1);let p=Number(e.modelValue);const h=t=>{const{count:o,gap:r}=e;return{color:i(t).color,marginRight:t!==c(o)?D(r):0}},n=t=>{const{name:o,color:r}=i(t);return{[u("content")]:!0,[u("--disabled")]:(a==null?void 0:a.disabled.value)||e.disabled,[u("--error")]:g.value,[u("--primary")]:o!==e.emptyIcon&&!r}},i=t=>{const{modelValue:o,disabled:r,disabledColor:l,color:d,half:O,emptyColor:P,icon:T,halfIcon:W,emptyIcon:L}=e;let b=d;return(r||a!=null&&a.disabled.value)&&(b=l),t<=c(o)?{color:b,name:T}:O&&t<=c(o)+.5?{color:b,name:W}:{color:r||a!=null&&a.disabled.value?l:P,name:L}},U=(t,o)=>{const{half:r,clearable:l}=e;if(r){const{offsetWidth:d}=o.target;o.offsetX<=Math.floor(d/2)&&(t-=.5)}p===t&&l&&(t=0),p=t,y(e["onUpdate:modelValue"],t)},_=()=>R(e.rules,c(e.modelValue)),w=()=>ee(()=>k(["onChange"],"onChange",e.rules,e.modelValue)),M=(t,o)=>{const{readonly:r,disabled:l,onChange:d}=e;r||l||a!=null&&a.disabled.value||a!=null&&a.readonly.value||(U(t,o),y(d,t),w())},$=t=>o=>{v.value=t,m.value=o},I=()=>{y(e["onUpdate:modelValue"],0),s()};return y(N,{reset:I,validate:_,resetValidation:s}),{errorMessage:g,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,getStyle:h,getClass:n,getCurrentState:i,handleClick:M,hovering:m,currentHoveringValue:v,createHoverHandler:$,reset:I,validate:_,resetValidation:s,toSizeUnit:D,toNumber:c,n:u}}});const ie=["onClick"];function de(e,a,N,g,k,R){const s=C("var-icon"),m=C("var-hover-overlay"),v=C("var-form-details"),p=z("ripple"),h=z("hover");return S(),V("div",{class:f(e.n("wrap"))},[te("div",{class:f(e.n())},[(S(!0),V(oe,null,re(e.toNumber(e.count),n=>ne((S(),V("div",{key:n,style:F(e.getStyle(n)),class:f(e.getClass(n)),onClick:i=>e.handleClick(n,i)},[H(s,{class:f(e.n("content-icon")),"var-rate-cover":"",transition:0,namespace:e.namespace,name:e.getCurrentState(n).name,style:F({fontSize:e.toSizeUnit(e.size)})},null,8,["class","namespace","name","style"]),H(m,{hovering:e.hovering&&n===e.currentHoveringValue&&!e.disabled&&!e.formDisabled},null,8,["hovering"])],14,ie)),[[p,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}],[h,e.createHoverHandler(n),"desktop"]])),128))],2),H(v,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const ce=ae(se,[["render",de]]);Q(ce);export{ce as R};
