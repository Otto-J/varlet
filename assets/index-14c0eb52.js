import{L as A}from"./index-c61c53e3.js";import{v as X}from"./index-e101a745.js";import{g as Z,e as _,t as G}from"./elements-5ecd008f.js";import{d as E,e as H,c as J,a as I}from"./components-7bcea1d6.js";import{d as K,a as P,x as W,u as Y,X as ee,n as te,_ as ae,p as ie,ag as oe,f as u,h as L,O as C,M as N,N as T,Q as l,q as n,j as F,D as se,P as c,r as ne,aP as le,ab as re,aE as de,S as o,ao as t,av as k,F as $,ai as R,i as w}from"./vue-router-609def63.js";import{d as fe}from"./shared-71dfa5a1.js";import{p as ue,u as me,a as M,_ as pe,b as ge,c as ce}from"./index-4fabe892.js";import{C as z}from"./index-f8fdb594.js";import{a as D,T as ve}from"./index-fd8df2ff.js";import{T as he}from"./index-1f87d13b.js";import{T as V}from"./index-003fb8e5.js";import{d as Te}from"./index-dd768cde.js";import"./index-405029f5.js";/* empty css               */import"./logger-525ef361.js";import"./index-2c7b28ef.js";import"./index-2b057d6c.js";import"./useChildren-afa766b4.js";import"./index-f7878914.js";import"./provide-f4a0e038.js";import"./provide-a67f321c.js";import"./index-0a6404a7.js";const ke={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:E(),"onUpdate:loading":E(),"onUpdate:error":E()},{n:Le,classes:ye}=J("list"),Ue=K({name:"VarList",directives:{Ripple:X},components:{VarLoading:A},props:ke,setup(e){const a=P(null),U=P(null);let p;const x=()=>{I(e["onUpdate:error"],!1),I(e["onUpdate:loading"],!0),I(e.onLoad)},v=()=>{const{bottom:g}=_(p),{bottom:b}=_(U.value);return Math.floor(b)-G(e.offset)<=g},m=()=>{p.removeEventListener("scroll",r)},r=async()=>{await te();const{loading:g,finished:b,error:B}=e;!g&&!b&&!B&&v()&&x()};return H(()=>{p=Z(a.value),p.addEventListener("scroll",r),e.immediateCheck&&r()}),W(m),Y(m),{pack:ue,listEl:a,detectorEl:U,dt:fe,isNumber:ee,load:x,check:r,n:Le,classes:ye}}});function xe(e,a,U,p,x,v){const m=ie("var-loading"),r=oe("ripple");return u(),L("div",{class:T(e.classes(e.n(),e.n("$--box"))),ref:"listEl"},[C(e.$slots,"default"),e.loading?C(e.$slots,"loading",{key:0},()=>[N("div",{class:T(e.n("loading"))},[N("div",{class:T(e.n("loading-text"))},l(e.dt(e.loadingText,e.pack.listLoadingText)),3),n(m,{size:"mini",radius:10})],2)]):F("",!0),e.finished?C(e.$slots,"finished",{key:1},()=>[N("div",{class:T(e.n("finished"))},l(e.dt(e.finishedText,e.pack.listFinishedText)),3)]):F("",!0),e.error?C(e.$slots,"error",{key:2},()=>[se((u(),L("div",{class:T(e.n("error")),onClick:a[0]||(a[0]=(...g)=>e.load&&e.load(...g))},[c(l(e.dt(e.errorText,e.pack.listErrorText)),1)],2)),[[r]])]):F("",!0),N("div",{class:T(e.n("detector")),ref:"detectorEl"},null,2)],2)}const y=ae(Ue,[["render",xe]]);y.install=function(e){e.component(y.name,y)};const be={basicUsage:"基本使用",loadFail:"加载失败",tipText:"提示文字",loadingText:"正在努力输出",errorText:"出错了出错了",finishedText:"一滴都没有了",listItem:"列表项"},Ce={basicUsage:"Basic Usage",loadFail:"Load Fail",tipText:"Tip Text",loadingText:"loading QAQ",errorText:"error TNT",finishedText:"finished ORZ",listItem:"List Item"},{add:Q,use:Ne,pack:f,packs:Je,merge:Ke}=me(),$e=e=>{ce(e),Ne(e)};M("zh-CN",pe);M("en-US",ge);Q("zh-CN",be);Q("en-US",Ce);const We={__name:"index",setup(e){const a=ne({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0}),{list:U,list2:p,list3:x,loading:v,loading2:m,loading3:r,finished:g,finished2:b,finished3:B,error:S,current:h}=le(a);function O(){if(a.current!==0){a.loading=!1;return}setTimeout(()=>{for(let d=0;d<20;d++)a.list.push(a.list.length+1);a.loading=!1,a.list.length>=60&&(a.finished=!0)},1e3)}function j(){if(a.current!==1){a.loading2=!1;return}setTimeout(()=>{if(a.list2.length===40){a.error=!0,a.loading2=!1;return}for(let d=0;d<20;d++)a.list2.push(a.list2.length+1);a.loading2=!1},1e3)}function q(){if(a.current!==2){a.loading3=!1;return}setTimeout(()=>{for(let d=0;d<20;d++)a.list3.push(a.list3.length+1);a.loading3=!1,a.list3.length>=60&&(a.finished3=!0)},1e3)}return re($e),de(Te),(d,s)=>(u(),L($,null,[n(t(ve),{active:t(h),"onUpdate:active":s[0]||(s[0]=i=>k(h)?h.value=i:null),sticky:"","offset-top":"14.4vw",style:{"margin-bottom":"10px"}},{default:o(()=>[n(t(D),null,{default:o(()=>[c(l(t(f).basicUsage),1)]),_:1}),n(t(D),null,{default:o(()=>[c(l(t(f).loadFail),1)]),_:1}),n(t(D),null,{default:o(()=>[c(l(t(f).tipText),1)]),_:1})]),_:1},8,["active"]),n(t(he),{active:t(h),"onUpdate:active":s[5]||(s[5]=i=>k(h)?h.value=i:null)},{default:o(()=>[n(t(V),null,{default:o(()=>[n(t(y),{finished:t(g),loading:t(v),"onUpdate:loading":s[1]||(s[1]=i=>k(v)?v.value=i:null),onLoad:O},{default:o(()=>[(u(!0),L($,null,R(t(U),i=>(u(),w(t(z),{key:i},{default:o(()=>[c(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","loading"])]),_:1}),n(t(V),null,{default:o(()=>[n(t(y),{finished:t(b),error:t(S),"onUpdate:error":s[2]||(s[2]=i=>k(S)?S.value=i:null),loading:t(m),"onUpdate:loading":s[3]||(s[3]=i=>k(m)?m.value=i:null),onLoad:j},{default:o(()=>[(u(!0),L($,null,R(t(p),i=>(u(),w(t(z),{key:i},{default:o(()=>[c(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","error","loading"])]),_:1}),n(t(V),null,{default:o(()=>[n(t(y),{"loading-text":t(f).loadingText,"finished-text":t(f).finishedText,"error-text":t(f).errorText,finished:t(B),loading:t(r),"onUpdate:loading":s[4]||(s[4]=i=>k(r)?r.value=i:null),onLoad:q},{default:o(()=>[(u(!0),L($,null,R(t(x),i=>(u(),w(t(z),{key:i},{default:o(()=>[c(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["loading-text","finished-text","error-text","finished","loading"])]),_:1})]),_:1},8,["active"])],64))}};export{We as default};
