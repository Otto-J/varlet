import{d as G,g as J,o as K,c as Q,a as U,w as Z}from"./logger-9a144f5d.js";import{b as z,t as y}from"./elements-1fb47fa1.js";import{d as _,a as f,r as tt,w as et,aH as H,_ as ot,f as nt,i as at,M as lt,O as st,m as it,T as rt}from"./vue-router-547718df.js";import{o as dt}from"./onWindowResize-4d20ed42.js";const ut={direction:{type:String,default:"xy"},attraction:{type:String},disabled:{type:Boolean,default:!1},boundary:{type:Object,default:()=>({top:0,bottom:0,left:0,right:0})},zIndex:{type:[Number,String],default:90},teleport:{type:[String,Object,Boolean],default:"body"},onClick:G()},{n:ct,classes:ft}=Q("drag"),ht=_({name:"VarDrag",inheritAttrs:!1,props:ut,setup(t,{attrs:l}){const w=f(null),r=f(0),d=f(0),s=tt({top:0,bottom:0,left:0,right:0}),n=f(!1),h=f(!1),c=f(!1),{disabled:W}=J();let m=!1,g=0,v=0,T=null;const N=e=>{if(t.disabled)return;T&&window.clearTimeout(T);const{clientX:o,clientY:a}=e.touches[0];B(),g=o,v=a,m=!0,c.value=!1},O=async e=>{if(!m||t.disabled)return;e.preventDefault(),h.value=!1,n.value=!0,c.value=!0;const{clientX:o,clientY:a}=e.touches[0],i=o-g,u=a-v;g=o,v=a,t.direction.includes("x")&&(r.value+=i),t.direction.includes("y")&&(d.value+=u),R()},P=()=>{t.disabled||(m=!1,h.value=!0,I(),T=window.setTimeout(()=>{c.value=!1}))},A=e=>{c.value||U(t.onClick,e)},B=()=>{const{left:e,top:o}=D();r.value=e,d.value=o},D=()=>{const e=z(w.value),o=z(window),a=e.top-o.top,i=o.bottom-e.bottom,u=e.left-o.left,Y=o.right-e.right,{width:p,height:b}=e,{width:k,height:$}=o;return{top:a,bottom:i,left:u,right:Y,width:p,height:b,halfWidth:p/2,halfHeight:b/2,windowWidth:k,windowHeight:$}},C=()=>{const e=D(),o=s.left,a=e.windowWidth-s.right-e.width,i=s.top,u=e.windowHeight-s.bottom-e.height;return{minX:o,minY:i,maxX:o<a?a:o,maxY:i<u?u:i}},I=()=>{if(t.attraction==null)return;const{halfWidth:e,halfHeight:o,top:a,bottom:i,left:u,right:Y}=D(),{minX:p,minY:b,maxX:k,maxY:$}=C(),L=u+e-s.left,M=Y+e-s.right,V=a+o-s.top,q=i+o-s.bottom,E=L<=M,F=V<=q;t.attraction.includes("x")&&(r.value=E?p:k),t.attraction.includes("y")&&(d.value=F?b:$)},R=()=>{const{minX:e,minY:o,maxX:a,maxY:i}=C();r.value=H(r.value,e,a),d.value=H(d.value,o,i)},S=()=>{const{top:e=0,bottom:o=0,left:a=0,right:i=0}=t.boundary;s.top=y(e),s.bottom=y(o),s.left=y(a),s.right=y(i)},j=()=>{const e=l.style??{};return{...l,style:{...e,top:n.value?0:e.top,left:n.value?0:e.left,right:n.value?"auto":e.right,bottom:n.value?"auto":e.bottom,transform:n.value?`translate(${r.value}px, ${d.value}px)`:e.transform}}},X=()=>{n.value&&(B(),R())},x=()=>{h.value=!1,n.value=!1,c.value=!1,r.value=0,d.value=0,m=!1,g=0,v=0};return et(()=>t.boundary,S),dt(X),K(()=>{S(),X()}),{drag:w,x:r,y:d,enableTransition:h,dragging:c,teleportDisabled:W,n:ct,classes:ft,getAttrs:j,handleTouchstart:N,handleTouchmove:O,handleTouchend:P,handleClick:A,resize:X,reset:x}}});function mt(t,l,w,r,d,s){return nt(),at(rt,{to:t.teleport===!1?void 0:t.teleport,disabled:t.teleportDisabled||t.teleport===!1},[lt("div",it({ref:"drag",class:t.classes(t.n(),t.n("$--box"),[t.enableTransition,t.n("--transition")]),style:{"z-index":t.zIndex},onTouchstart:l[0]||(l[0]=(...n)=>t.handleTouchstart&&t.handleTouchstart(...n)),onTouchmove:l[1]||(l[1]=(...n)=>t.handleTouchmove&&t.handleTouchmove(...n)),onTouchend:l[2]||(l[2]=(...n)=>t.handleTouchend&&t.handleTouchend(...n)),onTouchcancel:l[3]||(l[3]=(...n)=>t.handleTouchend&&t.handleTouchend(...n)),onClick:l[4]||(l[4]=(...n)=>t.handleClick&&t.handleClick(...n))},t.getAttrs()),[st(t.$slots,"default")],16)],8,["to","disabled"])}const gt=ot(ht,[["render",mt]]);Z(gt);export{gt as D};
