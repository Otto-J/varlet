import{I as Q}from"./index-3a75a5b5.js";import{d as M,i as Y,c as G,a as W}from"./components-1f4f7021.js";import{d as H,a as o,b as J,aM as K,aI as v,n as U,_ as X,p as Z,f as r,h as u,M as a,N as l,O as w,R as i,Q as B,j as S,i as _,F as x}from"./vue-router-9a21bb19.js";function ee(e){return["small","normal"].includes(e)}function le(e){return["outlined","standard"].includes(e)}const ne={value:{type:null,required:!0},id:{type:String,default:""},isFocus:{type:Boolean},size:{type:String,default:"normal",validator:ee},variant:{type:String,default:"standard",validator:le},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},errorMessage:{type:String},formDisabled:{type:Boolean},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},cursor:{type:String},composing:{type:Boolean,default:!1},alwaysCustomPlaceholder:{type:Boolean,default:!0},onClick:M(),onClear:M()},{n:k,classes:oe}=G("field-decorator"),ae=H({name:"VarFieldDecorator",components:{VarIcon:Q},props:ne,setup(e){const s=o(null),c=o(null),p=o(null),f=o(null),h=o(""),d=o(""),t=o(""),g=o(""),D=J(()=>e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor),z=()=>{const{hint:n,value:m,isFocus:y,composing:b}=e;if(!n&&(!v(m)||b))return k("--placeholder-hidden");if(n&&(!v(m)||y))return k("--placeholder-hint")},V=()=>{d.value="",h.value="",g.value="",t.value=""},$=()=>{const{size:n,placeholder:m,hint:y,value:b,isFocus:T,variant:C}=e;U().then(()=>{var E,F;if(!p.value||!c.value||!f.value||C==="outlined"&&!s.value)return;if(!(y&&(!v(b)||T))||!m){V();return}const R=`var(--field-decorator-outlined-${n}-placeholder-space)`,L=(E=window.getComputedStyle(p.value))==null?void 0:E.width,N=(F=window.getComputedStyle(f.value))==null?void 0:F.width,A=C==="outlined"?"-50%":"0";if(g.value=`translate(-${N}, ${A}) scale(0.75)`,t.value=window.getComputedStyle(c.value).width,C==="outlined"){const{width:j,paddingLeft:q,paddingRight:O}=window.getComputedStyle(s.value);d.value=`calc(${L} * 0.75 + 2 * ${R})`,h.value=`calc(${j} - ${q} - ${O})`}})},I=n=>{W(e.onClear,n)},P=n=>{W(e.onClick,n)};return K($),Y(()=>window,"resize",$),{fieldsetEl:s,controllerEl:c,placeholderTextEl:p,prependIconEl:f,placeholderTransform:g,color:D,legendWidth:d,legendMaxWidth:h,controllerWidth:t,computePlaceholderState:z,n:k,classes:oe,isEmpty:v,handleClear:I,handleClick:P}}});const se=["for"];function re(e,s,c,p,f,h){const d=Z("var-icon");return r(),u("div",{class:l(e.classes(e.n(),e.n("$--box"),e.n(`--${e.variant}`),[e.size==="small",e.n("--small")],[e.disabled,e.n("--disabled")])),style:i({"--field-decorator-legend-max-width":e.legendMaxWidth,"--filed-decorator-controller-width":e.controllerWidth}),onClick:s[0]||(s[0]=(...t)=>e.handleClick&&e.handleClick(...t))},[a("div",{class:l(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),ref:"controllerEl",style:i({color:e.color,cursor:e.cursor})},[a("div",{class:l(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")])),ref:"prependIconEl"},[w(e.$slots,"prepend-icon")],2),a("div",{class:l(e.classes(e.n("middle"),[!e.hint,e.n("--middle-non-hint")]))},[w(e.$slots,"default"),e.hint||e.alwaysCustomPlaceholder?(r(),u("label",{key:0,class:l(e.classes(e.n("placeholder"),e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[!e.hint,e.n("--placeholder-non-hint")],e.computePlaceholderState())),style:i({transform:e.placeholderTransform,color:e.color}),for:e.id},[a("span",null,B(e.placeholder),1),a("span",{class:l(e.n("placeholder-text")),ref:"placeholderTextEl"},B(e.placeholder),3)],14,se)):S("",!0)],2),a("div",{class:l(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[e.clearable&&!e.isEmpty(e.value)?(r(),_(d,{key:0,class:l(e.n("clear-icon")),"var-field-decorator-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):S("",!0),w(e.$slots,"append-icon")],2)],6),e.line?(r(),u(x,{key:0},[e.variant==="outlined"?(r(),u("fieldset",{key:0,class:l(e.classes(e.n("line"),[e.isFocus,e.n("--line-focus")],[e.errorMessage,e.n("--line-error")],[e.formDisabled||e.disabled,e.n("--line-disabled")])),ref:"fieldsetEl"},[a("legend",{class:l(e.classes(e.n("line-legend"),[e.hint&&(!e.isEmpty(e.value)||e.isFocus),e.n("line-legend--hint")])),style:i({width:e.legendWidth,maxWidth:e.legendMaxWidth})},null,6)],2)):(r(),u("div",{key:1,class:l(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:i({background:e.errorMessage?void 0:e.blurColor})},[a("div",{class:l(e.classes(e.n("dot"),[e.isFocus,e.n("--line-focus")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:i({background:e.errorMessage?void 0:e.focusColor})},null,6)],6))],64)):S("",!0)],6)}const ce=X(ae,[["render",re]]);export{ce as V,ne as p};
