import{d as Q,e as U,o as Z,c as _,a as tt,w as et}from"./components-2d7bbda7.js";import{t as g}from"./elements-a3437ac0.js";import{d as ot,a as c,r as nt,w as at,aA as B,aK as C,_ as st,f as lt,i as rt,M as it,O as ut,m as dt,T as ct}from"./vue-router-eb3be2d7.js";import{o as ft}from"./onWindowResize-10389632.js";import{u as ht}from"./useTouch-d6d5a788.js";const mt={direction:{type:String,default:"xy"},attraction:String,disabled:Boolean,boundary:{type:Object,default:()=>({top:0,bottom:0,left:0,right:0})},zIndex:{type:[Number,String],default:90},teleport:{type:[String,Object,Boolean],default:"body"},onClick:Q()},{n:gt,classes:vt}=_("drag"),bt=ot({name:"VarDrag",inheritAttrs:!1,props:mt,setup(t,{attrs:a}){const v=c(null),i=c(0),u=c(0),s=nt({top:0,bottom:0,left:0,right:0}),o=c(!1),f=c(!1),{touching:S,dragging:D,moveX:z,moveY:R,startTouch:W,moveTouch:A,endTouch:H,resetTouch:N}=ht(),{disabled:O}=U(),P=e=>{t.disabled||(W(e),k())},I=async e=>{!S.value||t.disabled||(A(e),e.preventDefault(),f.value=!1,o.value=!0,t.direction.includes("x")&&(i.value+=z.value),t.direction.includes("y")&&(u.value+=R.value),Y())},j=()=>{t.disabled||(H(),f.value=!0,L())},x=e=>{D.value||tt(t.onClick,e)},k=()=>{const{left:e,top:n}=b();i.value=e,u.value=n},b=()=>{const e=B(v.value),n=B(window),r=e.top-n.top,l=n.bottom-e.bottom,d=e.left-n.left,T=n.right-e.right,{width:h,height:m}=e,{width:y,height:w}=n;return{top:r,bottom:l,left:d,right:T,width:h,height:m,halfWidth:h/2,halfHeight:m/2,windowWidth:y,windowHeight:w}},X=()=>{const e=b(),n=s.left,r=e.windowWidth-s.right-e.width,l=s.top,d=e.windowHeight-s.bottom-e.height;return{minX:n,minY:l,maxX:n<r?r:n,maxY:l<d?d:l}},L=()=>{if(t.attraction==null)return;const{halfWidth:e,halfHeight:n,top:r,bottom:l,left:d,right:T}=b(),{minX:h,minY:m,maxX:y,maxY:w}=X(),K=d+e-s.left,q=T+e-s.right,E=r+n-s.top,F=l+n-s.bottom,G=K<=q,J=E<=F;t.attraction.includes("x")&&(i.value=G?h:y),t.attraction.includes("y")&&(u.value=J?m:w)},Y=()=>{const{minX:e,minY:n,maxX:r,maxY:l}=X();i.value=C(i.value,e,r),u.value=C(u.value,n,l)},$=()=>{const{top:e=0,bottom:n=0,left:r=0,right:l=0}=t.boundary;s.top=g(e),s.bottom=g(n),s.left=g(r),s.right=g(l)},M=()=>{const e=a.style??{};return{...a,style:{...e,top:o.value?0:e.top,left:o.value?0:e.left,right:o.value?"auto":e.right,bottom:o.value?"auto":e.bottom,transform:o.value?`translate(${i.value}px, ${u.value}px)`:e.transform}}},p=()=>{o.value&&(k(),Y())},V=()=>{N(),f.value=!1,o.value=!1,i.value=0,u.value=0};return at(()=>t.boundary,$),ft(p),Z(()=>{$(),p()}),{drag:v,x:i,y:u,enableTransition:f,dragging:D,teleportDisabled:O,n:gt,classes:vt,getAttrs:M,handleTouchstart:P,handleTouchmove:I,handleTouchend:j,handleClick:x,resize:p,reset:V}}});function pt(t,a,v,i,u,s){return lt(),rt(ct,{to:t.teleport===!1?void 0:t.teleport,disabled:t.teleportDisabled||t.teleport===!1},[it("div",dt({ref:"drag",class:t.classes(t.n(),t.n("$--box"),[t.enableTransition,t.n("--transition")]),style:{"z-index":t.zIndex},onTouchstart:a[0]||(a[0]=(...o)=>t.handleTouchstart&&t.handleTouchstart(...o)),onTouchmove:a[1]||(a[1]=(...o)=>t.handleTouchmove&&t.handleTouchmove(...o)),onTouchend:a[2]||(a[2]=(...o)=>t.handleTouchend&&t.handleTouchend(...o)),onTouchcancel:a[3]||(a[3]=(...o)=>t.handleTouchend&&t.handleTouchend(...o)),onClick:a[4]||(a[4]=(...o)=>t.handleClick&&t.handleClick(...o))},t.getAttrs()),[ut(t.$slots,"default")],16)],8,["to","disabled"])}const Tt=st(bt,[["render",pt]]);et(Tt);export{Tt as D};
