import{I}from"./index-16bfcccc.js";import{d as B,e as N,i as L,c as j,a as M}from"./components-e6984121.js";import{d as q,a as i,b as D,aI as S,w as O,n as Q,_ as X,p as Y,f as n,h as d,M as o,N as l,O as F,R as t,Q as E,j as f,i as A,F as G}from"./vue-router-8b9a9ee5.js";function H(e){return["small","normal"].includes(e)}function J(e){return["outlined","standard"].includes(e)}const K={value:{type:null,required:!0},id:{type:String,default:""},isFocus:{type:Boolean},size:{type:String,default:"normal",validator:H},variant:{type:String,default:"standard",validator:J},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},errorMessage:{type:String},formDisabled:{type:Boolean},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},cursor:{type:String},composing:{type:Boolean,default:!1},alwaysCustomPlaceholder:{type:Boolean,default:!0},onClick:B(),onClear:B()},{n:z,classes:U}=j("field-decorator"),Z=q({name:"VarFieldDecorator",components:{VarIcon:I},props:K,setup(e){const s=i(null),h=i(null),p=i(null),m=i(""),u=i(""),r=i(""),v=D(()=>e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor),g=D(()=>e.hint&&(!S(e.value)||e.isFocus)),V=()=>{const{hint:a,value:C,composing:b}=e;if(!a&&(!S(C)||b))return z("--placeholder-hidden")},y=()=>{const{size:a,hint:C,placeholder:b,variant:$}=e;if(!g.value||!b){const k=s.value.getBoundingClientRect(),c=h.value.getBoundingClientRect(),w=`${c.left-k.left}px`;u.value=C?`translate(${w}, calc(var(--field-decorator-${$}-${a}-placeholder-translate-y) + var(--field-decorator-middle-offset-y))) scale(1)`:`translate(${w}, -50%)`,r.value=`${c.width}px`;return}const R=window.getComputedStyle(s.value),W=$==="outlined"?"-50%":"0";if(u.value=`translate(${R.paddingLeft}, ${W}) scale(0.75)`,$==="outlined"){const k=window.getComputedStyle(p.value),c=`var(--field-decorator-outlined-${a}-placeholder-space)`;m.value=`calc(${k.width} * 0.75 + ${c} * 2)`,r.value=`calc((100% - var(--field-decorator-outlined-${a}-padding-left) - var(--field-decorator-outlined-${a}-padding-right)) * 1.33)`}else r.value="133%"},T=a=>{M(e.onClear,a)},P=a=>{M(e.onClick,a)};return O(()=>[e.size,e.placeholder,e.hint,e.value,e.variant,g.value],()=>{Q(y)}),N(y),L(()=>window,"resize",y),{controllerEl:s,middleEl:h,placeholderTextEl:p,placeholderTransform:u,placeholderMaxWidth:r,color:v,legendWidth:m,isFloating:g,computePlaceholderState:V,n:z,classes:U,isEmpty:S,handleClear:T,handleClick:P}}});const _=["for"];function x(e,s,h,p,m,u){const r=Y("var-icon");return n(),d("div",{class:l(e.classes(e.n(),e.n("$--box"),e.n(`--${e.variant}`),[e.size==="small",e.n("--small")],[e.disabled,e.n("--disabled")])),onClick:s[0]||(s[0]=(...v)=>e.handleClick&&e.handleClick(...v))},[o("div",{class:l(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),ref:"controllerEl",style:t({color:e.color,cursor:e.cursor,overflow:e.isFloating?"visible":"hidden"})},[o("div",{class:l(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[F(e.$slots,"prepend-icon")],2),o("div",{ref:"middleEl",class:l(e.classes(e.n("middle"),[!e.hint,e.n("--middle-non-hint")]))},[F(e.$slots,"default")],2),(e.hint||e.alwaysCustomPlaceholder)&&e.placeholderTransform?(n(),d("label",{key:0,class:l(e.classes(e.n("placeholder"),e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[!e.hint,e.n("--placeholder-non-hint")],e.computePlaceholderState())),style:t({color:e.color,transform:e.placeholderTransform,maxWidth:e.placeholderMaxWidth}),for:e.id},[o("span",null,E(e.placeholder),1)],14,_)):f("",!0),e.variant==="outlined"?(n(),d("span",{key:1,ref:"placeholderTextEl",class:l([e.n("placeholder-text"),e.n("$--ellipsis")])},E(e.placeholder),3)):f("",!0),o("div",{class:l(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[e.clearable&&!e.isEmpty(e.value)?(n(),A(r,{key:0,class:l(e.n("clear-icon")),"var-field-decorator-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):f("",!0),F(e.$slots,"append-icon")],2)],6),e.line?(n(),d(G,{key:0},[e.variant==="outlined"?(n(),d("fieldset",{key:0,class:l(e.classes(e.n("line"),[e.isFocus,e.n("--line-focus")],[e.errorMessage,e.n("--line-error")],[e.formDisabled||e.disabled,e.n("--line-disabled")]))},[o("legend",{class:l(e.classes(e.n("line-legend"),[e.isFloating,e.n("line-legend--hint")])),style:t({width:e.legendWidth})},null,6)],2)):(n(),d("div",{key:1,class:l(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:t({background:e.errorMessage?void 0:e.blurColor})},[o("div",{class:l(e.classes(e.n("dot"),[e.isFocus,e.n("--line-focus")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:t({background:e.errorMessage?void 0:e.focusColor})},null,6)],6))],64)):f("",!0)],2)}const ne=X(Z,[["render",x]]);export{ne as V,K as p};
