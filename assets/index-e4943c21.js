import{d as B,o as C,i as I,c as P,a as R}from"./logger-583ae699.js";import{t as O,r as V,b as g,e as U,f as Z}from"./elements-951374bf.js";import{d as j,a as o,b as m,w as q,Z as A,_ as D,f as G,h as J,M as K,O as Q,N as F,R as T}from"./vue-router-68a7ea4f.js";import{o as X}from"./onSmartUnmounted-9d4d0723.js";import{o as Y}from"./onWindowResize-91edecaa.js";const _={offsetTop:{type:[String,Number],default:0},zIndex:{type:[String,Number],default:10},cssMode:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},onScroll:B()},{n:ee,classes:oe}=P("sticky"),se=j({name:"VarSticky",props:_,setup(e){const n=o(null),l=o(null),t=o(!1),r=o("0px"),f=o("0px"),b=o("auto"),h=o("auto"),S=o("auto"),x=o("auto"),$=m(()=>!e.disabled&&e.cssMode),k=m(()=>!e.disabled&&!e.cssMode&&t.value),i=m(()=>O(e.offsetTop));let s;const y=()=>{const{cssMode:a,disabled:L}=e;if(L)return;let p=0;if(s!==window){const{top:H}=g(s);p=H}const w=l.value,u=n.value,{top:N,left:E}=g(u),M=N-p;return M<=i.value?(a||(b.value=`${u.offsetWidth}px`,h.value=`${u.offsetHeight}px`,r.value=`${p+i.value}px`,f.value=`${E}px`,S.value=`${w.offsetWidth}px`,x.value=`${w.offsetHeight}px`,t.value=!0),{offsetTop:i.value,isFixed:!0}):(t.value=!1,{offsetTop:M,isFixed:!1})},d=()=>{if(!s)return;const a=y();a&&R(e.onScroll,a.offsetTop,a.isFixed)},c=async()=>{t.value=!1,await V(),y()},W=async()=>{await U(),s=Z(n.value),s!==window&&s.addEventListener("scroll",d),d()},z=()=>{s!==window&&s.removeEventListener("scroll",d)};return q(()=>e.disabled,c),C(W),X(z),Y(c),I(()=>window,"scroll",d),{n:ee,classes:oe,resize:c,stickyEl:n,wrapperEl:l,isFixed:t,offsetTop:i,fixedTop:r,fixedLeft:f,fixedWidth:b,fixedHeight:h,fixedWrapperWidth:S,fixedWrapperHeight:x,enableCSSMode:$,enableFixedMode:k,toNumber:A}}});function te(e,n,l,t,r,f){return G(),J("div",{class:F(e.classes(e.n(),[e.enableCSSMode,e.n("--css-mode")])),ref:"stickyEl",style:T({zIndex:e.toNumber(e.zIndex),top:e.enableCSSMode?`${e.offsetTop}px`:void 0,width:e.enableFixedMode?e.fixedWidth:void 0,height:e.enableFixedMode?e.fixedHeight:void 0})},[K("div",{class:F(e.n("wrapper")),ref:"wrapperEl",style:T({zIndex:e.toNumber(e.zIndex),position:e.enableFixedMode?"fixed":void 0,width:e.enableFixedMode?e.fixedWrapperWidth:void 0,height:e.enableFixedMode?e.fixedWrapperHeight:void 0,left:e.enableFixedMode?e.fixedLeft:void 0,top:e.enableFixedMode?e.fixedTop:void 0})},[Q(e.$slots,"default")],6)],6)}const v=D(se,[["render",te]]);v.install=function(e){e.component(v.name,v)};export{v as S,_ as p};
