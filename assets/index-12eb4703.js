import{d as B,a as W,b as z,w as V,_,p as h,D as J,E as X,f as b,h as x,M as m,N as p,O as d,P as j,Q as q,i as w,j as N,R as L,q as k,S as y,m as O,G as nn,T as en,r as E,V as on,W as tn,Y as an,Z as D,C as sn,as as rn}from"./vue-router-0425d5ec.js";import{p as v,L as ln}from"./index-1adabfd2.js";import{I as cn}from"./index-cee312b2.js";import{u as dn}from"./zIndex-2dda3ddd.js";import{p as g,d as f,o as un,c as U,a as c,g as pn,m as fn,w as G}from"./logger-5e844ee5.js";import{c as mn}from"./index-98d3be4f.js";import{u as yn}from"./lock-1d5e313a.js";function vn(n){return["top","center","bottom"].includes(n)}function gn(n){return T.includes(n)}const M={type:{type:String,validator:gn},position:{type:String,default:"top",validator:vn},content:{type:[String,Function,Object]},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:g(v,"type"),loadingSize:g(v,"size"),loadingRadius:g(v,"radius"),loadingColor:{...g(v,"color"),default:"currentColor"},lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:[String,Object],default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:f(),onOpened:f(),onClose:f(),onClosed:f(),"onUpdate:show":f(),_update:{type:String}},{n:bn,classes:kn}=U("snackbar"),Sn={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},Cn=B({name:"VarSnackbarCore",components:{VarLoading:ln,VarIcon:cn},props:M,setup(n){const o=W(null),{zIndex:e}=dn(()=>n.show,1);yn(()=>n.show,()=>n.lockScroll);const s=z(()=>n.type==="loading"||n.forbidClick),t=z(()=>n.type?Sn[n.type]:""),r=()=>{o.value=setTimeout(()=>{n.type!=="loading"&&c(n["onUpdate:show"],!1)},n.duration)};return V(()=>n.show,l=>{l?(c(n.onOpen),r()):l===!1&&(clearTimeout(o.value),c(n.onClose))}),V(()=>n._update,()=>{clearTimeout(o.value),r()}),un(()=>{n.show&&(c(n.onOpen),r())}),{SNACKBAR_TYPE:T,n:bn,classes:kn,zIndex:e,iconName:t,isForbidClick:s}}});function hn(n,o,e,s,t,r){const l=h("var-icon"),S=h("var-loading");return J((b(),x("div",{class:p(n.n()),style:L({pointerEvents:n.isForbidClick?"auto":"none",zIndex:n.zIndex})},[m("div",{class:p(n.classes(n.n("wrapper"),n.n(`wrapper-${n.position}`),n.n("$-elevation--4"),[n.vertical,n.n("vertical")],[n.type&&n.SNACKBAR_TYPE.includes(n.type),n.n(`wrapper-${n.type}`)])),style:L({zIndex:n.zIndex})},[m("div",{class:p([n.n("content"),n.contentClass])},[d(n.$slots,"default",{},()=>[j(q(n.content),1)])],2),m("div",{class:p([n.n("icon")])},[n.iconName?(b(),w(l,{key:0,name:n.iconName},null,8,["name"])):N("",!0),n.type==="loading"?(b(),w(S,{key:1,type:n.loadingType,size:n.loadingSize,color:n.loadingColor,radius:n.loadingRadius},null,8,["type","size","color","radius"])):N("",!0),d(n.$slots,"icon")],2),m("div",{class:p(n.n("action"))},[d(n.$slots,"action")],2)],6)],6)),[[X,n.show]])}const R=_(Cn,[["render",hn]]),{n:wn}=U("snackbar"),On=B({name:"VarSnackbar",components:{VarSnackbarCore:R},props:M,setup(){const{disabled:n}=pn();return{n:wn,disabled:n}}});function $n(n,o,e,s,t,r){const l=h("var-snackbar-core");return b(),w(en,{to:n.teleport,disabled:n.disabled},[k(nn,{name:`${n.n()}-fade`,onAfterEnter:n.onOpened,onAfterLeave:n.onClosed},{default:y(()=>[k(l,O(n.$props,{class:n.n("transition")}),{icon:y(()=>[d(n.$slots,"icon")]),action:y(()=>[d(n.$slots,"action")]),default:y(()=>[d(n.$slots,"default",{},()=>[j(q(n.content),1)])]),_:3},16,["class"])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to","disabled"])}const A=_(On,[["render",$n]]);function En(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!sn(n)}const T=["loading","success","warning","info","error"];let P=0,$=!1,F,u=!1;const Y={type:void 0,content:"",icon:"",action:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}};let a=E([]),I=Y;const An={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},C=n=>()=>rn(n)?n():n,Tn={setup(){return()=>{const n=a.map(({id:o,reactiveSnackOptions:e,_update:s})=>{const t=document.querySelector(".var-transition-group");e.forbidClick||e.type==="loading"?t.classList.add("var-pointer-auto"):t.classList.remove("var-pointer-auto"),u&&(e.position="top");const l={position:u?"relative":"absolute",...Pn(e.position)},{content:S,icon:K,action:Z}=e,H={default:C(S),icon:C(K),action:C(Z)};return k(R,O(e,{key:o,style:l,"data-id":o,_update:s,show:e.show,"onUpdate:show":Q=>e.show=Q}),H)});return k(an,O(An,{style:{zIndex:mn.zIndex},onAfterEnter:In,onAfterLeave:zn}),En(n)?n:{default:()=>[n]})}}},i=function(n){const o=Nn(n),e=E({...I,...o});e.show=!0,$||($=!0,F=fn(Tn).unmountInstance);const{length:s}=a,t={id:P++,reactiveSnackOptions:e};if(s===0||u)Vn(t);else{const r=`update-${P}`;Ln(e,r)}return{clear(){!u&&a.length?a[0].reactiveSnackOptions.show=!1:e.show=!1}}};T.forEach(n=>{i[n]=o=>(on(o)?o.type=n:o={content:o,type:n},i(o))});i.allowMultiple=function(n=!1){n!==u&&(a.forEach(o=>{o.reactiveSnackOptions.show=!1}),u=n)};i.clear=function(){a.forEach(n=>{n.reactiveSnackOptions.show=!1})};i.setDefaultOptions=function(n){I=n};i.resetDefaultOptions=function(){I=Y};function In(n){const o=n.getAttribute("data-id"),e=a.find(s=>s.id===D(o));e&&c(e.reactiveSnackOptions.onOpened)}function zn(n){n.parentElement&&n.parentElement.classList.remove("var-pointer-auto");const o=n.getAttribute("data-id"),e=a.find(t=>t.id===D(o));e&&(e.animationEnd=!0,c(e.reactiveSnackOptions.onClosed)),a.every(t=>t.animationEnd)&&(c(F),a=E([]),$=!1)}function Vn(n){a.push(n)}function Nn(n={}){return tn(n)?{content:n}:n}function Ln(n,o){const[e]=a;e.reactiveSnackOptions={...e.reactiveSnackOptions,...n},e._update=o}function Pn(n="top"){return n==="bottom"?{[n]:"5%"}:{top:n==="top"?"5%":"45%"}}i.Component=A;G(A);G(A,i);const Mn=i;export{Mn as S};
