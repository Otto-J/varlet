import{S as ae}from"./index-7044a990.js";import{d as Y,a as u,b,E as re,_ as F,f as h,i as le,S as C,M as K,O as j,P as N,Q as p,m as ie,aE as ce,w as de,e as ue,y as fe,Z as M,V as pe,h as g,F as q,ai as Q,N as O,R as P,o as me,ac as he,az as ve,q as x,ap as y}from"./vue-router.esm-bundler-1ba0b218.js";import{u as ye,a as ge,e as _e,f as be,c as Z,d as V,b as X}from"./components-42ed6c38.js";import{e as Ce}from"./shared-dcce90e2.js";import{t as ke,e as Te,b as Ie,n as xe,j as Ne,d as H,h as Be,g as Ee}from"./elements-dcd54589.js";import{u as Se}from"./useMounted-fe8343ca.js";import{C as U}from"./index-41ddbc47.js";import{d as $e}from"./index-59604d2c.js";import{u as Ae,c as we,a as G,_ as De,b as Oe}from"./index-509b04d6.js";import"./index-d3a9b31a.js";import"./index-6f59863e.js";import"./index-6c72e47d.js";/* empty css               */const J=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY"),W=Symbol("INDEX_BAR_COUNT_INDEX_ANCHOR_KEY");function ze(){const{bindChildren:e,childProviders:a}=ye(J),{length:o}=ge(W);return{length:o,indexAnchors:a,bindIndexAnchors:e}}function Pe(){const{parentProvider:e,bindParent:a}=_e(J),{index:o}=be(W);if(!e||!a)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:o,indexBar:e,bindIndexBar:a}}const Le={index:{type:[Number,String]}},{n:Re,classes:Me}=Z("index-anchor"),Ve=Y({name:"VarIndexAnchor",components:{VarSticky:ae},inheritAttrs:!1,props:Le,setup(e){const{index:a,indexBar:o,bindIndexBar:f}=Pe(),c=u(0),n=u(!1),i=b(()=>e.index),s=u(null),{active:E,sticky:S,cssMode:_,stickyOffsetTop:k,zIndex:r}=o;return f({index:a,name:i,ownTop:c,setOwnTop:()=>{s.value&&(c.value=s.value.$el?s.value.$el.offsetTop:s.value.offsetTop)},setDisabled:T=>{n.value=T}}),{n:Re,classes:Me,name:i,anchorEl:s,active:E,sticky:S,zIndex:r,disabled:n,cssMode:_,stickyOffsetTop:k,Transition:re}}});function Xe(e,a,o,f,c,n){return h(),le(ce(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:C(()=>[K("div",ie({class:e.n()},e.$attrs),[j(e.$slots,"default",{},()=>[N(p(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}const He=F(Ve,[["render",Xe]]),Ue={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:V(),onChange:V()},{n:Ye,classes:Fe}=Z("index-bar"),Ke=Y({name:"VarIndexBar",props:Ue,setup(e){const{length:a,indexAnchors:o,bindIndexAnchors:f}=ze(),c=u(""),n=u(null),i=u([]),s=u(),E=b(()=>e.sticky),S=b(()=>e.cssMode),_=b(()=>ke(e.stickyOffsetTop)),k=b(()=>e.zIndex);let r=null;f({active:s,sticky:E,cssMode:S,stickyOffsetTop:_,zIndex:k});const $=(t,l)=>{const d=pe(t)?t.name.value:t;d===s.value||d===void 0||(s.value=d,(l==null?void 0:l.event)!==!1&&X(e.onChange,d))},A=()=>{if(!("getBoundingClientRect"in r))return 0;const{top:t}=r.getBoundingClientRect(),{scrollTop:l}=r,{top:d}=n.value.getBoundingClientRect();return l-t+d},T=()=>{const t=Be(r),l=r===window?document.body.scrollHeight:r.scrollHeight,d=A();o.forEach((m,v)=>{const w=m.ownTop.value,I=t-w+_.value-d,D=v===o.length-1?l:o[v+1].ownTop.value-m.ownTop.value;I>=0&&I<D&&c.value===""&&(v&&!e.cssMode&&o[v-1].setDisabled(!0),m.setDisabled(!1),$(m))})},L=async({anchorName:t,manualCall:l=!1,options:d})=>{if(l&&X(e.onClick,t),t===s.value)return;const m=o.find(({name:D})=>t===D.value);if(!m)return;const v=A(),w=m.ownTop.value-_.value+v,I=Te(r);c.value=t,$(t,d),await Ie(r,{left:I,top:w,animation:Ce,duration:M(e.duration)}),xe(()=>{c.value=""})},se=async()=>{await H(),r=Ee(n.value)},te=()=>{r.addEventListener("scroll",T)},R=()=>{r.removeEventListener("scroll",T)},oe=(t,l)=>{Ne(()=>L({anchorName:t,options:l}))};return de(()=>a.value,async()=>{await H(),o.forEach(({name:t,setOwnTop:l})=>{t.value&&i.value.push(t.value),l()})}),Se(async()=>{await se(),te()}),ue(R),fe(R),{n:Ye,classes:Fe,barEl:n,active:s,zIndex:k,anchorNameList:i,toNumber:M,scrollTo:oe,anchorClick:L}}});const je=["onClick"];function qe(e,a,o,f,c,n){return h(),g("div",{class:O(e.n()),ref:"barEl"},[j(e.$slots,"default"),K("ul",{class:O(e.n("anchor-list")),style:P({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(h(!0),g(q,null,Q(e.anchorNameList,i=>(h(),g("li",{key:i,class:O(e.classes(e.n("anchor-item"),[e.active===i,e.n("anchor-item--active")])),style:P({color:e.active===i&&e.highlightColor?e.highlightColor:""}),onClick:s=>e.anchorClick({anchorName:i,manualCall:!0})},p(i),15,je))),128))],6)],2)}const B=F(Ke,[["render",qe]]);B.install=function(e){e.component(B.name,B)};const Qe={title:"标题",text:"文本"},Ze={title:"Title",text:"Text"},{add:ee,use:Ge,pack:z,packs:mn,merge:hn}=Ae(),Je=e=>{we(e),Ge(e)};G("zh-CN",De);G("en-US",Oe);ee("zh-CN",Qe);ee("en-US",Ze);const We={class:"index-bar-example-container"},vn={setup(e){const a=u([]),o=u("#e7edf7"),f=u("#2e67ba");me(()=>{for(let n=0;n<26;n++)a.value.push(String.fromCharCode(65+n))});function c(n){console.log(n)}return he(Je),ve($e,n=>{o.value=n==="darkTheme"?"rgb(41, 42, 45)":"#e7edf7",f.value=n==="darkTheme"?"#3980e8":"#2e67ba"}),(n,i)=>(h(),g("div",We,[x(y(B),{onChange:c,duration:"300"},{default:C(()=>[(h(!0),g(q,null,Q(a.value,s=>(h(),g("div",{key:s},[x(He,{index:s,class:"index-bar-example-anchor",style:P({background:o.value,color:f.value})},{default:C(()=>[N(p(y(z).title)+" "+p(s),1)]),_:2},1032,["index","style"]),x(y(U),null,{default:C(()=>[N(p(s)+" "+p(y(z).text),1)]),_:2},1024),x(y(U),null,{default:C(()=>[N(p(s)+" "+p(y(z).text),1)]),_:2},1024)]))),128))]),_:1})]))}};export{vn as default};
