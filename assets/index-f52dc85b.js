import{S as re}from"./index-2556c777.js";import{d as Y,a as u,b as k,G as le,_ as K,f as m,i as ie,S as _,M as j,m as ce,O as G,P as $,Q as v,aF as de,w as ue,e as fe,x as pe,v as ve,Z as R,V as me,au as he,h as y,F as Q,ai as W,N as P,R as O,o as ye,ac as be,aD as ge,q as S,ao as h}from"./vue-router-d12202db.js";import{u as ke,e as _e,c as Z,d as F,o as xe,a as H}from"./logger-928e8198.js";import{u as Ce}from"./useChildren-f2f14565.js";import{t as Te,k as Ie,c as Se,n as $e,v as Be,u as Ne,b as U,q as we,e as X,f as Ae}from"./elements-ab6c30e6.js";import{C as q}from"./index-df8699b0.js";import{d as De}from"./index-a0438c78.js";import{u as Ee,b as J,_ as ze,c as Pe,a as Le}from"./index-9b481dcd.js";import"./onSmartUnmounted-c0f961e7.js";import"./onWindowResize-a319d928.js";import"./index-a00d271a.js";import"./index-92086fe4.js";import"./index-6f0b3011.js";/* empty css               */const ee=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY");function Oe(){const{bindChildren:e,length:l,childProviders:o}=Ce(ee);return{length:l,indexAnchors:o,bindIndexAnchors:e}}function Me(){const{parentProvider:e,index:l,bindParent:o}=ke(ee);return o||_e("IndexAnchor",'You should use this component in "IndexBar"'),{index:l,indexBar:e,bindIndexBar:o}}const Ve={index:{type:[Number,String]}},{n:Re,classes:Fe}=Z("index-anchor"),He=Y({name:"VarIndexAnchor",components:{VarSticky:re},inheritAttrs:!1,props:Ve,setup(e){const{index:l,indexBar:o,bindIndexBar:f}=Me(),c=u(0),s=u(!1),i=k(()=>e.index),n=u(null),{active:N,sticky:w,cssMode:b,stickyOffsetTop:x,zIndex:a}=o;return f({index:l,name:i,ownTop:c,setOwnTop:()=>{n.value&&(c.value=n.value.$el?n.value.$el.offsetTop:n.value.offsetTop)},setDisabled:C=>{s.value=C}}),{n:Re,classes:Fe,name:i,anchorEl:n,active:N,sticky:w,zIndex:a,disabled:s,cssMode:b,stickyOffsetTop:x,Transition:le}}});function Ue(e,l,o,f,c,s){return m(),ie(de(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:_(()=>[j("div",ce({class:e.n()},e.$attrs),[G(e.$slots,"default",{},()=>[$(v(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}const Xe=K(He,[["render",Ue]]),qe={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:{type:Boolean,default:!1},stickyCssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:F(),onChange:F()},{n:Ye,classes:Ke}=Z("index-bar"),je=Y({name:"VarIndexBar",props:qe,setup(e){const{length:l,indexAnchors:o,bindIndexAnchors:f}=Oe(),c=u(""),s=u(null),i=u([]),n=u(),N=k(()=>e.sticky),w=k(()=>e.stickyCssMode||e.cssMode),b=k(()=>Te(e.stickyOffsetTop)),x=k(()=>e.zIndex);let a=null,g=!1;f({active:n,sticky:N,cssMode:w,stickyOffsetTop:b,zIndex:x});const A=(t,r)=>{const d=me(t)?t.name.value:t;d===n.value||d===void 0||(n.value=d,(r==null?void 0:r.event)!==!1&&H(e.onChange,d))},C=()=>{if(he(a))return 0;const{top:t}=U(a),{scrollTop:r}=a,{top:d}=U(s.value);return r-t+d},M=()=>{const t=we(a),r=a===window?document.body.scrollHeight:a.scrollHeight,d=C();o.forEach((p,T)=>{const E=p.ownTop.value,I=t-E+b.value-d,z=T===o.length-1?r:o[T+1].ownTop.value-p.ownTop.value;p.setDisabled(!0),I>=0&&I<z&&c.value===""&&(p.setDisabled(!1),A(p))})},D=async({anchorName:t,manualCall:r=!1,options:d})=>{if(r&&H(e.onClick,t),t===n.value&&!g)return;const p=o.find(({name:z})=>t===z.value);if(!p)return;const T=C(),E=p.ownTop.value-b.value+T,I=Ie(a);c.value=t,A(t,d),await Se(a,{left:I,top:E,animation:$e,duration:R(e.duration)}),Be(()=>{c.value=""})},te=async()=>{await X(),a=Ae(s.value)},oe=()=>{a.addEventListener("scroll",M)},V=()=>{a.removeEventListener("scroll",M)},ae=(t,r)=>{Ne(()=>D({anchorName:t,options:r}))};return ue(()=>l.value,async()=>{await X(),o.forEach(({name:t,setOwnTop:r})=>{t.value&&i.value.push(t.value),r()})}),xe(async()=>{await te(),oe()}),fe(V),pe(()=>{g=!0,V()}),ve(()=>{!g||n.value===void 0||(D({anchorName:n.value,options:{event:!1}}),g=!1)}),{n:Ye,classes:Ke,barEl:s,active:n,zIndex:x,anchorNameList:i,toNumber:R,scrollTo:ae,anchorClick:D}}});const Ge=["onClick"];function Qe(e,l,o,f,c,s){return m(),y("div",{class:P(e.n()),ref:"barEl"},[G(e.$slots,"default"),j("ul",{class:P(e.n("anchor-list")),style:O({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(m(!0),y(Q,null,W(e.anchorNameList,i=>(m(),y("li",{key:i,class:P(e.classes(e.n("anchor-item"),[e.active===i,e.n("anchor-item--active")])),style:O({color:e.active===i&&e.highlightColor?e.highlightColor:""}),onClick:n=>e.anchorClick({anchorName:i,manualCall:!0})},v(i),15,Ge))),128))],6)],2)}const B=K(je,[["render",Qe]]);B.install=function(e){e.component(B.name,B)};const We={title:"标题",text:"文本"},Ze={title:"Title",text:"Text"},{add:ne,use:Je,pack:L,packs:yn,merge:bn}=Ee(),en=e=>{Le(e),Je(e)};J("zh-CN",ze);J("en-US",Pe);ne("zh-CN",We);ne("en-US",Ze);const nn={class:"index-bar-example-container"},gn={__name:"index",setup(e){const l=u([]),o=u("#e7edf7"),f=u("#2e67ba");ye(()=>{for(let s=0;s<26;s++)l.value.push(String.fromCharCode(65+s))});function c(s){console.log(s)}return be(en),ge(De,s=>{o.value=s==="darkTheme"?"rgb(41, 42, 45)":"#e7edf7",f.value=s==="darkTheme"?"#3980e8":"#2e67ba"}),(s,i)=>(m(),y("div",nn,[S(h(B),{onChange:c,duration:"300"},{default:_(()=>[(m(!0),y(Q,null,W(l.value,n=>(m(),y("div",{key:n},[S(Xe,{index:n,class:"index-bar-example-anchor",style:O({background:o.value,color:f.value})},{default:_(()=>[$(v(h(L).title)+" "+v(n),1)]),_:2},1032,["index","style"]),S(h(q),null,{default:_(()=>[$(v(n)+" "+v(h(L).text),1)]),_:2},1024),S(h(q),null,{default:_(()=>[$(v(n)+" "+v(h(L).text),1)]),_:2},1024)]))),128))]),_:1})]))}};export{gn as default};
