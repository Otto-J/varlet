import{I as A}from"./index-e0d6e066.js";import{F as E,u as X}from"./provide-1103d83a.js";import{v as Z}from"./index-1b9de18e.js";import{H as j,u as G}from"./index-2de8e34a.js";import{v as J}from"./index-fb3d3b08.js";import{d as I,k as K,a as f,c as Q}from"./logger-577c0317.js";import{a as z}from"./elements-dde26fa0.js";import{d as Y,a as x,Z as c,n as ee,_ as ae,p as C,ag as F,f as S,h as V,M as te,F as oe,ai as re,D as ne,R as U,N as y,q as H}from"./vue-router-60af08e5.js";const le={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number]},gap:{type:[String,Number]},namespace:{type:String},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},clearable:{type:Boolean,default:!1},rules:{type:Array},onChange:I(),"onUpdate:modelValue":I()},{n:u}=Q("rate"),se=Y({name:"VarRate",components:{VarIcon:A,VarFormDetails:E,VarHoverOverlay:j},directives:{Ripple:Z,Hover:J},props:le,setup(e){const{form:a,bindForm:k}=X(),{errorMessage:g,validateWithTrigger:R,validate:_,resetValidation:s}=K(),{hovering:m}=G(),v=x(-1);let p=Number(e.modelValue);const h=t=>{const{count:o,gap:r}=e;return{color:i(t).color,marginRight:t!==c(o)?z(r):0}},n=t=>{const{name:o,color:r}=i(t);return{[u("content")]:!0,[u("--disabled")]:(a==null?void 0:a.disabled.value)||e.disabled,[u("--error")]:g.value,[u("--primary")]:o!==e.emptyIcon&&!r}},i=t=>{const{modelValue:o,disabled:r,disabledColor:l,color:d,half:T,emptyColor:W,icon:w,halfIcon:L,emptyIcon:q}=e;let b=d;return(r||a!=null&&a.disabled.value)&&(b=l),t<=c(o)?{color:b,name:w}:T&&t<=c(o)+.5?{color:b,name:L}:{color:r||a!=null&&a.disabled.value?l:W,name:q}},M=(t,o)=>{const{half:r,clearable:l}=e;if(r){const{offsetWidth:d}=o.target;o.offsetX<=Math.floor(d/2)&&(t-=.5)}p===t&&l&&(t=0),p=t,f(e["onUpdate:modelValue"],t)},B=()=>_(e.rules,c(e.modelValue)),$=()=>ee(()=>R(["onChange"],"onChange",e.rules,e.modelValue)),O=(t,o)=>{const{readonly:r,disabled:l,onChange:d}=e;r||l||a!=null&&a.disabled.value||a!=null&&a.readonly.value||(M(t,o),f(d,t),$())},P=t=>o=>{v.value=t,m.value=o},D=()=>{f(e["onUpdate:modelValue"],0),s()};return f(k,{reset:D,validate:B,resetValidation:s}),{errorMessage:g,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,getStyle:h,getClass:n,getCurrentState:i,handleClick:O,hovering:m,currentHoveringValue:v,createHoverHandler:P,reset:D,validate:B,resetValidation:s,toSizeUnit:z,toNumber:c,n:u}}});const ie=["onClick"];function de(e,a,k,g,R,_){const s=C("var-icon"),m=C("var-hover-overlay"),v=C("var-form-details"),p=F("ripple"),h=F("hover");return S(),V("div",{class:y(e.n("wrap"))},[te("div",{class:y(e.n())},[(S(!0),V(oe,null,re(e.toNumber(e.count),n=>ne((S(),V("div",{key:n,style:U(e.getStyle(n)),class:y(e.getClass(n)),onClick:i=>e.handleClick(n,i)},[H(s,{class:y(e.n("content-icon")),"var-rate-cover":"",transition:0,namespace:e.namespace,name:e.getCurrentState(n).name,style:U({fontSize:e.toSizeUnit(e.size)})},null,8,["class","namespace","name","style"]),H(m,{hovering:e.hovering&&n===e.currentHoveringValue&&!e.disabled&&!e.formDisabled},null,8,["hovering"])],14,ie)),[[p,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}],[h,e.createHoverHandler(n),"desktop"]])),128))],2),H(v,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const N=ae(se,[["render",de]]);N.install=function(e){e.component(N.name,N)};export{N as R};
