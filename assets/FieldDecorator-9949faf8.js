import{I as L}from"./index-2c7b28ef.js";import{d as B,e as j,i as q,c as J,a as D}from"./components-7bcea1d6.js";import{d as O,a as i,b as E,aJ as k,aj as Q,_ as U,p as X,f as o,h as d,M as n,N as l,O as S,R as t,Q as w,j as f,i as Y,F as A}from"./vue-router-609def63.js";import{e as z,f as V}from"./elements-5ecd008f.js";function G(e){return["small","normal"].includes(e)}function H(e){return["outlined","standard"].includes(e)}const K={value:{type:null,required:!0},id:{type:String,default:""},isFocus:{type:Boolean},size:{type:String,default:"normal",validator:G},variant:{type:String,default:"standard",validator:H},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},errorMessage:{type:String},formDisabled:{type:Boolean},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},cursor:{type:String},composing:{type:Boolean,default:!1},alwaysCustomPlaceholder:{type:Boolean,default:!0},onClick:B(),onClear:B()},{n:T,classes:Z}=J("field-decorator"),_=O({name:"VarFieldDecorator",components:{VarIcon:L},props:K,setup(e){const s=i(null),p=i(null),h=i(null),m=i(""),u=i(""),r=i(""),v=E(()=>e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor),F=E(()=>e.hint&&(!k(e.value)||e.isFocus)),P=()=>{const{hint:a,value:g,composing:b}=e;if(!a&&(!k(g)||b))return T("--placeholder-hidden")},y=()=>{const{size:a,hint:g,placeholder:b,variant:C}=e;if(!F.value||!b){const $=z(s.value),c=z(p.value),M=`${c.left-$.left}px`;u.value=g?`translate(${M}, calc(var(--field-decorator-${C}-${a}-placeholder-translate-y) + var(--field-decorator-middle-offset-y))) scale(1)`:`translate(${M}, -50%)`,r.value=`${c.width}px`;return}const R=V(s.value),I=C==="outlined"?"-50%":"0";if(u.value=`translate(${R.paddingLeft}, ${I}) scale(0.75)`,C==="outlined"){const $=V(h.value),c=`var(--field-decorator-outlined-${a}-placeholder-space)`;m.value=`calc(${$.width} * 0.75 + ${c} * 2)`,r.value=`calc((100% - var(--field-decorator-outlined-${a}-padding-left) - var(--field-decorator-outlined-${a}-padding-right)) * 1.33)`}else r.value="133%"},W=a=>{D(e.onClear,a)},N=a=>{D(e.onClick,a)};return Q(y),j(y),q(()=>window,"resize",y),{controllerEl:s,middleEl:p,placeholderTextEl:h,placeholderTransform:u,placeholderMaxWidth:r,color:v,legendWidth:m,isFloating:F,computePlaceholderState:P,n:T,classes:Z,isEmpty:k,handleClear:W,handleClick:N}}});const x=["for"];function ee(e,s,p,h,m,u){const r=X("var-icon");return o(),d("div",{class:l(e.classes(e.n(),e.n("$--box"),e.n(`--${e.variant}`),[e.size==="small",e.n("--small")],[e.disabled,e.n("--disabled")])),onClick:s[0]||(s[0]=(...v)=>e.handleClick&&e.handleClick(...v))},[n("div",{class:l(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),ref:"controllerEl",style:t({color:e.color,cursor:e.cursor,overflow:e.isFloating?"visible":"hidden"})},[n("div",{class:l(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[S(e.$slots,"prepend-icon")],2),n("div",{ref:"middleEl",class:l(e.classes(e.n("middle"),[!e.hint,e.n("--middle-non-hint")]))},[S(e.$slots,"default")],2),(e.hint||e.alwaysCustomPlaceholder)&&e.placeholderTransform?(o(),d("label",{key:0,class:l(e.classes(e.n("placeholder"),e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[!e.hint,e.n("--placeholder-non-hint")],e.computePlaceholderState())),style:t({color:e.color,transform:e.placeholderTransform,maxWidth:e.placeholderMaxWidth}),for:e.id},[n("span",null,w(e.placeholder),1)],14,x)):f("",!0),e.variant==="outlined"?(o(),d("span",{key:1,ref:"placeholderTextEl",class:l([e.n("placeholder-text"),e.n("$--ellipsis")])},w(e.placeholder),3)):f("",!0),n("div",{class:l(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[e.clearable&&!e.isEmpty(e.value)?(o(),Y(r,{key:0,class:l(e.n("clear-icon")),"var-field-decorator-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):f("",!0),S(e.$slots,"append-icon")],2)],6),e.line?(o(),d(A,{key:0},[e.variant==="outlined"?(o(),d("fieldset",{key:0,class:l(e.classes(e.n("line"),[e.isFocus,e.n("--line-focus")],[e.errorMessage,e.n("--line-error")],[e.formDisabled||e.disabled,e.n("--line-disabled")]))},[n("legend",{class:l(e.classes(e.n("line-legend"),[e.isFloating,e.n("line-legend--hint")])),style:t({width:e.legendWidth})},null,6)],2)):(o(),d("div",{key:1,class:l(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:t({background:e.errorMessage?void 0:e.blurColor})},[n("div",{class:l(e.classes(e.n("dot"),[e.isFocus,e.n("--line-focus")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:t({background:e.errorMessage?void 0:e.focusColor})},null,6)],6))],64)):f("",!0)],2)}const se=U(_,[["render",ee]]);export{se as V,K as p};
