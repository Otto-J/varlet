import{o as et,c as at,w as ot}from"./logger-5f6a195b.js";import{b as W,t as D}from"./elements-53ac7962.js";import{d as nt,a as y,r as rt,w as st,aI as H,_ as lt,f as I,i as it,M as dt,O as ut,m as ct,T as ft,ac as pt,aD as mt,h as ht,q as r,S as s,ao as e,F as yt,P as p,Q as m,n as gt}from"./vue-router-14238f57.js";import{o as bt}from"./onWindowResize-f2999832.js";import{B as v}from"./index-22ec8f4f.js";import{d as vt}from"./index-a0438c78.js";import{u as xt,b as O,_ as _t,c as Tt,a as wt}from"./index-d00a0f8a.js";import{A as w}from"./appType-41252aac.js";import"./index-fc3e2a6c.js";import"./index-01a19db2.js";/* empty css               */import"./index-e2eca1df.js";import"./index-0737eb47.js";import"./index-97c70489.js";import"./useChildren-24c77be1.js";const kt={direction:{type:String,default:"xy"},attraction:{type:String},disabled:{type:Boolean,default:!1},boundary:{type:Object,default:()=>({top:0,bottom:0,left:0,right:0})},zIndex:{type:[Number,String],default:90},teleport:{type:[String,Object],default:"body"}},{n:zt,classes:At}=at("drag"),Dt=nt({name:"VarDrag",inheritAttrs:!1,props:kt,setup(t,{attrs:i}){const b=y(null),u=y(0),c=y(0),l=rt({top:0,bottom:0,left:0,right:0}),n=y(!1),_=y(!1);let T=!1,k=0,X=0;const L=a=>{if(t.disabled)return;const{clientX:o,clientY:d}=a.touches[0];U(),k=o,X=d,T=!0},M=async a=>{if(!T||t.disabled)return;a.preventDefault(),_.value=!1,n.value=!0;const{clientX:o,clientY:d}=a.touches[0],f=o-k,g=d-X;k=o,X=d,t.direction.includes("x")&&(u.value+=f),t.direction.includes("y")&&(c.value+=g),R()},j=()=>{t.disabled||(T=!1,_.value=!0,F())},U=()=>{const{left:a,top:o}=Y();u.value=a,c.value=o},Y=()=>{const a=W(b.value),o=W(window),d=a.top-o.top,f=o.bottom-a.bottom,g=a.left-o.left,N=o.right-a.right,{width:z,height:A}=a,{width:S,height:$}=o;return{top:d,bottom:f,left:g,right:N,width:z,height:A,halfWidth:z/2,halfHeight:A/2,windowWidth:S,windowHeight:$}},C=()=>{const a=Y(),o=l.left,d=a.windowWidth-l.right-a.width,f=l.top,g=a.windowHeight-l.bottom-a.height;return{minX:o,minY:f,maxX:o<d?d:o,maxY:f<g?g:f}},F=()=>{if(t.attraction==null)return;const{halfWidth:a,halfHeight:o,top:d,bottom:f,left:g,right:N}=Y(),{minX:z,minY:A,maxX:S,maxY:$}=C(),Q=g+a-l.left,G=N+a-l.right,J=d+o-l.top,K=f+o-l.bottom,Z=Q<=G,tt=J<=K;t.attraction.includes("x")&&(u.value=Z?z:S),t.attraction.includes("y")&&(c.value=tt?A:$)},R=()=>{const{minX:a,minY:o,maxX:d,maxY:f}=C();u.value=H(u.value,a,d),c.value=H(c.value,o,f)},P=()=>{const{top:a=0,bottom:o=0,left:d=0,right:f=0}=t.boundary;l.top=D(a),l.bottom=D(o),l.left=D(d),l.right=D(f)},q=()=>{const a=i.style??{};return{...i,style:{...a,top:n.value?0:a.top,left:n.value?0:a.left,right:n.value?"auto":a.right,bottom:n.value?"auto":a.bottom,transform:n.value?`translate(${u.value}px, ${c.value}px)`:a.transform}}},B=()=>{n.value&&(U(),R())},E=()=>{_.value=!1,n.value=!1,u.value=0,c.value=0};return st(()=>t.boundary,P),bt(B),et(()=>{P(),B()}),{drag:b,x:u,y:c,enableTransition:_,n:zt,classes:At,getAttrs:q,handleTouchstart:L,handleTouchmove:M,handleTouchend:j,resize:B,reset:E}}});function Xt(t,i,b,u,c,l){return I(),it(ft,{to:t.teleport},[dt("div",ct({ref:"drag",class:t.classes(t.n(),t.n("$--box"),[t.enableTransition,t.n("--transition")]),style:{"z-index":t.zIndex},onTouchstart:i[0]||(i[0]=(...n)=>t.handleTouchstart&&t.handleTouchstart(...n)),onTouchmove:i[1]||(i[1]=(...n)=>t.handleTouchmove&&t.handleTouchmove(...n)),onTouchend:i[2]||(i[2]=(...n)=>t.handleTouchend&&t.handleTouchend(...n)),onTouchcancel:i[3]||(i[3]=(...n)=>t.handleTouchend&&t.handleTouchend(...n))},t.getAttrs()),[ut(t.$slots,"default")],16)],8,["to"])}const x=lt(Dt,[["render",Xt]]);ot(x);const Yt={basicUse:"基本使用",direction:"拖拽方向",attraction:"吸附方向",xAttraction:"水平吸附",yAttraction:"垂直吸附",disabled:"禁用",boundary:"拖拽区域",reset:"重置位置"},Bt={basicUse:"Basic Use",direction:"Direction",attraction:"Attraction Direction",xAttraction:"X Attraction",yAttraction:"Y Attraction",disabled:"Disabled",boundary:"Boundary",reset:"Reset Position"},{add:V,use:Nt,pack:h,packs:Et,merge:Qt}=xt(),St=t=>{wt(t),Nt(t)};O("zh-CN",_t);O("en-US",Tt);V("zh-CN",Yt);V("en-US",Bt);const Gt={__name:"index",setup(t){const i=y(null),b=y(null),u=y(null),c=y(null),l=y(null),n=y(null);function _(){i.value.reset(),b.value.reset(),u.value.reset(),c.value.reset(),l.value.reset(),n.value.reset()}return pt(T=>{St(T),gt(()=>{i.value.resize(),b.value.resize(),u.value.resize(),c.value.resize(),l.value.resize(),n.value.resize()})}),mt(vt),(T,k)=>(I(),ht(yt,null,[r(e(w),{style:{height:"50px"}},{default:s(()=>[p(m(e(h).basicUse),1)]),_:1}),r(e(x),{ref_key:"drag",ref:i,style:{left:"15px",top:"105px"},boundary:{top:54}},{default:s(()=>[r(e(v),{type:"primary"},{default:s(()=>[p(m(e(h).basicUse),1)]),_:1})]),_:1},512),r(e(w),{style:{height:"50px","margin-top":"40px"}},{default:s(()=>[p(m(e(h).direction),1)]),_:1}),r(e(x),{ref_key:"drag2",ref:b,style:{left:"15px",top:"195px"},direction:"x",boundary:{top:54}},{default:s(()=>[r(e(v),{type:"primary"},{default:s(()=>[p(m(e(h).direction),1)]),_:1})]),_:1},512),r(e(w),{style:{height:"50px","margin-top":"40px"}},{default:s(()=>[p(m(e(h).attraction),1)]),_:1}),r(e(x),{ref_key:"drag3",ref:u,style:{left:"15px",top:"285px"},attraction:"x",boundary:{top:54}},{default:s(()=>[r(e(v),{type:"primary"},{default:s(()=>[p(m(e(h).xAttraction),1)]),_:1})]),_:1},512),r(e(x),{ref_key:"drag4",ref:c,style:{left:"132px",top:"285px"},attraction:"y",boundary:{top:54}},{default:s(()=>[r(e(v),{type:"primary"},{default:s(()=>[p(m(e(h).yAttraction),1)]),_:1})]),_:1},512),r(e(w),{style:{height:"50px","margin-top":"40px"}},{default:s(()=>[p(m(e(h).disabled),1)]),_:1}),r(e(x),{ref_key:"drag5",ref:l,style:{left:"15px",top:"375px"},disabled:"",attraction:"x",boundary:{top:54}},{default:s(()=>[r(e(v),{type:"primary",disabled:""},{default:s(()=>[p(m(e(h).disabled),1)]),_:1})]),_:1},512),r(e(w),{style:{height:"50px","margin-top":"40px"}},{default:s(()=>[p(m(e(h).boundary),1)]),_:1}),r(e(x),{ref_key:"drag6",ref:n,style:{left:"15px",top:"465px"},attraction:"x",boundary:{top:465,bottom:15,left:15,right:15}},{default:s(()=>[r(e(v),{type:"primary"},{default:s(()=>[p(m(e(h).boundary),1)]),_:1})]),_:1},512),r(e(w),{style:{height:"50px","margin-top":"40px"}},{default:s(()=>[p(m(e(h).reset),1)]),_:1}),r(e(v),{type:"primary",onClick:_},{default:s(()=>[p(m(e(h).reset),1)]),_:1})],64))}};export{Gt as default};
