import{L as q}from"./index-79d0afbe.js";import{v as A}from"./index-c9dfcb78.js";import{g as H,t as X}from"./elements-ccd135fd.js";import{d as w,e as Z,c as G,a as E}from"./components-1f4f7021.js";import{d as J,a as _,y as K,v as W,X as Y,n as ee,_ as te,p as ae,ag as ie,f as u,h as y,O as N,M as b,N as T,Q as l,q as s,j as I,D as oe,P as c,r as ne,aO as se,aa as le,aD as re,S as o,ap as t,au as k,F as B,ai as R,i as D}from"./vue-router-9a21bb19.js";import{d as de}from"./shared-74d59396.js";import{p as fe,u as ue,c as me,a as M,_ as pe,b as ge}from"./index-6af6eb53.js";import{C as F}from"./index-c1535835.js";import{a as z,T as ce}from"./index-9b5f4f55.js";import{T as ve}from"./index-323a7576.js";import{T as V}from"./index-a0f83b44.js";import{d as he}from"./index-dd768cde.js";import"./index-7c725d77.js";/* empty css               */import"./logger-525ef361.js";import"./index-3a75a5b5.js";import"./index-d5ec4337.js";import"./useChildren-82f3e770.js";import"./index-1618b4ee.js";import"./provide-1dba1cc4.js";import"./provide-73d9df72.js";import"./index-7dec75a8.js";const Te={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:w(),"onUpdate:loading":w(),"onUpdate:error":w()},{n:ke,classes:ye}=G("list"),Le=J({name:"VarList",directives:{Ripple:A},components:{VarLoading:q},props:Te,setup(e){const a=_(null),U=_(null);let m;const C=()=>{E(e["onUpdate:error"],!1),E(e["onUpdate:loading"],!0),E(e.onLoad)},v=()=>{const g=m===window?window.innerHeight:m.getBoundingClientRect().bottom,{bottom:x}=U.value.getBoundingClientRect();return Math.floor(x)-X(e.offset)<=g},p=()=>{m.removeEventListener("scroll",r)},r=async()=>{await ee();const{loading:g,finished:x,error:$}=e;!g&&!x&&!$&&v()&&C()};return Z(()=>{m=H(a.value),m.addEventListener("scroll",r),e.immediateCheck&&r()}),K(p),W(p),{pack:fe,listEl:a,detectorEl:U,dt:de,isNumber:Y,load:C,check:r,n:ke,classes:ye}}});function Ue(e,a,U,m,C,v){const p=ae("var-loading"),r=ie("ripple");return u(),y("div",{class:T(e.classes(e.n(),e.n("$--box"))),ref:"listEl"},[N(e.$slots,"default"),e.loading?N(e.$slots,"loading",{key:0},()=>[b("div",{class:T(e.n("loading"))},[b("div",{class:T(e.n("loading-text"))},l(e.dt(e.loadingText,e.pack.listLoadingText)),3),s(p,{size:"mini",radius:10})],2)]):I("",!0),e.finished?N(e.$slots,"finished",{key:1},()=>[b("div",{class:T(e.n("finished"))},l(e.dt(e.finishedText,e.pack.listFinishedText)),3)]):I("",!0),e.error?N(e.$slots,"error",{key:2},()=>[oe((u(),y("div",{class:T(e.n("error")),onClick:a[0]||(a[0]=(...g)=>e.load&&e.load(...g))},[c(l(e.dt(e.errorText,e.pack.listErrorText)),1)],2)),[[r]])]):I("",!0),b("div",{class:T(e.n("detector")),ref:"detectorEl"},null,2)],2)}const L=te(Le,[["render",Ue]]);L.install=function(e){e.component(L.name,L)};const Ce={basicUsage:"基本使用",loadFail:"加载失败",tipText:"提示文字",loadingText:"正在努力输出",errorText:"出错了出错了",finishedText:"一滴都没有了",listItem:"列表项"},xe={basicUsage:"Basic Usage",loadFail:"Load Fail",tipText:"Tip Text",loadingText:"loading QAQ",errorText:"error TNT",finishedText:"finished ORZ",listItem:"List Item"},{add:P,use:Ne,pack:f,packs:Ge,merge:Je}=ue(),be=e=>{me(e),Ne(e)};M("zh-CN",pe);M("en-US",ge);P("zh-CN",Ce);P("en-US",xe);const Ke={__name:"index",setup(e){const a=ne({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0}),{list:U,list2:m,list3:C,loading:v,loading2:p,loading3:r,finished:g,finished2:x,finished3:$,error:S,current:h}=se(a);function O(){if(a.current!==0){a.loading=!1;return}setTimeout(()=>{for(let d=0;d<20;d++)a.list.push(a.list.length+1);a.loading=!1,a.list.length>=60&&(a.finished=!0)},1e3)}function Q(){if(a.current!==1){a.loading2=!1;return}setTimeout(()=>{if(a.list2.length===40){a.error=!0,a.loading2=!1;return}for(let d=0;d<20;d++)a.list2.push(a.list2.length+1);a.loading2=!1},1e3)}function j(){if(a.current!==2){a.loading3=!1;return}setTimeout(()=>{for(let d=0;d<20;d++)a.list3.push(a.list3.length+1);a.loading3=!1,a.list3.length>=60&&(a.finished3=!0)},1e3)}return le(be),re(he),(d,n)=>(u(),y(B,null,[s(t(ce),{active:t(h),"onUpdate:active":n[0]||(n[0]=i=>k(h)?h.value=i:null),sticky:"","offset-top":"14.4vw",style:{"margin-bottom":"10px"}},{default:o(()=>[s(t(z),null,{default:o(()=>[c(l(t(f).basicUsage),1)]),_:1}),s(t(z),null,{default:o(()=>[c(l(t(f).loadFail),1)]),_:1}),s(t(z),null,{default:o(()=>[c(l(t(f).tipText),1)]),_:1})]),_:1},8,["active"]),s(t(ve),{active:t(h),"onUpdate:active":n[5]||(n[5]=i=>k(h)?h.value=i:null)},{default:o(()=>[s(t(V),null,{default:o(()=>[s(t(L),{finished:t(g),loading:t(v),"onUpdate:loading":n[1]||(n[1]=i=>k(v)?v.value=i:null),onLoad:O},{default:o(()=>[(u(!0),y(B,null,R(t(U),i=>(u(),D(t(F),{key:i},{default:o(()=>[c(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","loading"])]),_:1}),s(t(V),null,{default:o(()=>[s(t(L),{finished:t(x),error:t(S),"onUpdate:error":n[2]||(n[2]=i=>k(S)?S.value=i:null),loading:t(p),"onUpdate:loading":n[3]||(n[3]=i=>k(p)?p.value=i:null),onLoad:Q},{default:o(()=>[(u(!0),y(B,null,R(t(m),i=>(u(),D(t(F),{key:i},{default:o(()=>[c(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","error","loading"])]),_:1}),s(t(V),null,{default:o(()=>[s(t(L),{"loading-text":t(f).loadingText,"finished-text":t(f).finishedText,"error-text":t(f).errorText,finished:t($),loading:t(r),"onUpdate:loading":n[4]||(n[4]=i=>k(r)?r.value=i:null),onLoad:j},{default:o(()=>[(u(!0),y(B,null,R(t(C),i=>(u(),D(t(F),{key:i},{default:o(()=>[c(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["loading-text","finished-text","error-text","finished","loading"])]),_:1})]),_:1},8,["active"])],64))}};export{Ke as default};
