import{S as ae}from"./index-a1ee9ca0.js";import{d as F,a as u,b,E as re,_ as Y,f as m,i as le,S as C,M as K,O as j,P as N,Q as p,m as ie,aF as ce,w as de,e as ue,y as fe,Z as M,V as pe,h as g,F as q,ai as Q,N as O,R as P,o as he,ac as me,aB as ve,q as x,ap as y}from"./vue-router.esm-bundler-c0c92185.js";import{u as ye,a as ge,e as _e,f as be,c as Z,d as V,g as Ce,b as X}from"./components-49559557.js";import{e as ke}from"./shared-99660556.js";import{t as Te,e as Ie,b as xe,n as Ne,j as Be,d as H,h as Se,g as $e}from"./elements-4c784a6a.js";import{C as U}from"./index-4d4e11de.js";import{d as Ae}from"./index-59604d2c.js";import{u as Ee,c as we,a as G,_ as De,b as Oe}from"./index-cc42749a.js";import"./index-e169e100.js";import"./index-e0ccf07b.js";import"./index-67de6f11.js";/* empty css               */const J=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY"),W=Symbol("INDEX_BAR_COUNT_INDEX_ANCHOR_KEY");function ze(){const{bindChildren:e,childProviders:a}=ye(J),{length:o}=ge(W);return{length:o,indexAnchors:a,bindIndexAnchors:e}}function Pe(){const{parentProvider:e,bindParent:a}=_e(J),{index:o}=be(W);if(!e||!a)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:o,indexBar:e,bindIndexBar:a}}const Le={index:{type:[Number,String]}},{n:Re,classes:Me}=Z("index-anchor"),Ve=F({name:"VarIndexAnchor",components:{VarSticky:ae},inheritAttrs:!1,props:Le,setup(e){const{index:a,indexBar:o,bindIndexBar:f}=Pe(),c=u(0),n=u(!1),i=b(()=>e.index),s=u(null),{active:S,sticky:$,cssMode:_,stickyOffsetTop:k,zIndex:r}=o;return f({index:a,name:i,ownTop:c,setOwnTop:()=>{s.value&&(c.value=s.value.$el?s.value.$el.offsetTop:s.value.offsetTop)},setDisabled:T=>{n.value=T}}),{n:Re,classes:Me,name:i,anchorEl:s,active:S,sticky:$,zIndex:r,disabled:n,cssMode:_,stickyOffsetTop:k,Transition:re}}});function Xe(e,a,o,f,c,n){return m(),le(ce(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:C(()=>[K("div",ie({class:e.n()},e.$attrs),[j(e.$slots,"default",{},()=>[N(p(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}const He=Y(Ve,[["render",Xe]]),Ue={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:V(),onChange:V()},{n:Fe,classes:Ye}=Z("index-bar"),Ke=F({name:"VarIndexBar",props:Ue,setup(e){const{length:a,indexAnchors:o,bindIndexAnchors:f}=ze(),c=u(""),n=u(null),i=u([]),s=u(),S=b(()=>e.sticky),$=b(()=>e.cssMode),_=b(()=>Te(e.stickyOffsetTop)),k=b(()=>e.zIndex);let r=null;f({active:s,sticky:S,cssMode:$,stickyOffsetTop:_,zIndex:k});const A=(t,l)=>{const d=pe(t)?t.name.value:t;d===s.value||d===void 0||(s.value=d,(l==null?void 0:l.event)!==!1&&X(e.onChange,d))},E=()=>{if(!("getBoundingClientRect"in r))return 0;const{top:t}=r.getBoundingClientRect(),{scrollTop:l}=r,{top:d}=n.value.getBoundingClientRect();return l-t+d},T=()=>{const t=Se(r),l=r===window?document.body.scrollHeight:r.scrollHeight,d=E();o.forEach((h,v)=>{const w=h.ownTop.value,I=t-w+_.value-d,D=v===o.length-1?l:o[v+1].ownTop.value-h.ownTop.value;I>=0&&I<D&&c.value===""&&(v&&!e.cssMode&&o[v-1].setDisabled(!0),h.setDisabled(!1),A(h))})},L=async({anchorName:t,manualCall:l=!1,options:d})=>{if(l&&X(e.onClick,t),t===s.value)return;const h=o.find(({name:D})=>t===D.value);if(!h)return;const v=E(),w=h.ownTop.value-_.value+v,I=Ie(r);c.value=t,A(t,d),await xe(r,{left:I,top:w,animation:ke,duration:M(e.duration)}),Ne(()=>{c.value=""})},se=async()=>{await H(),r=$e(n.value)},te=()=>{r.addEventListener("scroll",T)},R=()=>{r.removeEventListener("scroll",T)},oe=(t,l)=>{Be(()=>L({anchorName:t,options:l}))};return de(()=>a.value,async()=>{await H(),o.forEach(({name:t,setOwnTop:l})=>{t.value&&i.value.push(t.value),l()})}),Ce(async()=>{await se(),te()}),ue(R),fe(R),{n:Fe,classes:Ye,barEl:n,active:s,zIndex:k,anchorNameList:i,toNumber:M,scrollTo:oe,anchorClick:L}}});const je=["onClick"];function qe(e,a,o,f,c,n){return m(),g("div",{class:O(e.n()),ref:"barEl"},[j(e.$slots,"default"),K("ul",{class:O(e.n("anchor-list")),style:P({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(m(!0),g(q,null,Q(e.anchorNameList,i=>(m(),g("li",{key:i,class:O(e.classes(e.n("anchor-item"),[e.active===i,e.n("anchor-item--active")])),style:P({color:e.active===i&&e.highlightColor?e.highlightColor:""}),onClick:s=>e.anchorClick({anchorName:i,manualCall:!0})},p(i),15,je))),128))],6)],2)}const B=Y(Ke,[["render",qe]]);B.install=function(e){e.component(B.name,B)};const Qe={title:"标题",text:"文本"},Ze={title:"Title",text:"Text"},{add:ee,use:Ge,pack:z,packs:pn,merge:hn}=Ee(),Je=e=>{we(e),Ge(e)};G("zh-CN",De);G("en-US",Oe);ee("zh-CN",Qe);ee("en-US",Ze);const We={class:"index-bar-example-container"},mn={setup(e){const a=u([]),o=u("#e7edf7"),f=u("#2e67ba");he(()=>{for(let n=0;n<26;n++)a.value.push(String.fromCharCode(65+n))});function c(n){console.log(n)}return me(Je),ve(Ae,n=>{o.value=n==="darkTheme"?"rgb(41, 42, 45)":"#e7edf7",f.value=n==="darkTheme"?"#3980e8":"#2e67ba"}),(n,i)=>(m(),g("div",We,[x(y(B),{onChange:c,duration:"300"},{default:C(()=>[(m(!0),g(q,null,Q(a.value,s=>(m(),g("div",{key:s},[x(He,{index:s,class:"index-bar-example-anchor",style:P({background:o.value,color:f.value})},{default:C(()=>[N(p(y(z).title)+" "+p(s),1)]),_:2},1032,["index","style"]),x(y(U),null,{default:C(()=>[N(p(s)+" "+p(y(z).text),1)]),_:2},1024),x(y(U),null,{default:C(()=>[N(p(s)+" "+p(y(z).text),1)]),_:2},1024)]))),128))]),_:1})]))}};export{mn as default};
