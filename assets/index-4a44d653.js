import{d as H,c as B,a as I,w as C}from"./components-1514d07f.js";import{t as P,g as R}from"./elements-e4756970.js";import{d as V,r as o,B as v,F as j,ap as G,aG as O,az as U,a5 as q,a1 as A,aH as D,af as M,j as J,_ as K,e as Q,l as X,m as Y,s as Z,t as g,v as F}from"./index-c1c53a77.js";const _={offsetTop:{type:[String,Number],default:0},zIndex:{type:[String,Number],default:10},cssMode:Boolean,disabled:Boolean,onScroll:H()},{n:ee,classes:oe}=B("sticky"),se=V({name:"VarSticky",props:_,setup(e){const i=o(null),l=o(null),a=o(!1),r=o("0px"),f=o("0px"),m=o("auto"),b=o("auto"),h=o("auto"),S=o("auto"),T=v(()=>!e.disabled&&e.cssMode),$=v(()=>!e.disabled&&!e.cssMode&&a.value),n=v(()=>P(e.offsetTop));let s;const x=()=>{const{cssMode:t,disabled:z}=e;if(z)return;let p=0;if(s!==window){const{top:N}=M(s);p=N}const w=l.value,u=i.value,{top:L,left:E}=M(u),y=L-p;return y<=n.value?(t||(m.value=`${u.offsetWidth}px`,b.value=`${u.offsetHeight}px`,r.value=`${p+n.value}px`,f.value=`${E}px`,h.value=`${w.offsetWidth}px`,S.value=`${w.offsetHeight}px`,a.value=!0),{offsetTop:n.value,isFixed:!0}):(a.value=!1,{offsetTop:y,isFixed:!1})},d=()=>{if(!s)return;const t=x();t&&I(e.onScroll,t.offsetTop,t.isFixed)},c=async()=>{a.value=!1,await D(),x()},k=async()=>{await J(),s=R(i.value),s!==window&&s.addEventListener("scroll",d),d()},W=()=>{s!==window&&s.removeEventListener("scroll",d)};return j(()=>e.disabled,c),G(k),O(W),U(c),q(()=>window,"scroll",d),{n:ee,classes:oe,resize:c,stickyEl:i,wrapperEl:l,isFixed:a,offsetTop:n,fixedTop:r,fixedLeft:f,fixedWidth:m,fixedHeight:b,fixedWrapperWidth:h,fixedWrapperHeight:S,enableCSSMode:T,enableFixedMode:$,toNumber:A}}});function ae(e,i,l,a,r,f){return Q(),X("div",{class:g(e.classes(e.n(),[e.enableCSSMode,e.n("--css-mode")])),ref:"stickyEl",style:F({zIndex:e.toNumber(e.zIndex),top:e.enableCSSMode?`${e.offsetTop}px`:void 0,width:e.enableFixedMode?e.fixedWidth:void 0,height:e.enableFixedMode?e.fixedHeight:void 0})},[Y("div",{class:g(e.n("wrapper")),ref:"wrapperEl",style:F({zIndex:e.toNumber(e.zIndex),position:e.enableFixedMode?"fixed":void 0,width:e.enableFixedMode?e.fixedWrapperWidth:void 0,height:e.enableFixedMode?e.fixedWrapperHeight:void 0,left:e.enableFixedMode?e.fixedLeft:void 0,top:e.enableFixedMode?e.fixedTop:void 0})},[Z(e.$slots,"default")],6)],6)}const te=K(se,[["render",ae]]);C(te);export{te as S,_ as p};
