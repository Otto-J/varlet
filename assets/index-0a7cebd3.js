import{L as X}from"./index-c61c53e3.js";import{v as Z}from"./index-e101a745.js";import{g as G,e as P,t as H}from"./elements-5ecd008f.js";import{d as F,e as J,c as K,a as R}from"./components-7bcea1d6.js";import{d as W,a as M,x as Y,u as ee,X as te,n as ae,_ as ie,p as se,ag as oe,f as n,h as L,O as S,M as $,N as T,Q as l,q as u,j as U,D as ne,P as c,r as le,aP as re,ab as de,aE as fe,w as ue,S as s,ao as t,av as k,F as B,i as y,ai as z}from"./vue-router-609def63.js";import{d as me}from"./shared-71dfa5a1.js";import{p as pe,u as ge,a as Q,_ as ce,b as ve,c as he}from"./index-4fabe892.js";import{C as D}from"./index-f8fdb594.js";import{a as V,T as Te}from"./index-6c167ba0.js";import{T as ke}from"./index-1eb955d7.js";import{T as _}from"./index-003fb8e5.js";import{d as ye}from"./index-dd768cde.js";import"./index-405029f5.js";/* empty css               */import"./logger-525ef361.js";import"./index-2c7b28ef.js";import"./index-2b057d6c.js";import"./useChildren-afa766b4.js";import"./index-c0f53868.js";import"./provide-f4a0e038.js";import"./provide-a67f321c.js";import"./index-0a6404a7.js";const Le={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:F(),"onUpdate:loading":F(),"onUpdate:error":F()},{n:Ue,classes:xe}=K("list"),be=W({name:"VarList",directives:{Ripple:Z},components:{VarLoading:X},props:Le,setup(e){const a=M(null),b=M(null);let p;const C=()=>{R(e["onUpdate:error"],!1),R(e["onUpdate:loading"],!0),R(e.onLoad)},v=()=>{const{bottom:g}=P(p),{bottom:N}=P(b.value);return Math.floor(N)-H(e.offset)<=g},m=()=>{p.removeEventListener("scroll",d)},d=async()=>{await ae();const{loading:g,finished:N,error:w}=e;!g&&!N&&!w&&v()&&C()};return J(()=>{p=G(a.value),p.addEventListener("scroll",d),e.immediateCheck&&d()}),Y(m),ee(m),{pack:pe,listEl:a,detectorEl:b,dt:me,isNumber:te,load:C,check:d,n:Ue,classes:xe}}});function Ce(e,a,b,p,C,v){const m=se("var-loading"),d=oe("ripple");return n(),L("div",{class:T(e.classes(e.n(),e.n("$--box"))),ref:"listEl"},[S(e.$slots,"default"),e.loading?S(e.$slots,"loading",{key:0},()=>[$("div",{class:T(e.n("loading"))},[$("div",{class:T(e.n("loading-text"))},l(e.dt(e.loadingText,e.pack.listLoadingText)),3),u(m,{size:"mini",radius:10})],2)]):U("",!0),e.finished?S(e.$slots,"finished",{key:1},()=>[$("div",{class:T(e.n("finished"))},l(e.dt(e.finishedText,e.pack.listFinishedText)),3)]):U("",!0),e.error?S(e.$slots,"error",{key:2},()=>[ne((n(),L("div",{class:T(e.n("error")),onClick:a[0]||(a[0]=(...g)=>e.load&&e.load(...g))},[c(l(e.dt(e.errorText,e.pack.listErrorText)),1)],2)),[[d]])]):U("",!0),$("div",{class:T(e.n("detector")),ref:"detectorEl"},null,2)],2)}const x=ie(be,[["render",Ce]]);x.install=function(e){e.component(x.name,x)};const Ne={basicUsage:"基本使用",loadFail:"加载失败",tipText:"提示文字",loadingText:"正在努力输出",errorText:"出错了出错了",finishedText:"一滴都没有了",listItem:"列表项"},Se={basicUsage:"Basic Usage",loadFail:"Load Fail",tipText:"Tip Text",loadingText:"loading QAQ",errorText:"error TNT",finishedText:"finished ORZ",listItem:"List Item"},{add:O,use:$e,pack:f,packs:We,merge:Ye}=ge(),Be=e=>{he(e),$e(e)};Q("zh-CN",ce);Q("en-US",ve);O("zh-CN",Ne);O("en-US",Se);const et={__name:"index",setup(e){const a=le({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0,actives:new Set}),{list:b,list2:p,list3:C,loading:v,loading2:m,loading3:d,finished:g,finished2:N,finished3:w,error:E,current:h,actives:I}=re(a);function j(){if(a.current!==0){a.loading=!1;return}setTimeout(()=>{for(let r=0;r<20;r++)a.list.push(a.list.length+1);a.loading=!1,a.list.length>=60&&(a.finished=!0)},1e3)}function q(){if(a.current!==1){a.loading2=!1;return}setTimeout(()=>{if(a.list2.length===40){a.error=!0,a.loading2=!1;return}for(let r=0;r<20;r++)a.list2.push(a.list2.length+1);a.loading2=!1},1e3)}function A(){if(a.current!==2){a.loading3=!1;return}setTimeout(()=>{for(let r=0;r<20;r++)a.list3.push(a.list3.length+1);a.loading3=!1,a.list3.length>=60&&(a.finished3=!0)},1e3)}return de(Be),fe(ye),ue(()=>a.current,r=>{a.actives.add(r)},{immediate:!0}),(r,o)=>(n(),L(B,null,[u(t(Te),{active:t(h),"onUpdate:active":o[0]||(o[0]=i=>k(h)?h.value=i:null),sticky:"","offset-top":"14.4vw",style:{"margin-bottom":"10px"}},{default:s(()=>[u(t(V),null,{default:s(()=>[c(l(t(f).basicUsage),1)]),_:1}),u(t(V),null,{default:s(()=>[c(l(t(f).loadFail),1)]),_:1}),u(t(V),null,{default:s(()=>[c(l(t(f).tipText),1)]),_:1})]),_:1},8,["active"]),u(t(ke),{active:t(h),"onUpdate:active":o[5]||(o[5]=i=>k(h)?h.value=i:null)},{default:s(()=>[u(t(_),null,{default:s(()=>[t(I).has(0)?(n(),y(t(x),{key:0,finished:t(g),loading:t(v),"onUpdate:loading":o[1]||(o[1]=i=>k(v)?v.value=i:null),onLoad:j},{default:s(()=>[(n(!0),L(B,null,z(t(b),i=>(n(),y(t(D),{key:i},{default:s(()=>[c(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","loading"])):U("",!0)]),_:1}),u(t(_),null,{default:s(()=>[t(I).has(1)?(n(),y(t(x),{key:0,finished:t(N),error:t(E),"onUpdate:error":o[2]||(o[2]=i=>k(E)?E.value=i:null),loading:t(m),"onUpdate:loading":o[3]||(o[3]=i=>k(m)?m.value=i:null),onLoad:q},{default:s(()=>[(n(!0),L(B,null,z(t(p),i=>(n(),y(t(D),{key:i},{default:s(()=>[c(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","error","loading"])):U("",!0)]),_:1}),u(t(_),null,{default:s(()=>[t(I).has(2)?(n(),y(t(x),{key:0,"loading-text":t(f).loadingText,"finished-text":t(f).finishedText,"error-text":t(f).errorText,finished:t(w),loading:t(d),"onUpdate:loading":o[4]||(o[4]=i=>k(d)?d.value=i:null),onLoad:A},{default:s(()=>[(n(!0),L(B,null,z(t(C),i=>(n(),y(t(D),{key:i},{default:s(()=>[c(l(t(f).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["loading-text","finished-text","error-text","finished","loading"])):U("",!0)]),_:1})]),_:1},8,["active"])],64))}};export{et as default};
