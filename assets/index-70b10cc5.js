import{d as P,a as F,b as z,w as I,o as H,_,p as h,D as K,H as Z,f as y,h as Q,M as S,N as f,O as g,P as B,Q as q,i as w,j as N,R as V,q as b,S as C,m as O,E as W,T as X,r as E,V as J,W as x,X as ee,Y as ne,Z as D,C as oe}from"./vue-router.esm-bundler-2d182057.js";import{p as m,L as te}from"./index-a9a1efe8.js";import{I as ae}from"./index-973b3d6e.js";import{u as se}from"./zIndex-ed110623.js";import{p as v,d as p,f as c,c as U,g as ie,m as re}from"./components-ff58a9f8.js";import{c as le}from"./index-08ca7f08.js";import{u as ce}from"./lock-d8eef6ad.js";function de(e){return["top","center","bottom"].includes(e)}function ue(e){return A.includes(e)}const j={type:{type:String,validator:ue},position:{type:String,default:"top",validator:de},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:v(m,"type"),loadingSize:v(m,"size"),loadingRadius:v(m,"radius"),loadingColor:{...v(m,"color"),default:"currentColor"},lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:String,default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:p(),onOpened:p(),onClose:p(),onClosed:p(),"onUpdate:show":p(),_update:{type:String}},{n:pe,classes:fe}=U("snackbar"),me={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},ve=P({name:"VarSnackbarCore",components:{VarLoading:te,VarIcon:ae},props:j,setup(e){const n=F(null),{zIndex:o}=se(()=>e.show,1);ce(()=>e.show,()=>e.lockScroll);const t=z(()=>e.type==="loading"||e.forbidClick),s=z(()=>e.type?me[e.type]:""),i=()=>{n.value=setTimeout(()=>{e.type!=="loading"&&c(e["onUpdate:show"],!1)},e.duration)};return I(()=>e.show,l=>{l?(c(e.onOpen),i()):l===!1&&(clearTimeout(n.value),c(e.onClose))}),I(()=>e._update,()=>{clearTimeout(n.value),i()}),H(()=>{e.show&&(c(e.onOpen),i())}),{SNACKBAR_TYPE:A,n:pe,classes:fe,zIndex:o,iconName:s,isForbidClick:t}}});function ye(e,n,o,t,s,i){const l=h("var-icon"),k=h("var-loading");return K((y(),Q("div",{class:f(e.n()),style:V({pointerEvents:e.isForbidClick?"auto":"none",zIndex:e.zIndex})},[S("div",{class:f(e.classes(e.n("wrapper"),e.n(`wrapper-${e.position}`),e.n("$-elevation--4"),[e.vertical,e.n("vertical")],[e.type&&e.SNACKBAR_TYPE.includes(e.type),e.n(`wrapper-${e.type}`)])),style:V({zIndex:e.zIndex})},[S("div",{class:f([e.n("content"),e.contentClass])},[g(e.$slots,"default",{},()=>[B(q(e.content),1)])],2),S("div",{class:f(e.n("action"))},[e.iconName?(y(),w(l,{key:0,name:e.iconName},null,8,["name"])):N("",!0),e.type==="loading"?(y(),w(k,{key:1,type:e.loadingType,size:e.loadingSize,color:e.loadingColor,radius:e.loadingRadius},null,8,["type","size","color","radius"])):N("",!0),g(e.$slots,"action")],2)],6)],6)),[[Z,e.show]])}const M=_(ve,[["render",ye]]);const{n:ge}=U("snackbar"),be=P({name:"VarSnackbar",components:{VarSnackbarCore:M},props:j,setup(){const{disabled:e}=ie();return{n:ge,disabled:e}}});function ke(e,n,o,t,s,i){const l=h("var-snackbar-core");return y(),w(X,{to:e.teleport,disabled:e.disabled},[b(W,{name:`${e.n()}-fade`,onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:C(()=>[b(l,O(e.$props,{class:e.n("transition")}),{action:C(()=>[g(e.$slots,"action")]),default:C(()=>[g(e.$slots,"default",{},()=>[B(q(e.content),1)])]),_:3},16,["class"])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to","disabled"])}const d=_(be,[["render",ke]]);function Se(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!oe(e)}const A=["loading","success","warning","info","error"];let L=0,$=!1,R,u=!1;const G={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}};let a=E([]),T=G;const Ce={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},he={setup(){return()=>{const e=a.map(({id:o,reactiveSnackOptions:t,_update:s})=>{const i=document.querySelector(".var-transition-group");t.forbidClick||t.type==="loading"?i.classList.add("var-pointer-auto"):i.classList.remove("var-pointer-auto"),u&&(t.position="top");const k={position:u?"relative":"absolute",...Te(t.position)};return b(M,O(t,{key:o,style:k,"data-id":o,_update:s,show:t.show,"onUpdate:show":Y=>t.show=Y}),null)}),n=le.zIndex;return b(ne,O(Ce,{style:{zIndex:n},onAfterEnter:we,onAfterLeave:Oe}),Se(e)?e:{default:()=>[e]})}}},r=function(e){const n=Ee(e),o=E({...T,...n});o.show=!0,$||($=!0,R=re(he).unmountInstance);const{length:t}=a,s={id:L++,reactiveSnackOptions:o};if(t===0||u)$e(s);else{const i=`update-${L}`;Ae(o,i)}return{clear(){!u&&a.length?a[0].reactiveSnackOptions.show=!1:o.show=!1}}};A.forEach(e=>{r[e]=n=>(J(n)?n.type=e:n={content:n,type:e},r(n))});r.install=function(e){e.component(d.name,d)};r.allowMultiple=function(e=!1){e!==u&&(a.forEach(n=>{n.reactiveSnackOptions.show=!1}),u=e)};r.clear=function(){a.forEach(e=>{e.reactiveSnackOptions.show=!1})};r.setDefaultOptions=function(e){T=e};r.resetDefaultOptions=function(){T=G};r.Component=d;function we(e){const n=e.getAttribute("data-id"),o=a.find(t=>t.id===D(n));o&&c(o.reactiveSnackOptions.onOpened)}function Oe(e){e.parentElement&&e.parentElement.classList.remove("var-pointer-auto");const n=e.getAttribute("data-id"),o=a.find(s=>s.id===D(n));o&&(o.animationEnd=!0,c(o.reactiveSnackOptions.onClosed)),a.every(s=>s.animationEnd)&&(c(R),a=E([]),$=!1)}function $e(e){a.push(e)}function Ee(e={}){return x(e)||ee(e)?{content:String(e)}:e}function Ae(e,n){const[o]=a;o.reactiveSnackOptions={...o.reactiveSnackOptions,...e},o._update=n}function Te(e="top"){return e==="bottom"?{[e]:"5%"}:{top:e==="top"?"5%":"45%"}}d.install=function(e){e.component(d.name,d)};const Be=r;export{Be as S};
