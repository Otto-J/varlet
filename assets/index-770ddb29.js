import{d as L,r as Z,B as I,F as z,ap as J,_ as P,b as C,O as X,Y as x,e as y,l as nn,m,t as p,s as d,P as q,Q as j,f as h,q as N,v as V,p as k,w as g,ao as O,T as en,aq as on,W as A,a2 as tn,ac as an,ar as sn,a1 as D,as as rn,am as ln}from"./index-4660ddd1.js";import{p as v,L as cn}from"./index-11dc6cc8.js";import{I as dn}from"./index-b025dd3f.js";import{u as un}from"./zIndex-b0118a5b.js";import{p as b,d as f,c as U,a as c,u as pn,m as fn,w as _}from"./components-3fe2275a.js";import{u as mn}from"./lock-a149038a.js";import{c as gn}from"./index-98d94cce.js";const F={type:String,position:{type:String,default:"top"},content:{type:[String,Function,Object]},contentClass:String,duration:{type:Number,default:3e3},vertical:Boolean,loadingType:b(v,"type"),loadingSize:b(v,"size"),loadingRadius:b(v,"radius"),loadingColor:{...b(v,"color"),default:"currentColor"},lockScroll:Boolean,show:Boolean,teleport:{type:[String,Object,Boolean],default:"body"},forbidClick:Boolean,onOpen:f(),onOpened:f(),onClose:f(),onClosed:f(),"onUpdate:show":f(),_update:String},{n:vn,classes:bn}=U("snackbar"),yn={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},kn=L({name:"VarSnackbarCore",components:{VarLoading:cn,VarIcon:dn},props:F,setup(n){const o=Z(null),{zIndex:e}=un(()=>n.show,1);mn(()=>n.show,()=>n.lockScroll);const s=I(()=>n.type==="loading"||n.forbidClick),t=I(()=>n.type?yn[n.type]:""),r=()=>{o.value=setTimeout(()=>{n.type!=="loading"&&c(n["onUpdate:show"],!1)},n.duration)};return z(()=>n.show,l=>{l?(c(n.onOpen),r()):l===!1&&(clearTimeout(o.value),c(n.onClose))}),z(()=>n._update,()=>{clearTimeout(o.value),r()}),J(()=>{n.show&&(c(n.onOpen),r())}),{SNACKBAR_TYPE:M,n:vn,classes:bn,zIndex:e,iconName:t,isForbidClick:s}}});function Sn(n,o,e,s,t,r){const l=C("var-icon"),S=C("var-loading");return X((y(),nn("div",{class:p(n.n()),style:V({pointerEvents:n.isForbidClick?"auto":"none",zIndex:n.zIndex})},[m("div",{class:p(n.classes(n.n("wrapper"),n.n(`wrapper-${n.position}`),n.n("$-elevation--4"),[n.vertical,n.n("vertical")],[n.type&&n.SNACKBAR_TYPE.includes(n.type),n.n(`wrapper-${n.type}`)])),style:V({zIndex:n.zIndex})},[m("div",{class:p([n.n("content"),n.contentClass])},[d(n.$slots,"default",{},()=>[q(j(n.content),1)])],2),m("div",{class:p([n.n("icon")])},[n.iconName?(y(),h(l,{key:0,name:n.iconName},null,8,["name"])):N("",!0),n.type==="loading"?(y(),h(S,{key:1,type:n.loadingType,size:n.loadingSize,color:n.loadingColor,radius:n.loadingRadius},null,8,["type","size","color","radius"])):N("",!0),d(n.$slots,"icon")],2),m("div",{class:p(n.n("action"))},[d(n.$slots,"action")],2)],6)],6)),[[x,n.show]])}const G=P(kn,[["render",Sn]]),{n:wn}=U("snackbar"),Cn=L({name:"VarSnackbar",components:{VarSnackbarCore:G},props:F,setup(){const{disabled:n}=pn();return{n:wn,disabled:n}}});function hn(n,o,e,s,t,r){const l=C("var-snackbar-core");return y(),h(on,{to:n.teleport===!1?void 0:n.teleport,disabled:n.disabled||n.teleport===!1},[k(en,{name:`${n.n()}-fade`,onAfterEnter:n.onOpened,onAfterLeave:n.onClosed},{default:g(()=>[k(l,O(n.$props,{class:n.n("transition")}),{icon:g(()=>[d(n.$slots,"icon")]),action:g(()=>[d(n.$slots,"action")]),default:g(()=>[d(n.$slots,"default",{},()=>[q(j(n.content),1)])]),_:3},16,["class"])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to","disabled"])}const E=P(Cn,[["render",hn]]);function On(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!rn(n)}const M=["loading","success","warning","info","error"];let B=0,$=!1,R,u=!1;const Y={type:void 0,content:"",icon:"",action:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}};let a=A([]),T=Y;const $n={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},w=n=>()=>ln(n)?n():n,An={setup(){return()=>{const n=a.map(({id:o,reactiveSnackOptions:e,_update:s})=>{const t=document.querySelector(".var-transition-group");e.forbidClick||e.type==="loading"?t.classList.add("var-pointer-auto"):t.classList.remove("var-pointer-auto"),u&&(e.position="top");const l={position:u?"relative":"absolute",...Vn(e.position)},{content:S,icon:K,action:H}=e,Q={default:w(S),icon:w(K),action:w(H)};return k(G,O(e,{key:o,style:l,"data-id":o,_update:s,show:e.show,"onUpdate:show":W=>e.show=W}),Q)});return k(sn,O($n,{style:{zIndex:gn.zIndex},onAfterEnter:En,onAfterLeave:Tn}),On(n)?n:{default:()=>[n]})}}},i=function(n){const o=zn(n),e=A({...T,...o});e.show=!0,$||($=!0,R=fn(An).unmountInstance);const{length:s}=a,t={id:B++,reactiveSnackOptions:e};if(s===0||u)In(t);else{const r=`update-${B}`;Nn(e,r)}return{clear(){!u&&a.length?a[0].reactiveSnackOptions.show=!1:e.show=!1}}};M.forEach(n=>{i[n]=o=>(tn(o)?o.type=n:o={content:o,type:n},i(o))});i.allowMultiple=function(n=!1){n!==u&&(a.forEach(o=>{o.reactiveSnackOptions.show=!1}),u=n)};i.clear=function(){a.forEach(n=>{n.reactiveSnackOptions.show=!1})};i.setDefaultOptions=function(n){T=n};i.resetDefaultOptions=function(){T=Y};function En(n){const o=n.getAttribute("data-id"),e=a.find(s=>s.id===D(o));e&&c(e.reactiveSnackOptions.onOpened)}function Tn(n){n.parentElement&&n.parentElement.classList.remove("var-pointer-auto");const o=n.getAttribute("data-id"),e=a.find(t=>t.id===D(o));e&&(e.animationEnd=!0,c(e.reactiveSnackOptions.onClosed)),a.every(t=>t.animationEnd)&&(c(R),a=A([]),$=!1)}function In(n){a.push(n)}function zn(n={}){return an(n)?{content:n}:n}function Nn(n,o){const[e]=a;e.reactiveSnackOptions={...e.reactiveSnackOptions,...n},e._update=o}function Vn(n="top"){return n==="bottom"?{[n]:"5%"}:{top:n==="top"?"5%":"45%"}}i.Component=E;_(E);_(E,i);const _n=i;export{_n as S};
