import{g as F,o as G,c as J,w as K}from"./logger-032ac2e3.js";import{b as H,t as y}from"./elements-ad81822f.js";import{d as Q,a as c,r as U,w as Z,aH as W,_,f as tt,i as et,M as ot,O as nt,m as at,T as st}from"./vue-router-34f02d24.js";import{o as lt}from"./onWindowResize-768d27b9.js";const rt={direction:{type:String,default:"xy"},attraction:{type:String},disabled:{type:Boolean,default:!1},boundary:{type:Object,default:()=>({top:0,bottom:0,left:0,right:0})},zIndex:{type:[Number,String],default:90},teleport:{type:[String,Object],default:"body"}},{n:it,classes:ut}=J("drag"),dt=Q({name:"VarDrag",inheritAttrs:!1,props:rt,setup(e,{attrs:r}){const w=c(null),i=c(0),u=c(0),s=U({top:0,bottom:0,left:0,right:0}),n=c(!1),h=c(!1),f=c(!1),{disabled:N}=F();let m=!1,g=0,v=0,T=null;const O=t=>{if(e.disabled)return;T&&window.clearTimeout(T);const{clientX:o,clientY:a}=t.touches[0];B(),g=o,v=a,m=!0,f.value=!1},A=async t=>{if(!m||e.disabled)return;t.preventDefault(),h.value=!1,n.value=!0,f.value=!0;const{clientX:o,clientY:a}=t.touches[0],l=o-g,d=a-v;g=o,v=a,e.direction.includes("x")&&(i.value+=l),e.direction.includes("y")&&(u.value+=d),S()},I=()=>{e.disabled||(m=!1,h.value=!0,P(),T=window.setTimeout(()=>{f.value=!1}))},B=()=>{const{left:t,top:o}=D();i.value=t,u.value=o},D=()=>{const t=H(w.value),o=H(window),a=t.top-o.top,l=o.bottom-t.bottom,d=t.left-o.left,Y=o.right-t.right,{width:b,height:p}=t,{width:$,height:x}=o;return{top:a,bottom:l,left:d,right:Y,width:b,height:p,halfWidth:b/2,halfHeight:p/2,windowWidth:$,windowHeight:x}},R=()=>{const t=D(),o=s.left,a=t.windowWidth-s.right-t.width,l=s.top,d=t.windowHeight-s.bottom-t.height;return{minX:o,minY:l,maxX:o<a?a:o,maxY:l<d?d:l}},P=()=>{if(e.attraction==null)return;const{halfWidth:t,halfHeight:o,top:a,bottom:l,left:d,right:Y}=D(),{minX:b,minY:p,maxX:$,maxY:x}=R(),M=d+t-s.left,V=Y+t-s.right,C=a+o-s.top,L=l+o-s.bottom,q=M<=V,E=C<=L;e.attraction.includes("x")&&(i.value=q?b:$),e.attraction.includes("y")&&(u.value=E?p:x)},S=()=>{const{minX:t,minY:o,maxX:a,maxY:l}=R();i.value=W(i.value,t,a),u.value=W(u.value,o,l)},z=()=>{const{top:t=0,bottom:o=0,left:a=0,right:l=0}=e.boundary;s.top=y(t),s.bottom=y(o),s.left=y(a),s.right=y(l)},j=()=>{const t=r.style??{};return{...r,style:{...t,top:n.value?0:t.top,left:n.value?0:t.left,right:n.value?"auto":t.right,bottom:n.value?"auto":t.bottom,transform:n.value?`translate(${i.value}px, ${u.value}px)`:t.transform}}},X=()=>{n.value&&(B(),S())},k=()=>{h.value=!1,n.value=!1,f.value=!1,i.value=0,u.value=0,m=!1,g=0,v=0};return Z(()=>e.boundary,z),lt(X),G(()=>{z(),X()}),{drag:w,x:i,y:u,enableTransition:h,dragging:f,teleportDisabled:N,n:it,classes:ut,getAttrs:j,handleTouchstart:O,handleTouchmove:A,handleTouchend:I,resize:X,reset:k}}});function ct(e,r,w,i,u,s){return tt(),et(st,{to:e.teleport,disabled:e.teleportDisabled},[ot("div",at({ref:"drag",class:e.classes(e.n(),e.n("$--box"),[e.enableTransition,e.n("--transition")]),style:{"z-index":e.zIndex},onTouchstart:r[0]||(r[0]=(...n)=>e.handleTouchstart&&e.handleTouchstart(...n)),onTouchmove:r[1]||(r[1]=(...n)=>e.handleTouchmove&&e.handleTouchmove(...n)),onTouchend:r[2]||(r[2]=(...n)=>e.handleTouchend&&e.handleTouchend(...n)),onTouchcancel:r[3]||(r[3]=(...n)=>e.handleTouchend&&e.handleTouchend(...n))},e.getAttrs()),[nt(e.$slots,"default")],16)],8,["to","disabled"])}const ft=_(dt,[["render",ct]]);K(ft);export{ft as D};
