import{S as oe}from"./index-3095c600.js";import{d as X,a as u,b,E as ae,_ as Y,f as v,i as re,S as k,M as j,O as q,P as B,Q as m,m as le,aH as ie,w as ce,e as de,y as ue,Z as R,V as fe,h as y,F as K,ai as Q,N as D,R as L,o as pe,ac as me,aC as ve,q as I,ap as h}from"./vue-router.esm-bundler-1e250ce9.js";import{u as he,c as Z,d as V,e as ye,a as H}from"./components-092ce17a.js";import{e as ge}from"./logger-525ef361.js";import{u as be}from"./useChildren-36e9566e.js";import{e as ke}from"./shared-ed6496a2.js";import{t as Ce,e as _e,b as Te,n as xe,j as Ie,d as U,h as Be,g as $e}from"./elements-9ac6e693.js";import{C as F}from"./index-e537c9c0.js";import{d as Se}from"./index-59604d2c.js";import{u as Ne,c as we,a as G,_ as Ae,b as Ee}from"./index-5cbfee55.js";import"./index-db0ed10e.js";import"./index-4a101be0.js";import"./index-fecbe149.js";/* empty css               */const J=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY");function ze(){const{bindChildren:e,length:l,childProviders:o}=be(J);return{length:l,indexAnchors:o,bindIndexAnchors:e}}function De(){const{parentProvider:e,index:l,bindParent:o}=he(J);return o||ge("IndexAnchor",'You should use this component in "IndexBar"'),{index:l,indexBar:e,bindIndexBar:o}}const Pe={index:{type:[Number,String]}},{n:Le,classes:Oe}=Z("index-anchor"),Me=X({name:"VarIndexAnchor",components:{VarSticky:oe},inheritAttrs:!1,props:Pe,setup(e){const{index:l,indexBar:o,bindIndexBar:f}=De(),c=u(0),n=u(!1),i=b(()=>e.index),s=u(null),{active:S,sticky:N,cssMode:g,stickyOffsetTop:C,zIndex:a}=o;return f({index:l,name:i,ownTop:c,setOwnTop:()=>{s.value&&(c.value=s.value.$el?s.value.$el.offsetTop:s.value.offsetTop)},setDisabled:_=>{n.value=_}}),{n:Le,classes:Oe,name:i,anchorEl:s,active:S,sticky:N,zIndex:a,disabled:n,cssMode:g,stickyOffsetTop:C,Transition:ae}}});function Re(e,l,o,f,c,n){return v(),re(ie(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:k(()=>[j("div",le({class:e.n()},e.$attrs),[q(e.$slots,"default",{},()=>[B(m(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}const Ve=Y(Me,[["render",Re]]),He={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:V(),onChange:V()},{n:Ue,classes:Fe}=Z("index-bar"),Xe=X({name:"VarIndexBar",props:He,setup(e){const{length:l,indexAnchors:o,bindIndexAnchors:f}=ze(),c=u(""),n=u(null),i=u([]),s=u(),S=b(()=>e.sticky),N=b(()=>e.cssMode),g=b(()=>Ce(e.stickyOffsetTop)),C=b(()=>e.zIndex);let a=null;f({active:s,sticky:S,cssMode:N,stickyOffsetTop:g,zIndex:C});const w=(t,r)=>{const d=fe(t)?t.name.value:t;d===s.value||d===void 0||(s.value=d,(r==null?void 0:r.event)!==!1&&H(e.onChange,d))},A=()=>{if(!("getBoundingClientRect"in a))return 0;const{top:t}=a.getBoundingClientRect(),{scrollTop:r}=a,{top:d}=n.value.getBoundingClientRect();return r-t+d},_=()=>{const t=Be(a),r=a===window?document.body.scrollHeight:a.scrollHeight,d=A();o.forEach((p,T)=>{const E=p.ownTop.value,x=t-E+g.value-d,z=T===o.length-1?r:o[T+1].ownTop.value-p.ownTop.value;p.setDisabled(!0),x>=0&&x<z&&c.value===""&&(p.setDisabled(!1),w(p))})},O=async({anchorName:t,manualCall:r=!1,options:d})=>{if(r&&H(e.onClick,t),t===s.value)return;const p=o.find(({name:z})=>t===z.value);if(!p)return;const T=A(),E=p.ownTop.value-g.value+T,x=_e(a);c.value=t,w(t,d),await Te(a,{left:x,top:E,animation:ke,duration:R(e.duration)}),xe(()=>{c.value=""})},ne=async()=>{await U(),a=$e(n.value)},se=()=>{a.addEventListener("scroll",_)},M=()=>{a.removeEventListener("scroll",_)},te=(t,r)=>{Ie(()=>O({anchorName:t,options:r}))};return ce(()=>l.value,async()=>{await U(),o.forEach(({name:t,setOwnTop:r})=>{t.value&&i.value.push(t.value),r()})}),ye(async()=>{await ne(),se()}),de(M),ue(M),{n:Ue,classes:Fe,barEl:n,active:s,zIndex:C,anchorNameList:i,toNumber:R,scrollTo:te,anchorClick:O}}});const Ye=["onClick"];function je(e,l,o,f,c,n){return v(),y("div",{class:D(e.n()),ref:"barEl"},[q(e.$slots,"default"),j("ul",{class:D(e.n("anchor-list")),style:L({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(v(!0),y(K,null,Q(e.anchorNameList,i=>(v(),y("li",{key:i,class:D(e.classes(e.n("anchor-item"),[e.active===i,e.n("anchor-item--active")])),style:L({color:e.active===i&&e.highlightColor?e.highlightColor:""}),onClick:s=>e.anchorClick({anchorName:i,manualCall:!0})},m(i),15,Ye))),128))],6)],2)}const $=Y(Xe,[["render",je]]);$.install=function(e){e.component($.name,$)};const qe={title:"标题",text:"文本"},Ke={title:"Title",text:"Text"},{add:W,use:Qe,pack:P,packs:pn,merge:mn}=Ne(),Ze=e=>{we(e),Qe(e)};G("zh-CN",Ae);G("en-US",Ee);W("zh-CN",qe);W("en-US",Ke);const Ge={class:"index-bar-example-container"},vn={setup(e){const l=u([]),o=u("#e7edf7"),f=u("#2e67ba");pe(()=>{for(let n=0;n<26;n++)l.value.push(String.fromCharCode(65+n))});function c(n){console.log(n)}return me(Ze),ve(Se,n=>{o.value=n==="darkTheme"?"rgb(41, 42, 45)":"#e7edf7",f.value=n==="darkTheme"?"#3980e8":"#2e67ba"}),(n,i)=>(v(),y("div",Ge,[I(h($),{onChange:c,duration:"300"},{default:k(()=>[(v(!0),y(K,null,Q(l.value,s=>(v(),y("div",{key:s},[I(Ve,{index:s,class:"index-bar-example-anchor",style:L({background:o.value,color:f.value})},{default:k(()=>[B(m(h(P).title)+" "+m(s),1)]),_:2},1032,["index","style"]),I(h(F),null,{default:k(()=>[B(m(s)+" "+m(h(P).text),1)]),_:2},1024),I(h(F),null,{default:k(()=>[B(m(s)+" "+m(h(P).text),1)]),_:2},1024)]))),128))]),_:1})]))}};export{vn as default};
