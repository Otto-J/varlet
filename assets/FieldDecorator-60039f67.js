import{I as O}from"./index-3a75a5b5.js";import{d as M,i as Q,c as Y,a as W}from"./components-1f4f7021.js";import{d as G,a as o,b as H,aM as J,aI as g,n as K,_ as U,p as X,f as i,h as u,M as a,N as l,O as w,R as d,P as Z,Q as B,j as k,i as _,F as x}from"./vue-router-9a21bb19.js";function ee(e){return["small","normal"].includes(e)}function le(e){return["outlined","standard"].includes(e)}const ne={value:{type:null,required:!0},id:{type:String,default:""},isFocus:{type:Boolean},size:{type:String,default:"normal",validator:ee},variant:{type:String,default:"standard",validator:le},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},errorMessage:{type:String},formDisabled:{type:Boolean},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},cursor:{type:String},composing:{type:Boolean,default:!1},alwaysCustomPlaceholder:{type:Boolean,default:!0},onClick:M(),onClear:M()},{n:S,classes:oe}=Y("field-decorator"),ae=G({name:"VarFieldDecorator",components:{VarIcon:O},props:ne,setup(e){const s=o(null),c=o(null),p=o(null),f=o(null),t=o(""),r=o(""),h=o(""),m=o(""),D=H(()=>e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor),V=()=>{const{hint:n,value:v,isFocus:y,composing:b}=e;if(!n&&(!g(v)||b))return S("--placeholder-hidden");if(n&&(!g(v)||y))return S("--placeholder-hint")},$=()=>{const{size:n,placeholder:v,hint:y,value:b,isFocus:I,variant:C}=e;K().then(()=>{var E,F;if(!p.value||!c.value||!f.value||C==="outlined"&&!s.value)return;if(!v){r.value="",t.value="",m.value="";return}if(y&&(!g(b)||I)){const T=`var(--field-decorator-outlined-${n}-placeholder-space)`,N=(E=window.getComputedStyle(p.value))==null?void 0:E.width,R=(F=window.getComputedStyle(f.value))==null?void 0:F.width;if(C==="outlined"){const{width:A,paddingLeft:j,paddingRight:q}=window.getComputedStyle(s.value);r.value=`calc(${N} * 0.75 + 2 * ${T})`,t.value=`calc(${A} - ${j} - ${q})`}const L=C==="outlined"?"-50%":"0";m.value=`translate(-${R}, ${L}) scale(0.75)`,h.value=window.getComputedStyle(c.value).width}else m.value="",r.value="",t.value=""})},z=n=>{W(e.onClear,n)},P=n=>{W(e.onClick,n)};return J($),Q(()=>window,"resize",$),{fieldsetEl:s,controllerEl:c,placeholderTextEl:p,prependIconEl:f,placeholderTransform:m,color:D,legendWidth:r,legendMaxWidth:t,controllerWidth:h,computePlaceholderState:V,n:S,classes:oe,isEmpty:g,handleClear:z,handleClick:P}}});const se=["for"];function re(e,s,c,p,f,t){const r=X("var-icon");return i(),u("div",{class:l(e.classes(e.n(),e.n("$--box"),e.n(`--${e.variant}`),[e.size==="small",e.n("--small")],[e.disabled,e.n("--disabled")])),style:d({"--field-decorator-legend-max-width":e.legendMaxWidth,"--filed-decorator-controller-width":e.controllerWidth}),onClick:s[0]||(s[0]=(...h)=>e.handleClick&&e.handleClick(...h))},[a("div",{class:l(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),ref:"controllerEl",style:d({color:e.color,cursor:e.cursor})},[a("div",{class:l(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")])),ref:"prependIconEl"},[w(e.$slots,"prepend-icon")],2),a("div",{class:l(e.classes(e.n("middle"),[!e.hint,e.n("--middle-non-hint")]))},[w(e.$slots,"default"),e.hint||e.alwaysCustomPlaceholder?(i(),u("label",{key:0,class:l(e.classes(e.n("placeholder"),e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[!e.hint,e.n("--placeholder-non-hint")],e.computePlaceholderState())),style:d({transform:e.placeholderTransform,color:e.color}),for:e.id},[Z(B(e.placeholder)+" ",1),a("span",{class:l(e.n("placeholder-text")),ref:"placeholderTextEl"},B(e.placeholder),3)],14,se)):k("",!0)],2),a("div",{class:l(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[e.clearable&&!e.isEmpty(e.value)?(i(),_(r,{key:0,class:l(e.n("clear-icon")),"var-field-decorator-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):k("",!0),w(e.$slots,"append-icon")],2)],6),e.line?(i(),u(x,{key:0},[e.variant==="outlined"?(i(),u("fieldset",{key:0,class:l(e.classes(e.n("line"),[e.isFocus,e.n("--line-focus")],[e.errorMessage,e.n("--line-error")],[e.formDisabled||e.disabled,e.n("--line-disabled")])),ref:"fieldsetEl"},[a("legend",{class:l(e.classes(e.n("line-legend"),[e.hint&&(!e.isEmpty(e.value)||e.isFocus),e.n("line-legend--hint")])),style:d({width:e.legendWidth,maxWidth:e.legendMaxWidth})},null,6)],2)):(i(),u("div",{key:1,class:l(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:d({background:e.errorMessage?void 0:e.blurColor})},[a("div",{class:l(e.classes(e.n("dot"),[e.isFocus,e.n("--line-focus")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:d({background:e.errorMessage?void 0:e.focusColor})},null,6)],6))],64)):k("",!0)],6)}const ce=U(ae,[["render",re]]);export{ce as V,ne as p};
