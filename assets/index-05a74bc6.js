import{I as q}from"./index-3bc654b7.js";import{h as Q,f as Z,g as G}from"./elements-082a3d5a.js";import{d as D,b as J,h as K,c as W,a as P}from"./components-12fee1b3.js";import{d as X,a as l,b as m,w as x,Z as w,_ as O,p as ee,f as h,h as Y,M as ae,q as te,N as C,R as oe,O as se,aC as ne,i as _,S as $,ap as B,ai as le,P as re,Q as ue,F as ce}from"./vue-router.esm-bundler-1e250ce9.js";import{C as ie}from"./index-685e79a2.js";import{d as de}from"./index-59604d2c.js";import"./shared-ed6496a2.js";import"./index-00a77c10.js";import"./index-fecbe149.js";/* empty css               */const ve={modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},animationDuration:{type:[Number,String],default:300},successDuration:{type:[Number,String],default:2e3},bgColor:{type:String},successBgColor:{type:String},color:{type:String},successColor:{type:String},target:{type:[String,Object]},onRefresh:D(),"onUpdate:modelValue":D()},{n:E,classes:fe}=W("pull-refresh"),L=150,me=X({name:"VarPullRefresh",components:{VarIcon:q},props:ve,setup(e){let o,c;const n=l(0),u=l(null),i=l(null),d=l(0),a=l(-999),r=l("arrow-down"),s=l("default"),v=l(!1);let b=0,p=0;const S=l(!0),I=m(()=>s.value!=="loading"&&s.value!=="success"&&!e.disabled),M=m(()=>({transform:`translate3d(0px, ${a.value}px, 0px) translate(-50%, 0)`,transition:v.value?`transform ${e.animationDuration}ms`:void 0,background:y.value?e.successBgColor:e.bgColor,color:y.value?e.successColor:e.color})),f=m(()=>Math.abs(2*n.value)),y=m(()=>s.value==="success"),A=()=>new Promise(t=>{window.setTimeout(()=>{S.value=!0,t()},L)}),N=t=>{("classList"in o?o:document.body).classList[t](`${E()}--lock`)},U=t=>{b=t.touches[0].clientY,p=0},R=t=>{if(!I.value)return;const T=Q(o);if(T>0)return;const V=T===0;p=t.touches[0].clientY-b,V&&p>=0&&t.preventDefault(),s.value!=="pulling"&&(s.value="pulling",d.value=t.touches[0].clientY),V&&a.value>n.value&&N("add");const k=(t.touches[0].clientY-d.value)/2+n.value;a.value=k>=f.value?f.value:k,a.value>=f.value*.2?(S.value=!1,r.value="refresh",c=A()):r.value="arrow-down"},z=async()=>{I.value&&(v.value=!0,a.value>=f.value*.2?(await c,s.value="loading",a.value=f.value*.3,P(e["onUpdate:modelValue"],!0),P(e.onRefresh),N("remove")):(s.value="loosing",r.value="arrow-down",a.value=n.value,setTimeout(()=>{v.value=!1,N("remove")},w(e.animationDuration))))},F=()=>{const{width:t}=i.value.getBoundingClientRect();a.value=-(t+t*.25),n.value=-(t+t*.25)},H=()=>{o=e.target?Z(e.target,"PullRefresh"):G(u.value)},j=()=>{setTimeout(()=>{s.value="default",r.value="arrow-down",v.value=!1},w(e.animationDuration))};return x(()=>e.modelValue,t=>{t===!1&&(v.value=!0,s.value="success",r.value="checkbox-marked-circle",setTimeout(()=>{a.value=n.value,j()},w(e.successDuration)))}),J(()=>{H(),F()}),K(u,"touchmove",R),{n:E,classes:fe,iconHasChanged:S,ICON_TRANSITION:L,refreshStatus:s,freshNode:u,controlNode:i,touchStart:U,touchMove:R,touchEnd:z,iconName:r,controlStyle:M,isSuccess:y}}});function he(e,o,c,n,u,i){const d=ee("var-icon");return h(),Y("div",{ref:"freshNode",class:C(e.n()),onTouchstart:o[0]||(o[0]=(...a)=>e.touchStart&&e.touchStart(...a)),onTouchend:o[1]||(o[1]=(...a)=>e.touchEnd&&e.touchEnd(...a)),onTouchcancel:o[2]||(o[2]=(...a)=>e.touchEnd&&e.touchEnd(...a))},[ae("div",{ref:"controlNode",class:C(e.classes(e.n("control"),e.n("$-elevation--2"),[e.isSuccess,e.n("control-success")])),style:oe(e.controlStyle)},[te(d,{name:e.iconName,transition:e.ICON_TRANSITION,class:C(e.classes(e.n("icon"),[e.refreshStatus==="loading"&&e.iconHasChanged,e.n("animation")])),"var-pull-refresh-cover":""},null,8,["name","transition","class"])],6),se(e.$slots,"default")],34)}const g=O(me,[["render",he]]);g.install=function(e){e.component(g.name,g)};const ge={setup(e){const o=Array(30).fill("List Item"),c=Array(30).fill("This is new List Item"),n=l(!1),u=l(o);function i(){setTimeout(()=>{u.value=u.value[0]==="List Item"?c:o,n.value=!1},2e3)}return ne(de),(d,a)=>(h(),_(B(g),{onRefresh:i,modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=r=>n.value=r),"success-duration":"2000"},{default:$(()=>[(h(!0),Y(ce,null,le(u.value,(r,s)=>(h(),_(B(ie),{key:s,border:""},{default:$(()=>[re(ue(r+" "+(s+1)),1)]),_:2},1024))),128))]),_:1},8,["modelValue"]))}},ke=O(ge,[["__scopeId","data-v-6f15a34c"]]);export{ke as default};
