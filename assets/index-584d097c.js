import{v as $}from"./index-aff1fff3.js";import{p as b,P as B}from"./index-9dcb36fc.js";import{I as R}from"./index-912d94e9.js";import{d as f,p as U,c as z,a as t,m as I,w as g}from"./components-aeaa916d.js";import{p as D}from"./index-a80496f6.js";import{d as N,r as V,F as q,_ as F,b as y,K as L,e as p,f as C,w as T,m,aq as S,s as w,t as c,Q as O,l as k,M as E,N as K,O as M,v as Q,q as W,af as j,W as G,n as H}from"./index-e417255e.js";const J={show:Boolean,title:String,actions:{type:Array,default:()=>[]},closeOnClickAction:{type:Boolean,default:!0},onSelect:f(),"onUpdate:show":f(),...U(b,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","safeArea","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"])},{name:X,n:Y,classes:Z}=z("action-sheet"),_=N({name:X,directives:{Ripple:$},components:{VarPopup:B,VarIcon:R},inheritAttrs:!1,props:J,setup(e){const a=V(!1);q(()=>e.show,n=>{a.value=n},{immediate:!0});function o(n){if(n.disabled)return;const{closeOnClickAction:h,onSelect:u}=e;t(u,n),h&&t(e["onUpdate:show"],!1)}function i(n){t(e["onUpdate:show"],n)}return{popupShow:a,pack:D,n:Y,classes:Z,handlePopupUpdateShow:i,handleSelect:o}}});const x=["onClick"];function ee(e,a,o,i,n,h){const u=y("var-icon"),A=y("var-popup"),P=L("ripple");return p(),C(A,S({class:e.n("popup-radius"),position:"bottom",show:e.popupShow,overlay:e.overlay,"overlay-class":e.overlayClass,"overlay-style":e.overlayStyle,"lock-scroll":e.lockScroll,"close-on-click-overlay":e.closeOnClickOverlay,teleport:e.teleport,"safe-area":e.safeArea},{"onUpdate:show":e.handlePopupUpdateShow},{onOpen:e.onOpen,onClose:e.onClose,onClosed:e.onClosed,onOpened:e.onOpened,onRouteChange:e.onRouteChange}),{default:T(()=>[m("div",S({class:e.classes(e.n(),e.n("$--box"))},e.$attrs),[w(e.$slots,"title",{},()=>[m("div",{class:c(e.n("title"))},O(e.title??e.pack.actionSheetTitle),3)]),w(e.$slots,"actions",{},()=>[(p(!0),k(E,null,K(e.actions,s=>M((p(),k("div",{class:c(e.classes(e.n("action-item"),s.className,[s.disabled,e.n("--disabled")])),key:s.name,style:Q({color:s.color}),onClick:ne=>e.handleSelect(s)},[s.icon?(p(),C(u,{key:0,class:c(e.n("action-icon")),"var-action-sheet-cover":"",name:s.icon,size:s.iconSize},null,8,["class","name","size"])):W("",!0),m("div",{class:c(e.n("action-name"))},O(s.name),3)],14,x)),[[P,{disabled:s.disabled}]])),128))])],16)]),_:3},16,["class","show","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","safe-area","onOpen","onClose","onClosed","onOpened","onRouteChange"])}const d=F(_,[["render",ee]]);let l,v={};function oe(e={}){return{...v,...e}}function r(e){return j()?new Promise(a=>{r.close();const o=G(oe(e));o.teleport="body",l=o;const{unmountInstance:i}=I(d,o,{onSelect:n=>{t(o.onSelect,n),a(n)},onClose:()=>{t(o.onClose),a("close")},onClosed:()=>{t(o.onClosed),i(),l===o&&(l=null)},onRouteChange:()=>{i(),l===o&&(l=null)},"onUpdate:show":n=>{o.show=n}});o.show=!0}):Promise.resolve()}r.setDefaultOptions=function(e){v=e};r.resetDefaultOptions=function(){v={}};r.close=function(){if(l!=null){const e=l;l=null,H().then(()=>{e.show=!1})}};r.Component=d;g(d);g(d,r);export{r as A};
