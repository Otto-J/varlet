import{d as U,g as Z,o as _,c as tt,a as et,w as ot}from"./logger-9a144f5d.js";import{b as C,t as v}from"./elements-1fb47fa1.js";import{d as nt,a as f,r as at,w as st,aH as R,_ as lt,f as it,i as rt,M as ut,O as dt,m as ct,T as ft}from"./vue-router-547718df.js";import{o as ht}from"./onWindowResize-4d20ed42.js";import{u as mt}from"./useTouch-4ef72608.js";const gt={direction:{type:String,default:"xy"},attraction:{type:String},disabled:{type:Boolean,default:!1},boundary:{type:Object,default:()=>({top:0,bottom:0,left:0,right:0})},zIndex:{type:[Number,String],default:90},teleport:{type:[String,Object,Boolean],default:"body"},onClick:U()},{n:vt,classes:bt}=tt("drag"),pt=nt({name:"VarDrag",inheritAttrs:!1,props:gt,setup(t,{attrs:a}){const b=f(null),r=f(0),u=f(0),s=at({top:0,bottom:0,left:0,right:0}),o=f(!1),h=f(!1),d=f(!1),{touching:S,moveX:z,moveY:H,startTouch:W,moveTouch:N,endTouch:O,resetTouch:P}=mt(),{disabled:A}=Z();let p=null;const I=e=>{t.disabled||(p&&window.clearTimeout(p),X(),W(e),d.value=!1)},j=async e=>{!S.value||t.disabled||(e.preventDefault(),h.value=!1,o.value=!0,d.value=!0,N(e),t.direction.includes("x")&&(r.value+=z.value),t.direction.includes("y")&&(u.value+=H.value),$())},x=()=>{t.disabled||(O(),h.value=!0,M(),p=window.setTimeout(()=>{d.value=!1}))},L=e=>{d.value||et(t.onClick,e)},X=()=>{const{left:e,top:n}=T();r.value=e,u.value=n},T=()=>{const e=C(b.value),n=C(window),i=e.top-n.top,l=n.bottom-e.bottom,c=e.left-n.left,w=n.right-e.right,{width:m,height:g}=e,{width:D,height:k}=n;return{top:i,bottom:l,left:c,right:w,width:m,height:g,halfWidth:m/2,halfHeight:g/2,windowWidth:D,windowHeight:k}},Y=()=>{const e=T(),n=s.left,i=e.windowWidth-s.right-e.width,l=s.top,c=e.windowHeight-s.bottom-e.height;return{minX:n,minY:l,maxX:n<i?i:n,maxY:l<c?c:l}},M=()=>{if(t.attraction==null)return;const{halfWidth:e,halfHeight:n,top:i,bottom:l,left:c,right:w}=T(),{minX:m,minY:g,maxX:D,maxY:k}=Y(),E=c+e-s.left,F=w+e-s.right,G=i+n-s.top,J=l+n-s.bottom,K=E<=F,Q=G<=J;t.attraction.includes("x")&&(r.value=K?m:D),t.attraction.includes("y")&&(u.value=Q?g:k)},$=()=>{const{minX:e,minY:n,maxX:i,maxY:l}=Y();r.value=R(r.value,e,i),u.value=R(u.value,n,l)},B=()=>{const{top:e=0,bottom:n=0,left:i=0,right:l=0}=t.boundary;s.top=v(e),s.bottom=v(n),s.left=v(i),s.right=v(l)},V=()=>{const e=a.style??{};return{...a,style:{...e,top:o.value?0:e.top,left:o.value?0:e.left,right:o.value?"auto":e.right,bottom:o.value?"auto":e.bottom,transform:o.value?`translate(${r.value}px, ${u.value}px)`:e.transform}}},y=()=>{o.value&&(X(),$())},q=()=>{h.value=!1,o.value=!1,d.value=!1,r.value=0,u.value=0,P()};return st(()=>t.boundary,B),ht(y),_(()=>{B(),y()}),{drag:b,x:r,y:u,enableTransition:h,dragging:d,teleportDisabled:A,n:vt,classes:bt,getAttrs:V,handleTouchstart:I,handleTouchmove:j,handleTouchend:x,handleClick:L,resize:y,reset:q}}});function Tt(t,a,b,r,u,s){return it(),rt(ft,{to:t.teleport===!1?void 0:t.teleport,disabled:t.teleportDisabled||t.teleport===!1},[ut("div",ct({ref:"drag",class:t.classes(t.n(),t.n("$--box"),[t.enableTransition,t.n("--transition")]),style:{"z-index":t.zIndex},onTouchstart:a[0]||(a[0]=(...o)=>t.handleTouchstart&&t.handleTouchstart(...o)),onTouchmove:a[1]||(a[1]=(...o)=>t.handleTouchmove&&t.handleTouchmove(...o)),onTouchend:a[2]||(a[2]=(...o)=>t.handleTouchend&&t.handleTouchend(...o)),onTouchcancel:a[3]||(a[3]=(...o)=>t.handleTouchend&&t.handleTouchend(...o)),onClick:a[4]||(a[4]=(...o)=>t.handleClick&&t.handleClick(...o))},t.getAttrs()),[dt(t.$slots,"default")],16)],8,["to","disabled"])}const yt=lt(pt,[["render",Tt]]);ot(yt);export{yt as D};
