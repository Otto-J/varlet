import{p as H,S as Q}from"./index-147ff509.js";import{d as X,a as l,b as s,w as p,v as _,G as x,X as ee,aK as ae,aL as oe,_ as K,f as G,i as te,S as ie,M as z,m as ne,N as B,O as Z,R as Y,aG as se,af as le,D as re,h as ce}from"./vue-router-40fc6ea4.js";import{p as R,d as P,f as de,c as O,a as $,w as j,u as ue}from"./components-08e741bd.js";import{l as M}from"./shared-ddca0f7e.js";import{a as fe,s as V}from"./elements-da0a4dab.js";import{o as ve}from"./onWindowResize-93bafcb2.js";import{v as me}from"./index-5abe00b9.js";import{e as be}from"./logger-525ef361.js";import{u as ye}from"./useChildren-9817f989.js";const Ce={active:{type:[String,Number],default:0},layoutDirection:{type:String,default:"horizontal"},itemDirection:{type:String,default:"horizontal"},fixedBottom:Boolean,activeColor:String,inactiveColor:String,disabledColor:String,color:String,indicatorColor:String,indicatorSize:[String,Number],elevation:{type:[Boolean,String,Number],default:!1},scrollable:{type:String,default:"auto"},indicatorPosition:{type:String,default:"normal"},safeArea:Boolean,sticky:Boolean,stickyCssMode:R(H,"cssMode"),stickyZIndex:R(H,"zIndex"),offsetTop:R(H,"offsetTop"),onClick:P(),onChange:P(),"onUpdate:active":P()},q=Symbol("TABS_BIND_TAB_KEY");function he(){const{childProviders:e,bindChildren:t,length:n}=ye(q);return{length:n,tabList:e,bindTabList:t}}const{n:$e,classes:pe}=O("tabs"),Se=X({name:"VarTabs",components:{VarSticky:Q},inheritAttrs:!1,props:Ce,setup(e){const t=l("0px"),n=l("0px"),c=l("0px"),d=l("0px"),i=l(!1),u=l(null),b=s(()=>e.active),w=s(()=>e.indicatorPosition==="reverse"?"-reverse":""),y=s(()=>e.activeColor),S=s(()=>e.inactiveColor),k=s(()=>e.disabledColor),N=s(()=>e.itemDirection),C=l(null),{tabList:f,bindTabList:g,length:v}=he(),A=o=>{const a=o.name.value??o.index.value,{active:m,onChange:h,onClick:J}=e;$(e["onUpdate:active"],a),$(J,a),a!==m&&$(h,a)},E=()=>f.find(({name:o})=>e.active===o.value),T=o=>f.find(({index:a})=>(o??e.active)===a.value),I=()=>{if(v.value===0)return;const{active:o}=e;if(ee(o)){const a=ae(o,0,v.value-1);return $(e["onUpdate:active"],a),T(a)}},L=()=>{i.value=e.scrollable==="always"||f.length>=5},U=({element:o})=>{const a=o.value;a&&(e.layoutDirection==="horizontal"?(t.value=`${a.offsetWidth}px`,c.value=`${a.offsetLeft}px`):(n.value=`${a.offsetHeight}px`,d.value=`${a.offsetTop}px`))},W=({element:o})=>{if(!i.value)return;const a=u.value,m=o.value;if(e.layoutDirection==="horizontal"){const h=m.offsetLeft+m.offsetWidth/2-a.offsetWidth/2;V(a,{left:h,animation:M})}else{const h=m.offsetTop+m.offsetHeight/2-a.offsetHeight/2;V(a,{top:h,animation:M})}},r=()=>{const o=E()||T()||I();!o||o.disabled.value||(L(),U(o),W(o))},F=async()=>{e.sticky&&C.value&&await C.value.resize()};return g({active:b,activeColor:y,inactiveColor:S,disabledColor:k,itemDirection:N,resize:r,onTabClick:A}),p(()=>v.value,async()=>{await oe(),r()}),p(()=>e.active,r),p(()=>e.scrollable,r),_(r),ve(r),{stickyComponent:C,indicatorWidth:t,indicatorHeight:n,indicatorX:c,indicatorY:d,indicatorPosition:w,localScrollable:i,scrollerEl:u,Transition:x,toSizeUnit:fe,n:$e,classes:pe,resize:r,resizeSticky:F,formatElevation:de}}});function ke(e,t,n,c,d,i){return G(),te(se(e.sticky?e.n("$-sticky"):e.Transition),{ref:e.sticky?"stickyComponent":void 0,"css-mode":e.sticky?e.stickyCssMode:void 0,"offset-top":e.sticky?e.offsetTop:void 0,"z-index":e.sticky?e.stickyZIndex:void 0},{default:ie(()=>[z("div",ne({class:e.classes(e.n(),e.n("$--box"),e.n(`--item-${e.itemDirection}`),e.n(`--layout-${e.layoutDirection}-padding`),e.formatElevation(e.elevation,4),[e.fixedBottom,e.n("--fixed-bottom")],[e.safeArea,e.n("--safe-area")]),style:{background:e.color}},e.$attrs),[z("div",{ref:"scrollerEl",class:B(e.classes(e.n("tab-wrap"),[e.localScrollable,e.n(`--layout-${e.layoutDirection}-scrollable`)],e.n(`--layout-${e.layoutDirection}`)))},[Z(e.$slots,"default"),z("div",{class:B(e.classes(e.n("indicator"),e.n(`--layout-${e.layoutDirection}${e.indicatorPosition}-indicator`))),style:Y({width:e.layoutDirection==="horizontal"?e.indicatorWidth:e.toSizeUnit(e.indicatorSize),height:e.layoutDirection==="horizontal"?e.toSizeUnit(e.indicatorSize):e.indicatorHeight,transform:e.layoutDirection==="horizontal"?`translateX(${e.indicatorX})`:`translateY(${e.indicatorY})`})},[z("div",{class:B(e.classes(e.n("indicator-inner"),e.n(`--layout-${e.layoutDirection}-indicator-inner`))),style:Y({background:e.indicatorColor||e.activeColor})},null,6)],6)],2)],16)]),_:3},8,["css-mode","offset-top","z-index"])}const ge=K(Se,[["render",ke]]);j(ge);const Te={name:[String,Number],disabled:Boolean,onClick:P()};function ze(){const{parentProvider:e,bindParent:t,index:n}=ue(q);return t||be("Tab","<var-tab/> must in <var-tabs/>"),{index:n,tabs:e,bindTabs:t}}const{n:D,classes:De}=O("tab"),Be=X({name:"VarTab",directives:{Ripple:me},props:Te,setup(e){const t=l(null),n=s(()=>e.name),c=s(()=>e.disabled),d=s(()=>t.value),{index:i,tabs:u,bindTabs:b}=ze(),{onTabClick:w,active:y,activeColor:S,inactiveColor:k,disabledColor:N,itemDirection:C,resize:f}=u,g={name:n,index:i,disabled:c,element:d};b(g);const v=()=>e.name!=null?y.value===e.name:y.value===(i==null?void 0:i.value),A=()=>e.disabled?N.value:v()?S.value:k.value,E=()=>e.disabled?D("$-tab--disabled"):v()?D("$-tab--active"):D("$-tab--inactive"),T=I=>{const{disabled:L,name:U,onClick:W}=e;L||($(W,U??i.value,I),w(g))};return p(()=>e.name,f),p(()=>e.disabled,f),{n:D,classes:De,tabEl:t,active:y,activeColor:S,inactiveColor:k,itemDirection:C,computeColorStyle:A,computeColorClass:E,handleClick:T}}});function Pe(e,t,n,c,d,i){const u=le("ripple");return re((G(),ce("div",{class:B(e.classes(e.n(),e.n("$--box"),e.computeColorClass(),e.n(`--${e.itemDirection}`))),ref:"tabEl",style:Y({color:e.computeColorStyle()}),onClick:t[0]||(t[0]=(...b)=>e.handleClick&&e.handleClick(...b))},[Z(e.$slots,"default")],6)),[[u,{disabled:e.disabled}]])}const we=K(Be,[["render",Pe]]);j(we);export{ge as T,we as a};
