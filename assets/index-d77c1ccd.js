import{F as c,u as x}from"./provide-ebfe80ab.js";import{I as _}from"./index-495e1c3a.js";import{d as t,j as ee,a as d,e as ne,c as oe}from"./components-f50e3d1b.js";import{d as ae,a as b,t as le,b as E,aI as C,n as se,Z as re,_ as de,p as N,f as m,h,M as p,N as r,O as P,j as F,R as g,Q as ie,i as te,q as ue}from"./vue-router.esm-bundler-1e250ce9.js";function me(e){return["text","password","number"].includes(e)}const pe={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:me},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:t(),onBlur:t(),onClick:t(),onClear:t(),onInput:t(),onChange:t(),"onUpdate:modelValue":t()},{n:k,classes:ge}=oe("input"),fe=ae({name:"VarInput",components:{VarIcon:_,VarFormDetails:c},props:pe,setup(e){const a=b(`var-input-${le().uid}`),y=b(null),f=b(!1),i=b(!1),S=E(()=>e.type==="number"?"text":e.type),v=E(()=>{const{maxlength:o,modelValue:l}=e;return o?C(l)?`0 / ${o}`:`${String(l).length}/${o}`:""}),{bindForm:B,form:n}=x(),{errorMessage:z,validateWithTrigger:O,validate:R,resetValidation:I}=ee(),u=o=>{se(()=>{const{validateTrigger:l,rules:s,modelValue:V}=e;O(l,o,s,V)})},U=()=>{const{hint:o,modelValue:l}=e;if(!o&&(!C(l)||i.value))return k("--placeholder-hidden");if(o&&(!C(l)||f.value))return k("--placeholder-hint")},j=o=>{f.value=!0,d(e.onFocus,o),u("onFocus")},A=o=>{f.value=!1,d(e.onBlur,o),u("onBlur")},T=o=>{const l=o.target;let{value:s}=l;return e.type==="number"&&(s=H(s)),K(J(s))},W=()=>{i.value=!0},q=o=>{i.value&&(i.value=!1,o.target.dispatchEvent(new Event("input")))},L=o=>{if(i.value)return;const l=T(o);d(e["onUpdate:modelValue"],l),d(e.onInput,l,o),u("onInput")},Q=o=>{const l=T(o);d(e.onChange,l,o),u("onChange")},Z=()=>{const{disabled:o,readonly:l,clearable:s,onClear:V}=e;n!=null&&n.disabled.value||n!=null&&n.readonly.value||o||l||!s||(d(e["onUpdate:modelValue"],""),d(V,""),u("onClear"))},G=o=>{const{disabled:l,onClick:s}=e;n!=null&&n.disabled.value||l||(d(s,o),u("onClick"))},H=o=>{const l=o.indexOf("-"),s=o.indexOf(".");return l>-1&&(o=l===0?"-"+o.replace(/-/g,""):o.replace(/-/g,"")),s>-1&&(o=o.slice(0,s+1)+o.slice(s).replace(/\./g,"")),o.replace(/[^-0-9.]/g,"")},J=o=>e.modelModifiers.trim?o.trim():o,K=o=>e.maxlength?o.slice(0,re(e.maxlength)):o,X=o=>{const{disabled:l,readonly:s}=e;n!=null&&n.disabled.value||n!=null&&n.readonly.value||l||s||o.stopPropagation()},w=()=>{d(e["onUpdate:modelValue"],""),I()},D=()=>R(e.rules,e.modelValue),$=()=>{var o;(o=y.value)==null||o.focus()},Y=()=>{y.value.blur()};return d(B,{reset:w,validate:D,resetValidation:I}),ne(()=>{e.autofocus&&$()}),{el:y,id:a,isFocus:f,isComposing:i,errorMessage:z,type:S,maxlengthText:v,formDisabled:n==null?void 0:n.disabled,formReadonly:n==null?void 0:n.readonly,n:k,classes:ge,isEmpty:C,computePlaceholderState:U,handleFocus:j,handleBlur:A,handleInput:L,handleChange:Q,handleClear:Z,handleClick:G,handleTouchstart:X,handleCompositionStart:W,handleCompositionEnd:q,validate:D,resetValidation:I,reset:w,focus:$,blur:Y}}});const he=["id","disabled","type","value","maxlength","rows"],ye=["id","disabled","type","value","maxlength"],be=["for"];function Ce(e,a,y,f,i,S){const v=N("var-icon"),B=N("var-form-details");return m(),h("div",{class:r(e.classes(e.n(),e.n("$--box"),[e.disabled,e.n("--disabled")])),onClick:a[14]||(a[14]=(...n)=>e.handleClick&&e.handleClick(...n))},[p("div",{class:r(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:g({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[p("div",{class:r(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[P(e.$slots,"prepend-icon")],2),p("div",{class:r(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},[e.type==="password"?(m(),h("input",{key:0,class:r(e.n("autocomplete"))},null,2)):F("",!0),e.textarea?(m(),h("textarea",{key:1,class:r(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:g({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:a[0]||(a[0]=(...n)=>e.handleFocus&&e.handleFocus(...n)),onBlur:a[1]||(a[1]=(...n)=>e.handleBlur&&e.handleBlur(...n)),onInput:a[2]||(a[2]=(...n)=>e.handleInput&&e.handleInput(...n)),onChange:a[3]||(a[3]=(...n)=>e.handleChange&&e.handleChange(...n)),onTouchstart:a[4]||(a[4]=(...n)=>e.handleTouchstart&&e.handleTouchstart(...n)),onCompositionstart:a[5]||(a[5]=(...n)=>e.handleCompositionStart&&e.handleCompositionStart(...n)),onCompositionend:a[6]||(a[6]=(...n)=>e.handleCompositionEnd&&e.handleCompositionEnd(...n))},`
        `,46,he)):(m(),h("input",{key:2,class:r(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:g({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor}),onFocus:a[7]||(a[7]=(...n)=>e.handleFocus&&e.handleFocus(...n)),onBlur:a[8]||(a[8]=(...n)=>e.handleBlur&&e.handleBlur(...n)),onInput:a[9]||(a[9]=(...n)=>e.handleInput&&e.handleInput(...n)),onChange:a[10]||(a[10]=(...n)=>e.handleChange&&e.handleChange(...n)),onTouchstart:a[11]||(a[11]=(...n)=>e.handleTouchstart&&e.handleTouchstart(...n)),onCompositionstart:a[12]||(a[12]=(...n)=>e.handleCompositionStart&&e.handleCompositionStart(...n)),onCompositionend:a[13]||(a[13]=(...n)=>e.handleCompositionEnd&&e.handleCompositionEnd(...n))},null,46,ye)),p("label",{class:r(e.classes(e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:g({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},ie(e.placeholder),15,be)],2),p("div",{class:r(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[P(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(m(),te(v,{key:0,class:r(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):F("",!0)])],2)],6),e.line?(m(),h("div",{key:0,class:r(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:g({background:e.errorMessage?void 0:e.blurColor})},[p("div",{class:r(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:g({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):F("",!0),ue(B,{"error-message":e.errorMessage,"extra-message":e.maxlengthText},null,8,["error-message","extra-message"])],2)}const M=de(fe,[["render",Ce]]);M.install=function(e){e.component(M.name,M)};export{M as I};
