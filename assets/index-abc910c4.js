import{d as Q,u as U,c as Z,a as _,w as tt}from"./components-c1e1aae1.js";import{t as g}from"./elements-4558e7ec.js";import{d as et,r as c,W as ot,b0 as nt,F as at,aB as st,ar as lt,ah as Y,aC as $,_ as rt,e as it,f as ut,m as dt,s as ct,aq as ht,as as ft}from"./index-e8376e61.js";const mt={direction:{type:String,default:"xy"},attraction:String,disabled:Boolean,boundary:{type:Object,default:()=>({top:0,bottom:0,left:0,right:0})},zIndex:{type:[Number,String],default:90},teleport:{type:[String,Object,Boolean],default:"body"},onClick:Q()},{n:gt,classes:vt}=Z("drag"),bt=et({name:"VarDrag",inheritAttrs:!1,props:mt,setup(t,{attrs:a}){const v=c(null),i=c(0),u=c(0),s=ot({top:0,bottom:0,left:0,right:0}),o=c(!1),h=c(!1),{touching:S,dragging:D,moveX:W,moveY:z,startTouch:R,moveTouch:H,endTouch:N,resetTouch:P}=nt(),{disabled:A}=U(),I=e=>{t.disabled||(R(e),k())},O=async e=>{!S.value||t.disabled||(H(e),e.preventDefault(),h.value=!1,o.value=!0,t.direction.includes("x")&&(i.value+=W.value),t.direction.includes("y")&&(u.value+=z.value),C())},j=()=>{t.disabled||(N(),h.value=!0,L())},x=e=>{D.value||_(t.onClick,e)},k=()=>{const{left:e,top:n}=b();i.value=e,u.value=n},b=()=>{const e=Y(v.value),n=Y(window),r=e.top-n.top,l=n.bottom-e.bottom,d=e.left-n.left,T=n.right-e.right,{width:f,height:m}=e,{width:y,height:w}=n;return{top:r,bottom:l,left:d,right:T,width:f,height:m,halfWidth:f/2,halfHeight:m/2,windowWidth:y,windowHeight:w}},B=()=>{const e=b(),n=s.left,r=e.windowWidth-s.right-e.width,l=s.top,d=e.windowHeight-s.bottom-e.height;return{minX:n,minY:l,maxX:n<r?r:n,maxY:l<d?d:l}},L=()=>{if(t.attraction==null)return;const{halfWidth:e,halfHeight:n,top:r,bottom:l,left:d,right:T}=b(),{minX:f,minY:m,maxX:y,maxY:w}=B(),F=d+e-s.left,M=T+e-s.right,E=r+n-s.top,G=l+n-s.bottom,J=F<=M,K=E<=G;t.attraction.includes("x")&&(i.value=J?f:y),t.attraction.includes("y")&&(u.value=K?m:w)},C=()=>{const{minX:e,minY:n,maxX:r,maxY:l}=B();i.value=$(i.value,e,r),u.value=$(u.value,n,l)},X=()=>{const{top:e=0,bottom:n=0,left:r=0,right:l=0}=t.boundary;s.top=g(e),s.bottom=g(n),s.left=g(r),s.right=g(l)},V=()=>{const e=a.style??{};return{...a,style:{...e,top:o.value?0:e.top,left:o.value?0:e.left,right:o.value?"auto":e.right,bottom:o.value?"auto":e.bottom,transform:o.value?`translate(${i.value}px, ${u.value}px)`:e.transform}}},p=()=>{o.value&&(k(),C())},q=()=>{P(),h.value=!1,o.value=!1,i.value=0,u.value=0};return at(()=>t.boundary,X),st(p),lt(()=>{X(),p()}),{drag:v,x:i,y:u,enableTransition:h,dragging:D,teleportDisabled:A,n:gt,classes:vt,getAttrs:V,handleTouchstart:I,handleTouchmove:O,handleTouchend:j,handleClick:x,resize:p,reset:q}}});function pt(t,a,v,i,u,s){return it(),ut(ft,{to:t.teleport===!1?void 0:t.teleport,disabled:t.teleportDisabled||t.teleport===!1},[dt("div",ht({ref:"drag",class:t.classes(t.n(),t.n("$--box"),[t.enableTransition,t.n("--transition")]),style:{"z-index":t.zIndex},onTouchstart:a[0]||(a[0]=(...o)=>t.handleTouchstart&&t.handleTouchstart(...o)),onTouchmove:a[1]||(a[1]=(...o)=>t.handleTouchmove&&t.handleTouchmove(...o)),onTouchend:a[2]||(a[2]=(...o)=>t.handleTouchend&&t.handleTouchend(...o)),onTouchcancel:a[3]||(a[3]=(...o)=>t.handleTouchend&&t.handleTouchend(...o)),onClick:a[4]||(a[4]=(...o)=>t.handleClick&&t.handleClick(...o))},t.getAttrs()),[ct(t.$slots,"default")],16)],8,["to","disabled"])}const Tt=rt(bt,[["render",pt]]);tt(Tt);export{Tt as D};
