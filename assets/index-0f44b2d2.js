import{M as ee}from"./index-3e23b397.js";import{v as ae}from"./index-48b82d81.js";import{I as le}from"./index-a59b997c.js";import{C as se}from"./index-62dad882.js";import{I as ie}from"./index-41d0ef98.js";import{d as T,f as ne,c as oe,a as U,w as re}from"./components-c1e1aae1.js";import{d as ue,r as V,a4 as r,B as I,F as D,ab as H,_ as te,b as N,K as de,e as d,l as f,O as S,t as u,s as F,p as y,b3 as O,m as $,P as q,Q as b,M as Q,N as R,w as L,f as me,L as pe,q as K}from"./index-e8376e61.js";import{p as ve}from"./index-926393f1.js";const fe={current:[Number,String],size:{type:[Number,String],default:10},total:{type:[Number,String],default:0},elevation:{type:[Boolean,Number,String],default:!0},maxPagerCount:{type:Number,default:3},disabled:Boolean,simple:{type:Boolean,default:!0},showSizeChanger:{type:Boolean,default:!0},showQuickJumper:Boolean,sizeOption:{type:Array,default:()=>[10,20,50,100]},showTotal:Function,onChange:T(),"onUpdate:current":T(),"onUpdate:size":T()},{n:be,classes:ge}=oe("pagination"),ke=ue({name:"VarPagination",components:{VarMenu:ee,VarIcon:le,VarCell:se,VarInput:ie},directives:{Ripple:ae},props:fe,setup(e){const s=V(!1),E=V(""),h=V("1"),C=V(!1),P=V(!1),i=V(r(e.current)||1),m=V(r(e.size)||10),M=V([]),c=I(()=>Math.ceil(e.maxPagerCount/2)),p=I(()=>Math.ceil(r(e.total)/r(m.value))),l=I(()=>{const a=m.value*(i.value-1)+1,o=Math.min(m.value*i.value,r(e.total));return[a,o]}),k=I(()=>e.showTotal?e.showTotal(r(e.total),l.value):""),w=(a,o)=>H(a)?!1:o===1?C.value:P.value,A=(a,o)=>H(a)?"basic":o===1?"head":"tail",j=(a,o)=>{if(!(a===i.value||e.disabled)){if(a==="..."){i.value=o===1?Math.max(i.value-e.maxPagerCount,1):Math.min(i.value+e.maxPagerCount,p.value);return}if(a==="prev"){i.value=B(i.value-1);return}if(a==="next"){i.value=B(i.value+1);return}H(a)&&(i.value=a)}},G=()=>{e.disabled||(s.value=!0)},W=a=>{m.value=a,s.value=!1;const o=B(i.value);h.value=String(o),i.value=o},B=a=>a>p.value?p.value:a<1?1:a,X=(a,o,g)=>{g.target.blur();const z=B(r(o));h.value=String(z),i.value=z,a==="quick"&&(E.value="")};return D([()=>e.current,()=>e.size],([a,o])=>{i.value=r(a)||1,m.value=r(o||10)}),D([i,m,p],([a,o,g],[z,Y])=>{let t=[];const{maxPagerCount:v,total:Z,onChange:x}=e,_=Math.ceil(r(Z)/r(Y)),J=g-(v-c.value)-1;if(h.value=`${a}`,g-2>v){if(z===void 0||g!==_)for(let n=2;n<v+2;n++)t.push(n);if(a<=v&&a<J){t=[];for(let n=1;n<v+1;n++)t.push(n+1);C.value=!0,P.value=!1}if(a>v&&a<J){t=[];for(let n=1;n<v+1;n++)t.push(a+n-c.value);C.value=a===2&&v===1,P.value=!1}if(a>=J){t=[];for(let n=1;n<v+1;n++)t.push(g-(v-n)-1);C.value=!1,P.value=!0}t=[1,"...",...t,"...",g]}else for(let n=1;n<=g;n++)t.push(n);M.value=t,z!=null&&g>0&&U(x,a,o),U(e["onUpdate:current"],a),U(e["onUpdate:size"],o)},{immediate:!0}),{n:be,classes:ge,pack:ve,current:i,menuVisible:s,size:m,pageCount:p,pageList:M,quickJumperValue:E,simpleCurrentValue:h,totalText:k,getMode:A,isHideEllipsis:w,clickItem:j,showMenu:G,clickSize:W,setPage:X,toNumber:r,formatElevation:ne}}});const Ve=["item-mode","onClick"];function ye(e,s,E,h,C,P){const i=N("var-icon"),m=N("var-input"),M=N("var-cell"),c=N("var-menu"),p=de("ripple");return d(),f("ul",{class:u(e.n())},[S((d(),f("li",{class:u(e.classes(e.n("item"),e.n("prev"),[e.current<=1||e.disabled,e.n("item--disabled")],[e.simple,e.n("item--simple"),e.formatElevation(e.elevation,2)])),onClick:s[0]||(s[0]=l=>e.clickItem("prev"))},[F(e.$slots,"prev",{},()=>[y(i,{name:"chevron-left"})])],2)),[[p,{disabled:e.current<=1||e.disabled}]]),e.simple?(d(),f("li",{key:0,class:u(e.classes(e.n("simple"),[e.disabled,e.n("item--disabled")]))},[y(m,{"var-pagination-cover":"",hint:!1,disabled:e.disabled,modelValue:e.simpleCurrentValue,"onUpdate:modelValue":s[1]||(s[1]=l=>e.simpleCurrentValue=l),onBlur:s[2]||(s[2]=l=>e.setPage("simple",e.simpleCurrentValue,l)),onKeydown:s[3]||(s[3]=O(l=>e.setPage("simple",e.simpleCurrentValue,l),["enter"]))},null,8,["disabled","modelValue"]),$("span",null,[q(" / "+b(e.pageCount)+" ",1),$("div",{class:u(e.n("simple-line"))},null,2)])],2)):(d(!0),f(Q,{key:1},R(e.pageList,(l,k)=>S((d(),f("li",{key:k,"item-mode":e.getMode(l,k),class:u(e.classes(e.n("item"),e.formatElevation(e.elevation,2),[l===e.current&&!e.disabled,e.n("item--active")],[e.isHideEllipsis(l,k),e.n("item--hide")],[e.disabled,e.n("item--disabled")],[l===e.current&&e.disabled,e.n("item--disabled--active")])),onClick:w=>e.clickItem(l,k)},[q(b(l),1)],10,Ve)),[[p,{disabled:e.disabled}]])),128)),S((d(),f("li",{class:u(e.classes(e.n("item"),e.n("next"),[e.current>=e.pageCount||e.disabled,e.n("item--disabled")],[e.simple,e.n("item--simple"),e.formatElevation(e.elevation,2)])),onClick:s[4]||(s[4]=l=>e.clickItem("next"))},[F(e.$slots,"next",{},()=>[y(i,{name:"chevron-right"})])],2)),[[p,{disabled:e.current>=e.pageCount||e.disabled}]]),e.showSizeChanger?(d(),f("li",{key:2,class:u(e.classes(e.n("size"),[e.disabled,e.n("item--disabled")]))},[y(c,{placement:"cover-top",disabled:e.disabled,show:e.menuVisible,"onUpdate:show":s[6]||(s[6]=l=>e.menuVisible=l)},{menu:L(()=>[(d(!0),f(Q,null,R(e.sizeOption,(l,k)=>S((d(),me(M,{class:u(e.classes(e.n("list"),[e.size===l,e.n("list--active")])),key:k,onClick:w=>e.clickSize(l)},{default:L(()=>[q(b(l)+b(e.pack.paginationItem)+" / "+b(e.pack.paginationPage),1)]),_:2},1032,["class","onClick"])),[[p]])),128))]),default:L(()=>[$("div",{class:u(e.classes(e.n("size--open"),[e.current<=1||e.disabled,e.n("size--open--disabled")])),onClick:s[5]||(s[5]=pe((...l)=>e.showMenu&&e.showMenu(...l),["stop"]))},[$("span",null,b(e.size)+b(e.pack.paginationItem)+" / "+b(e.pack.paginationPage),1),y(i,{class:u(e.n("size--open-icon")),"var-pagination-cover":"",name:"menu-down"},null,8,["class"])],2)]),_:1},8,["disabled","show"])],2)):K("",!0),e.showQuickJumper&&!e.simple?(d(),f("li",{key:3,class:u(e.classes(e.n("quickly"),[e.disabled,e.n("item--disabled")]))},[q(b(e.pack.paginationJump)+" ",1),y(m,{modelValue:e.quickJumperValue,"onUpdate:modelValue":s[7]||(s[7]=l=>e.quickJumperValue=l),disabled:e.disabled,"var-pagination-cover":"",onBlur:s[8]||(s[8]=l=>e.setPage("quick",e.quickJumperValue,l)),onKeydown:s[9]||(s[9]=O(l=>e.setPage("quick",e.quickJumperValue,l),["enter"]))},null,8,["modelValue","disabled"])],2)):K("",!0),e.totalText?(d(),f("li",{key:4,class:u(e.classes(e.n("total"),[e.disabled,e.n("item--disabled")]))},b(e.totalText),3)):K("",!0)],2)}const he=te(ke,[["render",ye]]);re(he);export{he as P};
