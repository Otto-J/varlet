import{S as re}from"./index-618caf40.js";import{a1 as le,a3 as ie,d as Y,r as f,B as k,T as ce,_ as q,e as h,f as de,w as _,m as K,aq as ue,s as W,P as B,Q as m,al as fe,F as pe,ar as me,b1 as ve,a9 as he,a8 as ye,a4 as H,j as L,aW as ge,a5 as be,ai as ke,ah as V,l as g,M as Q,N as G,t as P,v as O,o as _e,E as Ce,aj as Te,p as S,U as y}from"./index-176acade.js";import{e as xe}from"./logger-525ef361.js";import{c as J,d as X,a as j,w as Ie}from"./components-b6d07272.js";import{e as $e}from"./shared-2c6e324f.js";import{t as Se,e as Be,d as Ne,s as we,g as Ae}from"./elements-f77c96df.js";import{C as F}from"./index-3caa21ab.js";import{d as Ee}from"./index-ea9abee8.js";import{u as ze,b as Z,_ as De,c as Le,a as Pe}from"./index-07af7096.js";import"./index-44228c5c.js";import"./index-0f2d8f7b.js";import"./index-f4470989.js";/* empty css               */const ee=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY");function Me(){const{bindChildren:e,length:a,childProviders:t}=le(ee);return{length:a,indexAnchors:t,bindIndexAnchors:e}}function Oe(){const{parentProvider:e,index:a,bindParent:t}=ie(ee);return t||xe("IndexAnchor",'You should use this component in "IndexBar"'),{index:a,indexBar:e,bindIndexBar:t}}const Re={index:[Number,String]},{name:Ue,n:He,classes:Ve}=J("index-anchor"),Xe=Y({name:Ue,components:{VarSticky:re},inheritAttrs:!1,props:Re,setup(e){const a=f(0),t=f(!1),c=k(()=>e.index),s=f(null),{index:o,indexBar:d,bindIndexBar:i}=Oe(),{active:C,sticky:N,cssMode:v,stickyOffsetTop:w,zIndex:r}=d;i({index:o,name:c,ownTop:a,setOwnTop:A,setDisabled:T});function A(){s.value&&(a.value=s.value.$el?s.value.$el.offsetTop:s.value.offsetTop)}function T(x){t.value=x}return{n:He,classes:Ve,name:c,anchorEl:s,active:C,sticky:N,zIndex:r,disabled:t,cssMode:v,stickyOffsetTop:w,Transition:ce}}});function je(e,a,t,c,s,o){return h(),de(fe(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:_(()=>[K("div",ue({class:e.n()},e.$attrs),[W(e.$slots,"default",{},()=>[B(m(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}const Fe=q(Xe,[["render",je]]),Ye={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:Boolean,stickyCssMode:Boolean,hideList:Boolean,zIndex:{type:[Number,String],default:1},highlightColor:String,duration:{type:[Number,String],default:0},onClick:X(),onChange:X()},{name:qe,n:Ke,classes:We}=J("index-bar"),Qe=Y({name:qe,props:Ye,setup(e){const a=f(""),t=f(null),c=f([]),s=f(),o=k(()=>e.sticky),d=k(()=>e.stickyCssMode||e.cssMode),i=k(()=>Se(e.stickyOffsetTop)),C=k(()=>e.zIndex),{length:N,indexAnchors:v,bindIndexAnchors:w}=Me();let r=null,b=!1;const A={active:s,sticky:o,cssMode:d,stickyOffsetTop:i,zIndex:C};pe(()=>N.value,async()=>{await L(),v.forEach(({name:n,setOwnTop:l})=>{n.value&&c.value.push(n.value),l()})}),me(async()=>{await te(),ae()}),ve(U),he(()=>{b=!0,U()}),ye(()=>{!b||s.value===void 0||(E({anchorName:s.value,options:{event:!1}}),b=!1)}),w(A);function T(n,l){const u=be(n)?n.name.value:n;u===s.value||u===void 0||(s.value=u,(l==null?void 0:l.event)!==!1&&j(e.onChange,u))}function x(){if(ke(r))return 0;const{top:n}=V(r),{scrollTop:l}=r,{top:u}=V(t.value);return l-n+u}function R(){const n=Be(r),l=r===window?document.body.scrollHeight:r.scrollHeight,u=x();v.forEach((p,I)=>{const z=p.ownTop.value,$=n-z+i.value-u,D=I===v.length-1?l:v[I+1].ownTop.value-p.ownTop.value;p.setDisabled(!0),$>=0&&$<D&&a.value===""&&(p.setDisabled(!1),T(p))})}async function E({anchorName:n,manualCall:l=!1,options:u}){if(l&&j(e.onClick,n),n===s.value&&!b)return;const p=v.find(({name:D})=>n===D.value);if(!p)return;const I=x(),z=p.ownTop.value-i.value+I,$=Ne(r);a.value=n,T(n,u),await we(r,{left:$,top:z,animation:$e,duration:H(e.duration)}),await L(),a.value=""}async function te(){await L(),r=Ae(t.value)}function ae(){r.addEventListener("scroll",R)}function U(){r.removeEventListener("scroll",R)}function oe(n,l){ge(()=>E({anchorName:n,options:l}))}return{barEl:t,active:s,zIndex:C,anchorNameList:c,n:Ke,classes:We,toNumber:H,scrollTo:oe,anchorClick:E}}});const Ge=["onClick"];function Je(e,a,t,c,s,o){return h(),g("div",{class:P(e.n()),ref:"barEl"},[W(e.$slots,"default"),K("ul",{class:P(e.n("anchor-list")),style:O({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(h(!0),g(Q,null,G(e.anchorNameList,d=>(h(),g("li",{key:d,class:P(e.classes(e.n("anchor-item"),[e.active===d,e.n("anchor-item--active")])),style:O({color:e.active===d&&e.highlightColor?e.highlightColor:""}),onClick:i=>e.anchorClick({anchorName:d,manualCall:!0})},m(d),15,Ge))),128))],6)],2)}const ne=q(Qe,[["render",Je]]);Ie(ne);const Ze={title:"标题",text:"文本"},en={title:"Title",text:"Text"},{add:se,use:nn,pack:M,packs:gn,merge:bn}=ze(),sn=e=>{Pe(e),nn(e)};Z("zh-CN",De);Z("en-US",Le);se("zh-CN",Ze);se("en-US",en);const tn={class:"index-bar-example-container"},kn={__name:"index",setup(e){const a=f([]),t=f("#e7edf7"),c=f("#2e67ba");_e(()=>{for(let o=0;o<26;o++)a.value.push(String.fromCharCode(65+o))});function s(o){console.log(o)}return Ce(sn),Te(Ee,o=>{t.value=o==="darkTheme"?"rgb(41, 42, 45)":"#e7edf7",c.value=o==="darkTheme"?"#3980e8":"#2e67ba"}),(o,d)=>(h(),g("div",tn,[S(y(ne),{onChange:s,duration:"300"},{default:_(()=>[(h(!0),g(Q,null,G(a.value,i=>(h(),g("div",{key:i},[S(Fe,{index:i,class:"index-bar-example-anchor",style:O({background:t.value,color:c.value})},{default:_(()=>[B(m(y(M).title)+" "+m(i),1)]),_:2},1032,["index","style"]),S(y(F),null,{default:_(()=>[B(m(i)+" "+m(y(M).text),1)]),_:2},1024),S(y(F),null,{default:_(()=>[B(m(i)+" "+m(y(M).text),1)]),_:2},1024)]))),128))]),_:1})]))}};export{kn as default};
