import{p as I,S as _}from"./index-0d5bc24e.js";import{d as K,a as s,b as l,w,E as x,X as ee,_ as Z,f as O,i as te,S as ae,M as H,N as Y,O as j,R as q,m as oe,aH as ie,ag as ne,D as se,h as le}from"./vue-router.esm-bundler-54754668.js";import{p as U,d as B,l as re,c as F,b as k,g as ce}from"./components-f0507fff.js";import{l as M}from"./shared-ba8ca10e.js";import{a as de,d as ue,b as R}from"./elements-b2cfaeee.js";import{v as fe}from"./index-218c2a2d.js";import{u as ve}from"./useChildren-a89a72f6.js";function X(e){return["horizontal","vertical"].includes(e)}const me={active:{type:[String,Number],default:0},layoutDirection:{type:String,default:"horizontal",validator:X},itemDirection:{type:String,default:"horizontal",validator:X},fixedBottom:{type:Boolean,default:!1},activeColor:{type:String},inactiveColor:{type:String},disabledColor:{type:String},color:{type:String},indicatorColor:{type:String},indicatorSize:{type:[String,Number]},elevation:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},stickyCssMode:U(I,"cssMode"),stickyZIndex:U(I,"zIndex"),offsetTop:U(I,"offsetTop"),safeArea:{type:Boolean,default:!1},onClick:B(),onChange:B(),"onUpdate:active":B()},G=Symbol("TABS_BIND_TAB_KEY");function be(){const{childProviders:e,bindChildren:o,length:n}=ve(G);return{length:n,tabList:e,bindTabList:o}}const{n:ye,classes:pe}=F("tabs"),Ce=K({name:"VarTabs",components:{VarSticky:_},inheritAttrs:!1,props:me,setup(e){const o=s("0px"),n=s("0px"),f=s("0px"),v=s("0px"),i=s(!1),m=s(null),y=l(()=>e.active),E=l(()=>e.activeColor),r=l(()=>e.inactiveColor),g=l(()=>e.disabledColor),S=l(()=>e.itemDirection),p=s(null),{tabList:C,bindTabList:T,length:c}=be(),N=a=>{const t=a.name.value??a.index.value,{active:b,onChange:$,onClick:Q}=e;k(e["onUpdate:active"],t),k(Q,t),t!==b&&k($,t)},P=()=>C.find(({name:a})=>e.active===a.value),z=a=>C.find(({index:t})=>(a??e.active)===t.value),d=()=>{if(c.value===0)return;const{active:a}=e;if(ee(a)){const t=a>c.value-1?c.value-1:0;return k(e["onUpdate:active"],t),z(t)}},u=()=>{i.value=C.length>=5},L=({element:a})=>{const t=a.value;t&&(e.layoutDirection==="horizontal"?(o.value=`${t.offsetWidth}px`,f.value=`${t.offsetLeft}px`):(n.value=`${t.offsetHeight}px`,v.value=`${t.offsetTop}px`))},A=({element:a})=>{if(!i.value)return;const t=m.value,b=a.value;if(e.layoutDirection==="horizontal"){const $=b.offsetLeft+b.offsetWidth/2-t.offsetWidth/2;R(t,{left:$,animation:M})}else{const $=b.offsetTop+b.offsetHeight/2-t.offsetHeight/2;R(t,{top:$,animation:M})}},h=()=>{const a=P()||z()||d();!a||a.disabled.value||(u(),L(a),A(a))},J=async()=>{e.sticky&&p.value&&await p.value.resize()};return T({active:y,activeColor:E,inactiveColor:r,disabledColor:g,itemDirection:S,resize:h,onTabClick:N}),w(()=>c.value,async()=>{await ue(),h()}),w(()=>e.active,h),re(window,"resize",h),{stickyComponent:p,indicatorWidth:o,indicatorHeight:n,indicatorX:f,indicatorY:v,scrollable:i,scrollerEl:m,Transition:x,toSizeUnit:de,n:ye,classes:pe,resize:h,resizeSticky:J}}});function he(e,o,n,f,v,i){return O(),te(ie(e.sticky?e.n("$-sticky"):e.Transition),{ref:e.sticky?"stickyComponent":void 0,"css-mode":e.sticky?e.stickyCssMode:void 0,"offset-top":e.sticky?e.offsetTop:void 0,"z-index":e.sticky?e.stickyZIndex:void 0},{default:ae(()=>[H("div",oe({class:e.classes(e.n(),e.n("$--box"),e.n(`--item-${e.itemDirection}`),e.n(`--layout-${e.layoutDirection}-padding`),[e.elevation,e.n("$-elevation--4")],[e.fixedBottom,e.n("--fixed-bottom")],[e.safeArea,e.n("--safe-area")]),style:{background:e.color}},e.$attrs),[H("div",{ref:"scrollerEl",class:Y(e.classes(e.n("tab-wrap"),[e.scrollable,e.n(`--layout-${e.layoutDirection}-scrollable`)],e.n(`--layout-${e.layoutDirection}`)))},[j(e.$slots,"default"),H("div",{class:Y(e.classes(e.n("indicator"),e.n(`--layout-${e.layoutDirection}-indicator`))),style:q({width:e.layoutDirection==="horizontal"?e.indicatorWidth:e.toSizeUnit(e.indicatorSize),height:e.layoutDirection==="horizontal"?e.toSizeUnit(e.indicatorSize):e.indicatorHeight,transform:e.layoutDirection==="horizontal"?`translateX(${e.indicatorX})`:`translateY(${e.indicatorY})`,background:e.indicatorColor||e.activeColor})},null,6)],2)],16)]),_:3},8,["css-mode","offset-top","z-index"])}const V=Z(Ce,[["render",he]]);V.install=function(e){e.component(V.name,V)};const $e={name:{type:[String,Number]},disabled:{type:Boolean,default:!1},onClick:B()};function ke(){const{parentProvider:e,bindParent:o,index:n}=ce(G);if(!e||!o||!n)throw Error("<var-tab/> must in <var-tabs/>");return{index:n,tabs:e,bindTabs:o}}const{n:D,classes:ge}=F("tab"),Se=K({name:"VarTab",directives:{Ripple:fe},props:$e,setup(e){const o=s(null),n=l(()=>e.name),f=l(()=>e.disabled),v=l(()=>o.value),{index:i,tabs:m,bindTabs:y}=ke(),{onTabClick:E,active:r,activeColor:g,inactiveColor:S,disabledColor:p,itemDirection:C,resize:T}=m,c={name:n,index:i,disabled:f,element:v};y(c);const N=()=>{const{disabled:d,name:u}=e;return d?p.value:r.value===u||r.value===(i==null?void 0:i.value)?g.value:S.value},P=()=>{const{disabled:d,name:u}=e;return d?D("$-tab--disabled"):r.value===u||r.value===(i==null?void 0:i.value)?D("$-tab--active"):D("$-tab--inactive")},z=d=>{const{disabled:u,name:L,onClick:A}=e;u||(k(A,L??i.value,d),E(c))};return w(()=>e.name,T),w(()=>e.disabled,T),{n:D,classes:ge,tabEl:o,active:r,activeColor:g,inactiveColor:S,itemDirection:C,computeColorStyle:N,computeColorClass:P,handleClick:z}}});function Te(e,o,n,f,v,i){const m=ne("ripple");return se((O(),le("div",{class:Y(e.classes(e.n(),e.n("$--box"),e.computeColorClass(),e.n(`--${e.itemDirection}`))),ref:"tabEl",style:q({color:e.computeColorStyle()}),onClick:o[0]||(o[0]=(...y)=>e.handleClick&&e.handleClick(...y))},[j(e.$slots,"default")],6)),[[m,{disabled:e.disabled}]])}const W=Z(Se,[["render",Te]]);W.install=function(e){e.component(W.name,W)};export{V as T,W as a};
