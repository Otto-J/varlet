import{I as q}from"./index-16bfcccc.js";import{d as z,e as O,i as Q,c as Y,a as D}from"./components-e6984121.js";import{d as A,a as i,b as E,aI as S,w as V,_ as G,p as H,f as n,h as d,M as o,N as l,O as k,R as t,Q as T,j as c,i as J,F as K}from"./vue-router-8b9a9ee5.js";function U(e){return["small","normal"].includes(e)}function X(e){return["outlined","standard"].includes(e)}const Z={value:{type:null,required:!0},id:{type:String,default:""},isFocus:{type:Boolean},size:{type:String,default:"normal",validator:U},variant:{type:String,default:"standard",validator:X},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},errorMessage:{type:String},formDisabled:{type:Boolean},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},cursor:{type:String},composing:{type:Boolean,default:!1},alwaysCustomPlaceholder:{type:Boolean,default:!0},onClick:z(),onClear:z()},{n:P,classes:_}=Y("field-decorator"),x=A({name:"VarFieldDecorator",components:{VarIcon:q},props:Z,setup(e){const s=i(null),f=i(null),h=i(null),p=i(""),u=i(""),r=i(""),m=E(()=>e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor),v=E(()=>e.hint&&(!S(e.value)||e.isFocus)),R=()=>{const{hint:a,value:C,composing:b}=e;if(!a&&(!S(C)||b))return P("--placeholder-hidden")};let F=null,g=null,w=null,B=null;const W=()=>{F=s.value.getBoundingClientRect(),g=f.value.getBoundingClientRect(),w=window.getComputedStyle(s.value),e.variant==="outlined"&&(B=window.getComputedStyle(h.value))},M=()=>{const{size:a,hint:C,placeholder:b,variant:$}=e;if(!v.value||!b){u.value=C?`translate(${g.left-F.left}px, calc(var(--field-decorator-${$}-${a}-placeholder-translate-y) + var(--field-decorator-middle-offset-y))) scale(1)`:"",r.value=`${g.width}px`;return}const L=$==="outlined"?"-50%":"0";if(u.value=`translate(${w.paddingLeft}, ${L}) scale(0.75)`,$==="outlined"){const j=`var(--field-decorator-outlined-${a}-placeholder-space)`;p.value=`calc(${B.width} * 0.75 + ${j} * 2)`,r.value=`calc((100% - var(--field-decorator-outlined-${a}-padding-left) - var(--field-decorator-outlined-${a}-padding-right)) * 1.33)`}else r.value="133%"},I=a=>{D(e.onClear,a)},N=a=>{D(e.onClick,a)},y=()=>{W(),M()};return V(()=>[e.size,e.placeholder,e.hint,e.value,e.variant],y),O(y),Q(()=>window,"resize",y),V(v,M),{controllerEl:s,middleEl:f,placeholderTextEl:h,placeholderTransform:u,placeholderMaxWidth:r,color:m,legendWidth:p,isFloating:v,computePlaceholderState:R,n:P,classes:_,isEmpty:S,handleClear:I,handleClick:N}}});const ee=["for"];function le(e,s,f,h,p,u){const r=H("var-icon");return n(),d("div",{class:l(e.classes(e.n(),e.n("$--box"),e.n(`--${e.variant}`),[e.size==="small",e.n("--small")],[e.disabled,e.n("--disabled")])),onClick:s[0]||(s[0]=(...m)=>e.handleClick&&e.handleClick(...m))},[o("div",{class:l(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),ref:"controllerEl",style:t({color:e.color,cursor:e.cursor,overflow:e.isFloating?"visible":"hidden"})},[o("div",{class:l(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[k(e.$slots,"prepend-icon")],2),o("div",{ref:"middleEl",class:l(e.classes(e.n("middle"),[!e.hint,e.n("--middle-non-hint")]))},[k(e.$slots,"default")],2),(e.hint?e.placeholderTransform:e.alwaysCustomPlaceholder)?(n(),d("label",{key:0,class:l(e.classes(e.n("placeholder"),e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[!e.hint,e.n("--placeholder-non-hint")],e.computePlaceholderState())),style:t({color:e.color,transform:e.placeholderTransform,maxWidth:e.placeholderMaxWidth}),for:e.id},[o("span",null,T(e.placeholder),1)],14,ee)):c("",!0),e.variant==="outlined"?(n(),d("span",{key:1,ref:"placeholderTextEl",class:l([e.n("placeholder-text"),e.n("$--ellipsis")])},T(e.placeholder),3)):c("",!0),o("div",{class:l(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[e.clearable&&!e.isEmpty(e.value)?(n(),J(r,{key:0,class:l(e.n("clear-icon")),"var-field-decorator-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):c("",!0),k(e.$slots,"append-icon")],2)],6),e.line?(n(),d(K,{key:0},[e.variant==="outlined"?(n(),d("fieldset",{key:0,class:l(e.classes(e.n("line"),[e.isFocus,e.n("--line-focus")],[e.errorMessage,e.n("--line-error")],[e.formDisabled||e.disabled,e.n("--line-disabled")]))},[o("legend",{class:l(e.classes(e.n("line-legend"),[e.isFloating,e.n("line-legend--hint")])),style:t({width:e.legendWidth})},null,6)],2)):(n(),d("div",{key:1,class:l(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:t({background:e.errorMessage?void 0:e.blurColor})},[o("div",{class:l(e.classes(e.n("dot"),[e.isFocus,e.n("--line-focus")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:t({background:e.errorMessage?void 0:e.focusColor})},null,6)],6))],64)):c("",!0)],2)}const se=G(x,[["render",le]]);export{se as V,Z as p};
