import{d as Q,u as U,c as Z,a as _,w as tt}from"./components-e4168ac3.js";import{t as g}from"./elements-f242ee4a.js";import{d as et,r as c,W as ot,b0 as nt,F as at,az as st,ap as lt,af as B,aA as C,_ as it,e as rt,f as ut,m as dt,s as ct,ao as ht,aq as ft}from"./index-3ff2f9ef.js";const mt={direction:{type:String,default:"xy"},attraction:String,disabled:Boolean,boundary:{type:Object,default:()=>({top:0,bottom:0,left:0,right:0})},zIndex:{type:[Number,String],default:90},teleport:{type:[String,Object,Boolean],default:"body"},onClick:Q()},{n:gt,classes:vt}=Z("drag"),bt=et({name:"VarDrag",inheritAttrs:!1,props:mt,setup(t,{attrs:a}){const v=c(null),r=c(0),u=c(0),s=ot({top:0,bottom:0,left:0,right:0}),o=c(!1),h=c(!1),{touching:z,dragging:D,moveX:S,moveY:W,startTouch:R,moveTouch:A,endTouch:H,resetTouch:N}=nt(),{disabled:P}=U(),I=e=>{t.disabled||(R(e),k())},O=async e=>{!z.value||t.disabled||(A(e),e.preventDefault(),h.value=!1,o.value=!0,t.direction.includes("x")&&(r.value+=S.value),t.direction.includes("y")&&(u.value+=W.value),Y())},j=()=>{t.disabled||(H(),h.value=!0,L())},x=e=>{D.value||_(t.onClick,e)},k=()=>{const{left:e,top:n}=b();r.value=e,u.value=n},b=()=>{const e=B(v.value),n=B(window),i=e.top-n.top,l=n.bottom-e.bottom,d=e.left-n.left,T=n.right-e.right,{width:f,height:m}=e,{width:y,height:w}=n;return{top:i,bottom:l,left:d,right:T,width:f,height:m,halfWidth:f/2,halfHeight:m/2,windowWidth:y,windowHeight:w}},X=()=>{const e=b(),n=s.left,i=e.windowWidth-s.right-e.width,l=s.top,d=e.windowHeight-s.bottom-e.height;return{minX:n,minY:l,maxX:n<i?i:n,maxY:l<d?d:l}},L=()=>{if(t.attraction==null)return;const{halfWidth:e,halfHeight:n,top:i,bottom:l,left:d,right:T}=b(),{minX:f,minY:m,maxX:y,maxY:w}=X(),F=d+e-s.left,M=T+e-s.right,E=i+n-s.top,G=l+n-s.bottom,J=F<=M,K=E<=G;t.attraction.includes("x")&&(r.value=J?f:y),t.attraction.includes("y")&&(u.value=K?m:w)},Y=()=>{const{minX:e,minY:n,maxX:i,maxY:l}=X();r.value=C(r.value,e,i),u.value=C(u.value,n,l)},$=()=>{const{top:e=0,bottom:n=0,left:i=0,right:l=0}=t.boundary;s.top=g(e),s.bottom=g(n),s.left=g(i),s.right=g(l)},V=()=>{const e=a.style??{};return{...a,style:{...e,top:o.value?0:e.top,left:o.value?0:e.left,right:o.value?"auto":e.right,bottom:o.value?"auto":e.bottom,transform:o.value?`translate(${r.value}px, ${u.value}px)`:e.transform}}},p=()=>{o.value&&(k(),Y())},q=()=>{N(),h.value=!1,o.value=!1,r.value=0,u.value=0};return at(()=>t.boundary,$),st(p),lt(()=>{$(),p()}),{drag:v,x:r,y:u,enableTransition:h,dragging:D,teleportDisabled:P,n:gt,classes:vt,getAttrs:V,handleTouchstart:I,handleTouchmove:O,handleTouchend:j,handleClick:x,resize:p,reset:q}}});function pt(t,a,v,r,u,s){return rt(),ut(ft,{to:t.teleport===!1?void 0:t.teleport,disabled:t.teleportDisabled||t.teleport===!1},[dt("div",ht({ref:"drag",class:t.classes(t.n(),t.n("$--box"),[t.enableTransition,t.n("--transition")]),style:{"z-index":t.zIndex},onTouchstart:a[0]||(a[0]=(...o)=>t.handleTouchstart&&t.handleTouchstart(...o)),onTouchmove:a[1]||(a[1]=(...o)=>t.handleTouchmove&&t.handleTouchmove(...o)),onTouchend:a[2]||(a[2]=(...o)=>t.handleTouchend&&t.handleTouchend(...o)),onTouchcancel:a[3]||(a[3]=(...o)=>t.handleTouchend&&t.handleTouchend(...o)),onClick:a[4]||(a[4]=(...o)=>t.handleClick&&t.handleClick(...o))},t.getAttrs()),[ct(t.$slots,"default")],16)],8,["to","disabled"])}const Tt=it(bt,[["render",pt]]);tt(Tt);export{Tt as D};
