import{d as H,o as I,h as B,c as C,a as P,w as R}from"./components-cb0b140b.js";import{t as O,g as V}from"./elements-feeb8461.js";import{d as A,a as o,b as m,w as U,Z,aM as j,aA as M,aL as q,_ as D,f as G,h as J,M as K,O as Q,N as g,R as F}from"./vue-router-1c193d5c.js";import{o as X}from"./onSmartUnmounted-4311d008.js";import{o as Y}from"./onWindowResize-80ab3441.js";const _={offsetTop:{type:[String,Number],default:0},zIndex:{type:[String,Number],default:10},cssMode:Boolean,disabled:Boolean,onScroll:H()},{n:ee,classes:oe}=C("sticky"),se=A({name:"VarSticky",props:_,setup(e){const i=o(null),l=o(null),t=o(!1),r=o("0px"),f=o("0px"),v=o("auto"),h=o("auto"),b=o("auto"),S=o("auto"),T=m(()=>!e.disabled&&e.cssMode),$=m(()=>!e.disabled&&!e.cssMode&&t.value),n=m(()=>O(e.offsetTop));let s;const w=()=>{const{cssMode:a,disabled:L}=e;if(L)return;let p=0;if(s!==window){const{top:E}=M(s);p=E}const x=l.value,u=i.value,{top:z,left:N}=M(u),y=z-p;return y<=n.value?(a||(v.value=`${u.offsetWidth}px`,h.value=`${u.offsetHeight}px`,r.value=`${p+n.value}px`,f.value=`${N}px`,b.value=`${x.offsetWidth}px`,S.value=`${x.offsetHeight}px`,t.value=!0),{offsetTop:n.value,isFixed:!0}):(t.value=!1,{offsetTop:y,isFixed:!1})},d=()=>{if(!s)return;const a=w();a&&P(e.onScroll,a.offsetTop,a.isFixed)},c=async()=>{t.value=!1,await j(),w()},k=async()=>{await q(),s=V(i.value),s!==window&&s.addEventListener("scroll",d),d()},W=()=>{s!==window&&s.removeEventListener("scroll",d)};return U(()=>e.disabled,c),I(k),X(W),Y(c),B(()=>window,"scroll",d),{n:ee,classes:oe,resize:c,stickyEl:i,wrapperEl:l,isFixed:t,offsetTop:n,fixedTop:r,fixedLeft:f,fixedWidth:v,fixedHeight:h,fixedWrapperWidth:b,fixedWrapperHeight:S,enableCSSMode:T,enableFixedMode:$,toNumber:Z}}});function te(e,i,l,t,r,f){return G(),J("div",{class:g(e.classes(e.n(),[e.enableCSSMode,e.n("--css-mode")])),ref:"stickyEl",style:F({zIndex:e.toNumber(e.zIndex),top:e.enableCSSMode?`${e.offsetTop}px`:void 0,width:e.enableFixedMode?e.fixedWidth:void 0,height:e.enableFixedMode?e.fixedHeight:void 0})},[K("div",{class:g(e.n("wrapper")),ref:"wrapperEl",style:F({zIndex:e.toNumber(e.zIndex),position:e.enableFixedMode?"fixed":void 0,width:e.enableFixedMode?e.fixedWrapperWidth:void 0,height:e.enableFixedMode?e.fixedWrapperHeight:void 0,left:e.enableFixedMode?e.fixedLeft:void 0,top:e.enableFixedMode?e.fixedTop:void 0})},[Q(e.$slots,"default")],6)],6)}const ae=D(se,[["render",te]]);R(ae);export{ae as S,_ as p};
