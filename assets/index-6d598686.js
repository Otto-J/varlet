import{F as Y,u as c}from"./provide-54e96064.js";import{I as x}from"./index-d3a9b31a.js";import{d as t,i as _,b as d,c as ee}from"./components-42ed6c38.js";import{d as ne,a as V,t as oe,b as E,aG as y,o as ae,n as le,Z as se,_ as re,p as N,f as m,h as f,M as p,N as i,O as P,j as F,R as g,Q as ie,i as de,q as te}from"./vue-router.esm-bundler-1ba0b218.js";function ue(e){return["text","password","number"].includes(e)}const me={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:ue},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:t(),onBlur:t(),onClick:t(),onClear:t(),onInput:t(),onChange:t(),"onUpdate:modelValue":t()},{n:I,classes:pe}=ee("input"),ge=ne({name:"VarInput",components:{VarIcon:x,VarFormDetails:Y},props:me,setup(e){const o=V(`var-input-${oe().uid}`),b=V(null),h=V(!1),M=E(()=>e.type==="number"?"text":e.type),S=E(()=>{const{maxlength:n,modelValue:l}=e;return n?y(l)?`0 / ${n}`:`${String(l).length}/${n}`:""}),{bindForm:C,form:s}=c(),{errorMessage:a,validateWithTrigger:z,validate:O,resetValidation:v}=_(),u=n=>{le(()=>{const{validateTrigger:l,rules:r,modelValue:B}=e;z(l,n,r,B)})},R=()=>{const{hint:n,modelValue:l}=e;if(!n&&!y(l))return I("--placeholder-hidden");if(n&&(!y(l)||h.value))return I("--placeholder-hint")},U=n=>{h.value=!0,d(e.onFocus,n),u("onFocus")},j=n=>{h.value=!1,d(e.onBlur,n),u("onBlur")},T=n=>{const l=n.target;let{value:r}=l;return e.type==="number"&&(r=Z(r)),r=J(H(r)),l.value=r,r},A=n=>{Object.assign(n.target,{composing:!0})},W=n=>{const l=n.target;l.composing&&(l.composing=!1,l.dispatchEvent(new Event("input")))},q=n=>{const{composing:l}=n.target;if(l)return;const r=T(n);d(e["onUpdate:modelValue"],r),d(e.onInput,r,n),u("onInput")},G=n=>{const l=T(n);d(e.onChange,l,n),u("onChange")},L=()=>{const{disabled:n,readonly:l,clearable:r,onClear:B}=e;s!=null&&s.disabled.value||s!=null&&s.readonly.value||n||l||!r||(d(e["onUpdate:modelValue"],""),d(B,""),u("onClear"))},Q=n=>{const{disabled:l,onClick:r}=e;s!=null&&s.disabled.value||l||(d(r,n),u("onClick"))},Z=n=>{const l=n.indexOf("-"),r=n.indexOf(".");return l>-1&&(n=l===0?"-"+n.replace(/-/g,""):n.replace(/-/g,"")),r>-1&&(n=n.slice(0,r+1)+n.slice(r).replace(/\./g,"")),n.replace(/[^-0-9.]/g,"")},H=n=>e.modelModifiers.trim?n.trim():n,J=n=>e.maxlength?n.slice(0,se(e.maxlength)):n,K=n=>{const{disabled:l,readonly:r}=e;s!=null&&s.disabled.value||s!=null&&s.readonly.value||l||r||n.stopPropagation()},w=()=>{d(e["onUpdate:modelValue"],""),v()},D=()=>O(e.rules,e.modelValue),$=()=>{var n;(n=b.value)==null||n.focus()},X=()=>{b.value.blur()};return d(C,{reset:w,validate:D,resetValidation:v}),ae(()=>{e.autofocus&&$()}),{el:b,id:o,isFocus:h,errorMessage:a,type:M,maxlengthText:S,formDisabled:s==null?void 0:s.disabled,formReadonly:s==null?void 0:s.readonly,n:I,classes:pe,isEmpty:y,computePlaceholderState:R,handleFocus:U,handleBlur:j,handleInput:q,handleChange:G,handleClear:L,handleClick:Q,handleTouchstart:K,handleCompositionStart:A,handleCompositionEnd:W,validate:D,resetValidation:v,reset:w,focus:$,blur:X}}});const he=["id","disabled","type","value","maxlength","rows"],fe=["id","disabled","type","value","maxlength"],be=["for"];function ye(e,o,b,h,M,S){const C=N("var-icon"),s=N("var-form-details");return m(),f("div",{class:i(e.classes(e.n(),e.n("$--box"),[e.disabled,e.n("--disabled")])),onClick:o[14]||(o[14]=(...a)=>e.handleClick&&e.handleClick(...a))},[p("div",{class:i(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:g({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[p("div",{class:i(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[P(e.$slots,"prepend-icon")],2),p("div",{class:i(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},[e.type==="password"?(m(),f("input",{key:0,class:i(e.n("autocomplete"))},null,2)):F("",!0),e.textarea?(m(),f("textarea",{key:1,class:i(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:g({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:o[0]||(o[0]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onBlur:o[1]||(o[1]=(...a)=>e.handleBlur&&e.handleBlur(...a)),onInput:o[2]||(o[2]=(...a)=>e.handleInput&&e.handleInput(...a)),onChange:o[3]||(o[3]=(...a)=>e.handleChange&&e.handleChange(...a)),onTouchstart:o[4]||(o[4]=(...a)=>e.handleTouchstart&&e.handleTouchstart(...a)),onCompositionstart:o[5]||(o[5]=(...a)=>e.handleCompositionStart&&e.handleCompositionStart(...a)),onCompositionend:o[6]||(o[6]=(...a)=>e.handleCompositionEnd&&e.handleCompositionEnd(...a))},`
        `,46,he)):(m(),f("input",{key:2,class:i(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:g({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor}),onFocus:o[7]||(o[7]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onBlur:o[8]||(o[8]=(...a)=>e.handleBlur&&e.handleBlur(...a)),onInput:o[9]||(o[9]=(...a)=>e.handleInput&&e.handleInput(...a)),onChange:o[10]||(o[10]=(...a)=>e.handleChange&&e.handleChange(...a)),onTouchstart:o[11]||(o[11]=(...a)=>e.handleTouchstart&&e.handleTouchstart(...a)),onCompositionstart:o[12]||(o[12]=(...a)=>e.handleCompositionStart&&e.handleCompositionStart(...a)),onCompositionend:o[13]||(o[13]=(...a)=>e.handleCompositionEnd&&e.handleCompositionEnd(...a))},null,46,fe)),p("label",{class:i(e.classes(e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:g({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},ie(e.placeholder),15,be)],2),p("div",{class:i(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[P(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(m(),de(C,{key:0,class:i(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):F("",!0)])],2)],6),e.line?(m(),f("div",{key:0,class:i(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:g({background:e.errorMessage?void 0:e.blurColor})},[p("div",{class:i(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:g({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):F("",!0),te(s,{"error-message":e.errorMessage,"extra-message":e.maxlengthText},null,8,["error-message","extra-message"])],2)}const k=re(ge,[["render",ye]]);k.install=function(e){e.component(k.name,k)};export{k as I};
