import{o as E,c as F,w as G}from"./logger-5e844ee5.js";import{b as H,t as y}from"./elements-a64cd030.js";import{d as J,a as d,r as K,w as Q,aH as W,_ as U,f as Z,i as _,M as tt,O as et,m as ot,T as nt}from"./vue-router-0425d5ec.js";import{o as at}from"./onWindowResize-8116aeba.js";const st={direction:{type:String,default:"xy"},attraction:{type:String},disabled:{type:Boolean,default:!1},boundary:{type:Object,default:()=>({top:0,bottom:0,left:0,right:0})},zIndex:{type:[Number,String],default:90},teleport:{type:[String,Object],default:"body"}},{n:lt,classes:rt}=F("drag"),it=J({name:"VarDrag",inheritAttrs:!1,props:st,setup(e,{attrs:r}){const w=d(null),i=d(0),u=d(0),s=K({top:0,bottom:0,left:0,right:0}),n=d(!1),h=d(!1),f=d(!1);let m=!1,g=0,v=0,T=null;const N=t=>{if(e.disabled)return;T&&window.clearTimeout(T);const{clientX:o,clientY:a}=t.touches[0];B(),g=o,v=a,m=!0,f.value=!1},O=async t=>{if(!m||e.disabled)return;t.preventDefault(),h.value=!1,n.value=!0,f.value=!0;const{clientX:o,clientY:a}=t.touches[0],l=o-g,c=a-v;g=o,v=a,e.direction.includes("x")&&(i.value+=l),e.direction.includes("y")&&(u.value+=c),S()},A=()=>{e.disabled||(m=!1,h.value=!0,I(),T=window.setTimeout(()=>{f.value=!1}))},B=()=>{const{left:t,top:o}=X();i.value=t,u.value=o},X=()=>{const t=H(w.value),o=H(window),a=t.top-o.top,l=o.bottom-t.bottom,c=t.left-o.left,D=o.right-t.right,{width:p,height:b}=t,{width:$,height:x}=o;return{top:a,bottom:l,left:c,right:D,width:p,height:b,halfWidth:p/2,halfHeight:b/2,windowWidth:$,windowHeight:x}},R=()=>{const t=X(),o=s.left,a=t.windowWidth-s.right-t.width,l=s.top,c=t.windowHeight-s.bottom-t.height;return{minX:o,minY:l,maxX:o<a?a:o,maxY:l<c?c:l}},I=()=>{if(e.attraction==null)return;const{halfWidth:t,halfHeight:o,top:a,bottom:l,left:c,right:D}=X(),{minX:p,minY:b,maxX:$,maxY:x}=R(),k=c+t-s.left,M=D+t-s.right,V=a+o-s.top,C=l+o-s.bottom,L=k<=M,q=V<=C;e.attraction.includes("x")&&(i.value=L?p:$),e.attraction.includes("y")&&(u.value=q?b:x)},S=()=>{const{minX:t,minY:o,maxX:a,maxY:l}=R();i.value=W(i.value,t,a),u.value=W(u.value,o,l)},z=()=>{const{top:t=0,bottom:o=0,left:a=0,right:l=0}=e.boundary;s.top=y(t),s.bottom=y(o),s.left=y(a),s.right=y(l)},P=()=>{const t=r.style??{};return{...r,style:{...t,top:n.value?0:t.top,left:n.value?0:t.left,right:n.value?"auto":t.right,bottom:n.value?"auto":t.bottom,transform:n.value?`translate(${i.value}px, ${u.value}px)`:t.transform}}},Y=()=>{n.value&&(B(),S())},j=()=>{h.value=!1,n.value=!1,f.value=!1,i.value=0,u.value=0,m=!1,g=0,v=0};return Q(()=>e.boundary,z),at(Y),E(()=>{z(),Y()}),{drag:w,x:i,y:u,enableTransition:h,dragging:f,n:lt,classes:rt,getAttrs:P,handleTouchstart:N,handleTouchmove:O,handleTouchend:A,resize:Y,reset:j}}});function ut(e,r,w,i,u,s){return Z(),_(nt,{to:e.teleport},[tt("div",ot({ref:"drag",class:e.classes(e.n(),e.n("$--box"),[e.enableTransition,e.n("--transition")]),style:{"z-index":e.zIndex},onTouchstart:r[0]||(r[0]=(...n)=>e.handleTouchstart&&e.handleTouchstart(...n)),onTouchmove:r[1]||(r[1]=(...n)=>e.handleTouchmove&&e.handleTouchmove(...n)),onTouchend:r[2]||(r[2]=(...n)=>e.handleTouchend&&e.handleTouchend(...n)),onTouchcancel:r[3]||(r[3]=(...n)=>e.handleTouchend&&e.handleTouchend(...n))},e.getAttrs()),[et(e.$slots,"default")],16)],8,["to"])}const ct=U(it,[["render",ut]]);G(ct);export{ct as D};
