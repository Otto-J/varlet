import{L as X}from"./index-c61c53e3.js";import{v as Z}from"./index-e101a745.js";import{g as G,e as P,t as H}from"./elements-5ecd008f.js";import{d as F,e as J,c as K,a as R}from"./components-7bcea1d6.js";import{d as W,a as M,x as Y,u as ee,X as te,n as ae,_ as ie,p as se,ag as oe,f as n,h as L,O as $,M as B,N as T,Q as l,q as f,j as U,D as ne,P as g,r as le,aP as re,ab as de,aE as ue,w as fe,S as s,ao as t,av as k,F as S,i as y,ai as z}from"./vue-router-609def63.js";import{d as me}from"./shared-71dfa5a1.js";import{p as pe,u as ce,a as Q,_ as ge,b as ve,c as he}from"./index-4fabe892.js";import{C as D}from"./index-f8fdb594.js";import{a as V,T as Te}from"./index-6c167ba0.js";import{T as ke}from"./index-1eb955d7.js";import{T as _}from"./index-003fb8e5.js";import{d as ye}from"./index-dd768cde.js";import"./index-405029f5.js";/* empty css               */import"./logger-525ef361.js";import"./index-2c7b28ef.js";import"./index-2b057d6c.js";import"./useChildren-afa766b4.js";import"./index-c0f53868.js";import"./provide-f4a0e038.js";import"./provide-a67f321c.js";import"./index-0a6404a7.js";const Le={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:F(),"onUpdate:loading":F(),"onUpdate:error":F()},{n:Ue,classes:xe}=K("list"),be=W({name:"VarList",directives:{Ripple:Z},components:{VarLoading:X},props:Le,setup(e){const a=M(null),b=M(null);let p;const C=()=>{R(e["onUpdate:error"],!1),R(e["onUpdate:loading"],!0),R(e.onLoad)},v=()=>{const{bottom:c}=P(p),{bottom:N}=P(b.value);return Math.floor(N)-H(e.offset)<=c},m=()=>{p.removeEventListener("scroll",d)},d=async()=>{await ae();const{loading:c,finished:N,error:E}=e;!c&&!N&&!E&&v()&&C()};return J(()=>{p=G(a.value),p.addEventListener("scroll",d),e.immediateCheck&&d()}),Y(m),ee(m),{pack:pe,listEl:a,detectorEl:b,dt:me,isNumber:te,load:C,check:d,n:Ue,classes:xe}}});function Ce(e,a,b,p,C,v){const m=se("var-loading"),d=oe("ripple");return n(),L("div",{class:T(e.classes(e.n(),e.n("$--box"))),ref:"listEl"},[$(e.$slots,"default"),e.loading?$(e.$slots,"loading",{key:0},()=>[B("div",{class:T(e.n("loading"))},[B("div",{class:T(e.n("loading-text"))},l(e.dt(e.loadingText,e.pack.listLoadingText)),3),f(m,{size:"mini",radius:10})],2)]):U("",!0),e.finished?$(e.$slots,"finished",{key:1},()=>[B("div",{class:T(e.n("finished"))},l(e.dt(e.finishedText,e.pack.listFinishedText)),3)]):U("",!0),e.error?$(e.$slots,"error",{key:2},()=>[ne((n(),L("div",{class:T(e.n("error")),onClick:a[0]||(a[0]=(...c)=>e.load&&e.load(...c))},[g(l(e.dt(e.errorText,e.pack.listErrorText)),1)],2)),[[d]])]):U("",!0),B("div",{class:T(e.n("detector")),ref:"detectorEl"},null,2)],2)}const x=ie(be,[["render",Ce]]);x.install=function(e){e.component(x.name,x)};const Ne={basicUsage:"基本使用",loadFail:"加载失败",tipText:"提示文字",loadingText:"正在努力输出",errorText:"出错了出错了",finishedText:"一滴都没有了",listItem:"列表项"},$e={basicUsage:"Basic Usage",loadFail:"Load Fail",tipText:"Tip Text",loadingText:"loading QAQ",errorText:"error TNT",finishedText:"finished ORZ",listItem:"List Item"},{add:O,use:Be,pack:u,packs:We,merge:Ye}=ce(),Se=e=>{he(e),Be(e)};Q("zh-CN",ge);Q("en-US",ve);O("zh-CN",Ne);O("en-US",$e);const et={__name:"index",setup(e){const a=le({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0,actives:[]}),{list:b,list2:p,list3:C,loading:v,loading2:m,loading3:d,finished:c,finished2:N,finished3:E,error:w,current:h,actives:I}=re(a);function j(){if(a.current!==0){a.loading=!1;return}setTimeout(()=>{for(let r=0;r<20;r++)a.list.push(a.list.length+1);a.loading=!1,a.list.length>=60&&(a.finished=!0)},1e3)}function q(){if(a.current!==1){a.loading2=!1;return}setTimeout(()=>{if(a.list2.length===40){a.error=!0,a.loading2=!1;return}for(let r=0;r<20;r++)a.list2.push(a.list2.length+1);a.loading2=!1},1e3)}function A(){if(a.current!==2){a.loading3=!1;return}setTimeout(()=>{for(let r=0;r<20;r++)a.list3.push(a.list3.length+1);a.loading3=!1,a.list3.length>=60&&(a.finished3=!0)},1e3)}return de(Se),ue(ye),fe(()=>a.current,r=>{a.actives.push(r)},{immediate:!0}),(r,o)=>(n(),L(S,null,[f(t(Te),{active:t(h),"onUpdate:active":o[0]||(o[0]=i=>k(h)?h.value=i:null),sticky:"","offset-top":"14.4vw",style:{"margin-bottom":"10px"}},{default:s(()=>[f(t(V),null,{default:s(()=>[g(l(t(u).basicUsage),1)]),_:1}),f(t(V),null,{default:s(()=>[g(l(t(u).loadFail),1)]),_:1}),f(t(V),null,{default:s(()=>[g(l(t(u).tipText),1)]),_:1})]),_:1},8,["active"]),f(t(ke),{active:t(h),"onUpdate:active":o[5]||(o[5]=i=>k(h)?h.value=i:null)},{default:s(()=>[f(t(_),null,{default:s(()=>[t(I).includes(0)?(n(),y(t(x),{key:0,finished:t(c),loading:t(v),"onUpdate:loading":o[1]||(o[1]=i=>k(v)?v.value=i:null),onLoad:j},{default:s(()=>[(n(!0),L(S,null,z(t(b),i=>(n(),y(t(D),{key:i},{default:s(()=>[g(l(t(u).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","loading"])):U("",!0)]),_:1}),f(t(_),null,{default:s(()=>[t(I).includes(1)?(n(),y(t(x),{key:0,finished:t(N),error:t(w),"onUpdate:error":o[2]||(o[2]=i=>k(w)?w.value=i:null),loading:t(m),"onUpdate:loading":o[3]||(o[3]=i=>k(m)?m.value=i:null),onLoad:q},{default:s(()=>[(n(!0),L(S,null,z(t(p),i=>(n(),y(t(D),{key:i},{default:s(()=>[g(l(t(u).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","error","loading"])):U("",!0)]),_:1}),f(t(_),null,{default:s(()=>[t(I).includes(2)?(n(),y(t(x),{key:0,"loading-text":t(u).loadingText,"finished-text":t(u).finishedText,"error-text":t(u).errorText,finished:t(E),loading:t(d),"onUpdate:loading":o[4]||(o[4]=i=>k(d)?d.value=i:null),onLoad:A},{default:s(()=>[(n(!0),L(S,null,z(t(C),i=>(n(),y(t(D),{key:i},{default:s(()=>[g(l(t(u).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["loading-text","finished-text","error-text","finished","loading"])):U("",!0)]),_:1})]),_:1},8,["active"])],64))}};export{et as default};
