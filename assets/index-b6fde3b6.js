import{I as Q}from"./index-ab50e7e0.js";import{b as W,f as k,q as V,o as X}from"./elements-844831fb.js";import{d as D,o as Z,i as G,c as H,a as $,w as J}from"./logger-5e844ee5.js";import{d as K,a as l,b as h,W as x,w as ee,X as ae,Z as g,n as te,_ as Y,p as se,f as p,h as M,M as oe,q as le,N,R as ne,O as re,aC as ue,i as P,S as E,an as B,ah as ce,P as ie,Q as de,F as ve}from"./vue-router-0425d5ec.js";import{C as fe}from"./index-a7b713d6.js";import{d as me}from"./index-a0438c78.js";import"./index-5ef7c0ce.js";import"./index-98d3be4f.js";/* empty css               */const he={modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},animationDuration:{type:[Number,String],default:300},successDuration:{type:[Number,String],default:2e3},bgColor:{type:String},successBgColor:{type:String},color:{type:String},successColor:{type:String},target:{type:[String,Object]},onRefresh:D(),"onUpdate:modelValue":D()},{n:L,classes:ge}=H("pull-refresh"),O=150,pe=K({name:"VarPullRefresh",components:{VarIcon:Q},props:he,setup(e){const t=l(0),v=l(null),i=l(null),d=l(0),s=l("-125%"),n=l("arrow-down"),a=l("default"),r=l(!1);let u,f,w=0,S=0;const b=async o=>{if(n.value!==o)return n.value=o,new Promise(c=>{window.setTimeout(c,O)})},C=h(()=>a.value!=="loading"&&a.value!=="success"&&!e.disabled),U=h(()=>({transform:`translate3d(0px, ${x(s.value)?s.value:`${s.value}px`}, 0px) translate(-50%, 0)`,transition:r.value?`transform ${e.animationDuration}ms`:void 0,background:y.value?e.successBgColor:e.bgColor,color:y.value?e.successColor:e.color})),m=h(()=>Math.abs(2*t.value)),y=h(()=>a.value==="success"),T=o=>{("classList"in u?u:document.body).classList[o](`${L()}--lock`)},q=o=>{if(t.value===0){const{width:c}=W(i.value);t.value=-(c+c*.25)}w=o.touches[0].clientY,S=0,f=k(o.target)},I=o=>{if(!C.value||!f||f!==u&&V(f)>0)return;const c=V(u);if(c>0)return;const _=c===0;S=o.touches[0].clientY-w,_&&S>=0&&o.preventDefault(),a.value!=="pulling"&&(a.value="pulling",d.value=o.touches[0].clientY),_&&ae(s.value)&&s.value>t.value&&T("add");const R=(o.touches[0].clientY-d.value)/2+t.value;s.value=R>=m.value?m.value:R,b(s.value>=m.value*.2?"refresh":"arrow-down")},z=async()=>{C.value&&(r.value=!0,g(s.value)>=m.value*.2?(await b("refresh"),a.value="loading",s.value=m.value*.3,$(e["onUpdate:modelValue"],!0),te(()=>{$(e.onRefresh)}),T("remove")):(a.value="loosing",n.value="arrow-down",s.value=t.value,setTimeout(()=>{r.value=!1,T("remove")},g(e.animationDuration))),f=null)},F=()=>{u=e.target?X(e.target,"PullRefresh"):k(v.value)},j=()=>{setTimeout(()=>{a.value="default",n.value="arrow-down",r.value=!1},g(e.animationDuration))};return ee(()=>e.modelValue,o=>{o===!1&&(r.value=!0,a.value="success",n.value="checkbox-marked-circle",setTimeout(()=>{s.value=t.value,j()},g(e.successDuration)))}),Z(F),G(v,"touchmove",I),{n:L,classes:ge,ICON_TRANSITION:O,refreshStatus:a,freshNode:v,controlNode:i,touchStart:q,touchMove:I,touchEnd:z,iconName:n,controlStyle:U,isSuccess:y}}});function Se(e,t,v,i,d,s){const n=se("var-icon");return p(),M("div",{ref:"freshNode",class:N(e.n()),onTouchstart:t[0]||(t[0]=(...a)=>e.touchStart&&e.touchStart(...a)),onTouchend:t[1]||(t[1]=(...a)=>e.touchEnd&&e.touchEnd(...a)),onTouchcancel:t[2]||(t[2]=(...a)=>e.touchEnd&&e.touchEnd(...a))},[oe("div",{ref:"controlNode",class:N(e.classes(e.n("control"),e.n("$-elevation--2"),[e.isSuccess,e.n("control-success")])),style:ne(e.controlStyle)},[le(n,{name:e.iconName,transition:e.ICON_TRANSITION,class:N(e.classes(e.n("icon"),[e.refreshStatus==="loading",e.n("animation")])),"var-pull-refresh-cover":""},null,8,["name","transition","class"])],6),re(e.$slots,"default")],34)}const A=Y(pe,[["render",Se]]);J(A);const ye={__name:"index",setup(e){const t=Array(30).fill("List Item"),v=Array(30).fill("This is new List Item"),i=l(!1),d=l(t);function s(){setTimeout(()=>{d.value=d.value[0]==="List Item"?v:t,i.value=!1},2e3)}return ue(me),(n,a)=>(p(),P(B(A),{onRefresh:s,modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=r=>i.value=r),"success-duration":"2000"},{default:E(()=>[(p(!0),M(ve,null,ce(d.value,(r,u)=>(p(),P(B(fe),{key:u,border:""},{default:E(()=>[ie(de(r+" "+(u+1)),1)]),_:2},1024))),128))]),_:1},8,["modelValue"]))}},De=Y(ye,[["__scopeId","data-v-6f15a34c"]]);export{De as default};
