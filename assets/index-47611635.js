import{S as oe}from"./index-38105d08.js";import{d as X,a as u,b as k,E as ae,_ as Y,f as h,i as re,S as C,M as j,O as q,P as B,Q as p,m as le,aH as ie,w as ce,e as de,y as ue,Z as R,V as fe,h as g,F as K,ai as Q,N as D,R as L,o as pe,ac as me,aC as he,q as I,ap as y}from"./vue-router.esm-bundler-6be07501.js";import{u as ve,c as Z,d as V,b as ye,a as H}from"./components-440543a7.js";import{u as ge}from"./useChildren-9d793b89.js";import{e as be}from"./shared-bf7e5160.js";import{t as ke,e as Ce,b as _e,n as Te,j as xe,d as U,h as Ie,g as Be}from"./elements-323d4edc.js";import{C as F}from"./index-0c3f2063.js";import{d as $e}from"./index-59604d2c.js";import{u as Se,c as Ne,a as G,_ as we,b as Ae}from"./index-3093d569.js";import"./index-84639265.js";import"./index-18c186b5.js";import"./index-acdd7a60.js";/* empty css               */const J=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY");function Ee(){const{bindChildren:e,length:l,childProviders:n}=ge(J);return{length:l,indexAnchors:n,bindIndexAnchors:e}}function ze(){const{parentProvider:e,index:l,bindParent:n}=ve(J);if(!n)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:l,indexBar:e,bindIndexBar:n}}const De={index:{type:[Number,String]}},{n:Pe,classes:Le}=Z("index-anchor"),Oe=X({name:"VarIndexAnchor",components:{VarSticky:oe},inheritAttrs:!1,props:De,setup(e){const{index:l,indexBar:n,bindIndexBar:f}=ze(),c=u(0),s=u(!1),i=k(()=>e.index),t=u(null),{active:S,sticky:N,cssMode:b,stickyOffsetTop:_,zIndex:a}=n;return f({index:l,name:i,ownTop:c,setOwnTop:()=>{t.value&&(c.value=t.value.$el?t.value.$el.offsetTop:t.value.offsetTop)},setDisabled:T=>{s.value=T}}),{n:Pe,classes:Le,name:i,anchorEl:t,active:S,sticky:N,zIndex:a,disabled:s,cssMode:b,stickyOffsetTop:_,Transition:ae}}});function Me(e,l,n,f,c,s){return h(),re(ie(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:C(()=>[j("div",le({class:e.n()},e.$attrs),[q(e.$slots,"default",{},()=>[B(p(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}const Re=Y(Oe,[["render",Me]]),Ve={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:V(),onChange:V()},{n:He,classes:Ue}=Z("index-bar"),Fe=X({name:"VarIndexBar",props:Ve,setup(e){const{length:l,indexAnchors:n,bindIndexAnchors:f}=Ee(),c=u(""),s=u(null),i=u([]),t=u(),S=k(()=>e.sticky),N=k(()=>e.cssMode),b=k(()=>ke(e.stickyOffsetTop)),_=k(()=>e.zIndex);let a=null;f({active:t,sticky:S,cssMode:N,stickyOffsetTop:b,zIndex:_});const w=(o,r)=>{const d=fe(o)?o.name.value:o;d===t.value||d===void 0||(t.value=d,(r==null?void 0:r.event)!==!1&&H(e.onChange,d))},A=()=>{if(!("getBoundingClientRect"in a))return 0;const{top:o}=a.getBoundingClientRect(),{scrollTop:r}=a,{top:d}=s.value.getBoundingClientRect();return r-o+d},T=()=>{const o=Ie(a),r=a===window?document.body.scrollHeight:a.scrollHeight,d=A();n.forEach((m,v)=>{const E=m.ownTop.value,x=o-E+b.value-d,z=v===n.length-1?r:n[v+1].ownTop.value-m.ownTop.value;x>=0&&x<z&&c.value===""&&(v&&!e.cssMode&&n[v-1].setDisabled(!0),m.setDisabled(!1),w(m))})},O=async({anchorName:o,manualCall:r=!1,options:d})=>{if(r&&H(e.onClick,o),o===t.value)return;const m=n.find(({name:z})=>o===z.value);if(!m)return;const v=A(),E=m.ownTop.value-b.value+v,x=Ce(a);c.value=o,w(o,d),await _e(a,{left:x,top:E,animation:be,duration:R(e.duration)}),Te(()=>{c.value=""})},ne=async()=>{await U(),a=Be(s.value)},se=()=>{a.addEventListener("scroll",T)},M=()=>{a.removeEventListener("scroll",T)},te=(o,r)=>{xe(()=>O({anchorName:o,options:r}))};return ce(()=>l.value,async()=>{await U(),n.forEach(({name:o,setOwnTop:r})=>{o.value&&i.value.push(o.value),r()})}),ye(async()=>{await ne(),se()}),de(M),ue(M),{n:He,classes:Ue,barEl:s,active:t,zIndex:_,anchorNameList:i,toNumber:R,scrollTo:te,anchorClick:O}}});const Xe=["onClick"];function Ye(e,l,n,f,c,s){return h(),g("div",{class:D(e.n()),ref:"barEl"},[q(e.$slots,"default"),j("ul",{class:D(e.n("anchor-list")),style:L({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(h(!0),g(K,null,Q(e.anchorNameList,i=>(h(),g("li",{key:i,class:D(e.classes(e.n("anchor-item"),[e.active===i,e.n("anchor-item--active")])),style:L({color:e.active===i&&e.highlightColor?e.highlightColor:""}),onClick:t=>e.anchorClick({anchorName:i,manualCall:!0})},p(i),15,Xe))),128))],6)],2)}const $=Y(Fe,[["render",Ye]]);$.install=function(e){e.component($.name,$)};const je={title:"标题",text:"文本"},qe={title:"Title",text:"Text"},{add:W,use:Ke,pack:P,packs:un,merge:fn}=Se(),Qe=e=>{Ne(e),Ke(e)};G("zh-CN",we);G("en-US",Ae);W("zh-CN",je);W("en-US",qe);const Ze={class:"index-bar-example-container"},pn={setup(e){const l=u([]),n=u("#e7edf7"),f=u("#2e67ba");pe(()=>{for(let s=0;s<26;s++)l.value.push(String.fromCharCode(65+s))});function c(s){console.log(s)}return me(Qe),he($e,s=>{n.value=s==="darkTheme"?"rgb(41, 42, 45)":"#e7edf7",f.value=s==="darkTheme"?"#3980e8":"#2e67ba"}),(s,i)=>(h(),g("div",Ze,[I(y($),{onChange:c,duration:"300"},{default:C(()=>[(h(!0),g(K,null,Q(l.value,t=>(h(),g("div",{key:t},[I(Re,{index:t,class:"index-bar-example-anchor",style:L({background:n.value,color:f.value})},{default:C(()=>[B(p(y(P).title)+" "+p(t),1)]),_:2},1032,["index","style"]),I(y(F),null,{default:C(()=>[B(p(t)+" "+p(y(P).text),1)]),_:2},1024),I(y(F),null,{default:C(()=>[B(p(t)+" "+p(y(P).text),1)]),_:2},1024)]))),128))]),_:1})]))}};export{pn as default};
